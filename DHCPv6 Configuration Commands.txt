DHCPv6 Configuration Commands

    Command Support
    address prefix
    capwap-ac (IPv6 address pool view)
    conflict-address expire-time
    dhcpv6 client information-request
    dhcpv6 client pd
    dhcpv6 client renew
    dhcpv6 duid
    dhcpv6 interface-id format
    dhcpv6 interface-id insert enable
    dhcpv6 packet-rate
    dhcpv6 packet-rate drop-alarm enable
    dhcpv6 packet-rate drop-alarm threshold
    dhcpv6 pool
    dhcpv6 relay advertise prefix-delegation route
    dhcpv6 relay prefix-delegation route
    dhcpv6 relay destination
    dhcpv6 relay server-select
    dhcpv6 relay source-interface
    dhcpv6 relay option79 insert enable
    dhcpv6 remote-id format
    dhcpv6 remote-id insert enable
    dhcpv6 remote-id rebuild enable
    dhcpv6 server (system view)
    dhcpv6 server (interface view)
    dhcpv6-server(DHCPv6 server group view)
    dhcpv6 server database
    dhcpv6 server group
    display dhcpv6 client
    display dhcpv6 client prefix
    display dhcpv6 client statistics
    display dhcpv6 duid
    display dhcpv6 relay configuration
    display dhcpv6 relay prefix-delegation
    display dhcpv6 relay statistics
    display dhcpv6 pool
    display dhcpv6 relay
    display dhcpv6 server
    display dhcpv6 server group
    display dhcpv6 statistics
    dns-domain-name
    dns-server (IPv6 address pool view)
    excluded-address
    information-refresh
    ipv6 address auto dhcp
    link-address
    lock (IPv6 address pool view)
    logging (IPv6 address pool view)
    nis-domain-name
    nisp-domain-name
    nisp-server
    nis-server
    prefix-delegation
    renew-time-percent rebind-time-percent
    reset dhcpv6 client statistics
    reset dhcpv6 pool
    reset dhcpv6 relay prefix-delegation route
    reset dhcpv6 relay statistics
    reset dhcpv6 server statistics
    reset dhcpv6 statistics
    sip-domain-name
    sip-server (IPv6 address pool view)
    sntp-server
    static-bind address
    static-bind prefix
    suboption
    vendor-specific

Command Support

Commands provided in this section and all the parameters in the commands are supported by all switch models (except the S5751-L, S5731-L, and S5731S-L), unless otherwise specified. For details, see specific commands.

Layer 3 Ethernet interface, VLANIF interface, and sub-interface all support the DHCPv6 function.
address prefix

Function

The address prefix command configures the network prefix and lifetime in the IPv6 address pool view.

The undo address prefix command deletes the network prefix and lifetime that are configured in the IPv6 address pool view.

By default, no network prefix and lifetime are configured in the IPv6 address pool view.
Format

address prefix ipv6-prefix/ipv6-prefix-length [ eui-64 ] [ life-time { valid-lifetime | infinite } { preferred-lifetime | infinite } ]

address prefix ipv6-prefix/ipv6-prefix-length [ eui-64 ] [ life-time preferred-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ] valid-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ] ]

address prefix ipv6-prefix/ipv6-prefix-length [ lock ]

undo address prefix ipv6-prefix/ipv6-prefix-length [ lock ]
Parameters

Parameter
	

Description
	

Value

ipv6-prefix/ipv6-prefix-length
	

Specifies the network prefix and prefix length.
	

ipv6-prefix: The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

ipv6-prefix-length: The value is an integer that ranges from 1 to 128.

eui-64
	

Generates the interface ID based on the user MAC address according to the EUI-64 specifications. This method can be used to allocate addresses only when the client DUID type is LL or LLT.
	

-

life-time
	

Specifies the network prefix lifetime.
	

-

valid-lifetime
	

Specifies the valid lifetime.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 172800, that is two days.

preferred-lifetime
	

Specifies the preferred lifetime.

The preferred lifetime cannot exceed the valid lifetime.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 86400, that is one day.

infinite
	

Sets the lifetime to infinite.

When the preferred lifetime is set to infinite, the valid lifetime must be set to infinite.
	

-

preferred-lifetime days days [ hours hours [ minutes minutes [seconds seconds ] ] ]
	

Specifies the preferred lifetime of the IPv6 prefix. The time must be no less than 1 minute.
	

    days: indicates days. The value is an integer that ranges from 0 to 1999.
    hours: indicates hours. The value is an integer that ranges from 0 to 23.
    minutes: indicates minutes. The value is an integer that ranges from 0 to 59.
    seconds: indicates seconds. The value is an integer that ranges from 0 to 59.

valid-lifetime days days [ hours hours [ minutes minutes [seconds seconds ] ] ]
	

Specifies the valid lifetime of the IPv6 prefix. The time must be no less than 1 minute and cannot be less than the preferred lifetime.
	

    days: indicates days. The value is an integer that ranges from 0 to 1999.
    hours: indicates hours. The value is an integer that ranges from 0 to 23.
    minutes: indicates minutes. The value is an integer that ranges from 0 to 59.
    seconds: indicates seconds. The value is an integer that ranges from 0 to 59.

lock
	

Locks the address prefix.
	

-
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When the device functions as a DHCPv6 server, run the address prefix command to configure the network prefix in an IPv6 address pool. If IPv6 addresses in an IPv6 address pool have been assigned to DHCPv6 clients, only the value of life-time can be modified.

Precautions

If no DHCPv6 relay agent exists between the DHCPv6 server and client, the length of the network prefix configured to the DHCPv6 server address pool must be longer than or equal to the prefix length of IPv6 addresses of Layer 3 interfaces on the DHCPv6 server.

Idle addresses or prefixes are assigned to DHCPv6 clients from the IPv6 address pool. Reserved addresses, conflicted addresses, and used addresses cannot be assigned to DHCPv6 clients. Reserved addresses include unspecified addresses, multicast addresses, loopback addresses, link-local addresses, NSAP addresses, and anycast addresses (defined in RFC 2526).

Prerequisites

An address pool has been created by using the dhcpv6 pool command.
Example

# Bind the network prefix fc00:1::/64 to the DHCPv6 server address pool pool1 and set the lifetime to infinite.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1 
[HUAWEI-dhcpv6-pool-pool1] address prefix fc00:1::/64 life-time infinite infinite

capwap-ac (IPv6 address pool view)
Function

The capwap-ac command configures the AC's IPv6 address in the IPv6 address pool view.

The undo capwap-ac command deletes the AC's IPv6 address configured in the IPv6 address pool view.

By default, the AC's IPv6 address is not configured in the IPv6 address pool view.
Format

capwap-ac ipv6-address

undo capwap-ac ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the IPv6 address for an AC.
	

The total length is 128 bit, which is divided into eight groups. The 16 bits of each group are represented by four hexadecimal characters. The format is X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

In the AC+Fit AP scenario, the AC needs to establish connections with APs. The device functioning as a DHCPv6 server can specify the AC's IPv6 address for an AP. The AP then can connect to the specified AC. The device uses Option52 to carry the AC address.

If the AC and AP are located in the same network segment, the AP sends a broadcast packet to automatically discover the AC. In this case, the configuration of the capwap-ac command is optional. If the AC and AP are located in different network segments, you must configure the capwap-ac command.

Prerequisites

The IPv6 address pool is created using the dhcpv6 pool command.

Precautions

You can run the capwap-ac command multiple times to configure the IPv6 addresses of several ACs, and the AC's IPv6 address that is configured first takes precedence over the one configured later.
Example

# Specify the AC's IPv6 address to fc00:1::1 in pool1 of the DHCPv6 server.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] capwap-ac fc00:1::1

conflict-address expire-time
Function

The conflict-address expire-time command sets the aging time for conflicted addresses in the IPv6 address pool.

The undo conflict-address expire-time command restores the default aging time of conflicted addresses in the IPv6 address pool.

By default, the aging time of conflicted addresses is 172800s (two days).
Format

conflict-address expire-time expire-time

undo conflict-address expire-time
Parameters

Parameter
	

Description
	

Value

expire-time
	

Specifies the aging time for the conflicted addresses in the address pool.
	

The value is an integer that ranges from 60 to 4294967295, in seconds.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The conflict-address expire-time command is used on DHCPv6 servers. If the IPv6 address in the address pool is marked as a conflicted address, it cannot be allocated. To use these conflicted addresses, the administrator needs to mark these addresses as assignable. After the aging time configured using the conflict-address expire-time command expires, the conflicted addresses automatically become assignable.

Prerequisites

An address pool has been created by using the dhcpv6 pool command.
Example

# Set the aging time of conflicted addresses in global address pool global1 to 36000s.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] conflict-address expire-time 36000

dhcpv6 client information-request

Function

The dhcpv6 client information-request command enables an interface to obtain configuration parameters (not including IPv6 addresses) using stateless DHCPv6 address autoconfiguration.

The undo dhcpv6 client information-request command disables an interface from obtaining configuration parameters (not including IPv6 addresses) using stateless DHCPv6 address autoconfiguration.

By default, the interface is disabled from obtaining configuration parameters (not including IPv6 addresses) using stateless DHCPv6 address autoconfiguration.
Format

dhcpv6 client information-request

undo dhcpv6 client information-request
Parameters

None
Views

VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dhcpv6 client information-request command is used on the DHCPv6 client. After you run the dhcpv6 client information-request on the device that functions as a DHCPv6 client, IPv6 addresses are generated based on the Route Advertisement (RA) packets. The DHCPv6 server provides other configuration parameters such as IP addresses of the DNS, and SNTP servers except for IPv6 addresses and the interval for updating configuration parameters.

Prerequisites

    IPv6 functions have been enabled globally using the ipv6 command in the system view.
    IPv6 functions have been enabled on interfaces using the ipv6 enable command in the interface view.
    The IPv6 link-local address has been configured using the ipv6 address auto link-local or ipv6 address ipv6-address link-local command in the interface view.

Example

# Configure the DHCPv6 client to obtain configuration parameters using stateless DHCPv6 address autoconfiguration on the interface VLANIF100.

<HUAWEI> system-view
[HUAWEI] ipv6 
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] ipv6 address auto link-local
[HUAWEI-Vlanif100] dhcpv6 client information-request

# Configure the DHCPv6 client to obtain configuration parameters using stateless DHCPv6 address autoconfiguration on the interface

<HUAWEI> system-view
[HUAWEI] ipv6 
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] ipv6 address auto link-local
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 client information-request

dhcpv6 client pd
Function

The dhcpv6 client pd command configures the DHCPv6 PD client function.

The undo dhcpv6 client pd command disables the DHCPv6 PD client function.

By default, the DHCPv6 PD client function is disabled.
Format

dhcpv6 client pd prefix-name [ hint ipv6-prefix/ipv6-prefix-length ] [ rapid-commit ] [ unicast-option ]

undo dhcpv6 client pd
Parameters

Parameter
	

Description
	

Value

prefix-name
	

Specifies the name of an IPv6 address prefix name.
	

The value is a string of 1 to 63 case-sensitive characters without spaces.

hint ipv6-prefix/ipv6-prefix-length
	

Specifies the required IPv6 address prefix and prefix length.
	

ipv6-prefix: The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

ipv6-prefix-length: The value is an integer that ranges from 1 to 128.

rapid-commit
	

Indicates that the DHCPv6 PD client requests an IPv6 address prefix using the two-message exchange.
	

-

unicast-option
	

Indicates that the DHCPv6 PD client requests an IPv6 address prefix using the unicast mode.
	

-
Views

VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dhcpv6 client pd command is used on the DHCPv6 PD client. After the dhcpv6 client pd is executed on the device that functions as a DHCPv6 PD client, the device requests an IPv6 address prefix in the DHCPv6 mode. The requested prefix is bound to the configured prefix name. You can specify the hint ipv6-prefix/ipv6-prefix-length parameter to set the required IPv6 address prefix and prefix length.

Prerequisites

    IPv6 functions have been enabled globally using the ipv6 command in the system view.
    IPv6 functions have been enabled on interfaces using the ipv6 enable command in the interface view.
    The IPv6 link-local address has been configured using the ipv6 address auto link-local, or ipv6 address ipv6-address link-local command in the interface view. Or the IPv6 global unicast IPv6 address has been configured using the ipv6 address { ipv6-address prefix-length | ipv6-address/prefix-length } command in the interface view.

Configuration Precautions

When configuring the DHCPv6 PD client function, you cannot set prefix-name to a, au, aut, or auto. These prefix names cannot be applied to interfaces.
Example
# Configure the DHCPv6 PD client to obtain IPv6 address prefix using stateless DHCPv6 address autoconfiguration on the interface VLANIF100.

<HUAWEI> system-view
[HUAWEI] ipv6 
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] ipv6 address auto link-local
[HUAWEI-Vlanif100] dhcpv6 client pd example

# Configure the DHCPv6 PD client to obtain IPv6 address prefix using stateless DHCPv6 address autoconfiguration on the interface GE0/0/1.

<HUAWEI> system-view
[HUAWEI] ipv6 
[HUAWEI] interface gigabitethernet0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] ipv6 address auto link-local
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 client pd example

dhcpv6 client renew
Function

The dhcpv6 client renew command updates the IPv6 address or prefix applied by a DHCPv6 client.
Format

dhcpv6 client renew
Parameters

None
Views

VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

The dhcpv6 client renew command applies to only the DHCP client and updates the IPv6 address or prefix applied by the DHCPv6 client.
Example
# Manually update the applied IPv6 address.

<HUAWEI> system-view
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 address auto dhcp
[HUAWEI-Vlanif100] dhcpv6 client renew

# Manually update the applied IPv6 prefix.

<HUAWEI> system-view
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] dhcpv6 client pd myprefix
[HUAWEI-Vlanif100] dhcpv6 client renew

dhcpv6 duid

Function

The dhcpv6 duid command configures a DUID for the DHCPv6 device.

By default, the device generates a DUID based on the link-layer (LL) address.
Format

dhcpv6 duid { ll | llt | duid }
Parameters

Parameter
	

Description
	

Value

ll
	

Configures the device to generate a DUID based on the link-layer address (MAC address).
	

-

llt
	

Configures the device to generate a DUID based on the link-layer address (MAC address) plus time.
	

-

duid
	

Specifies the DUID of the device.
	

The value is a hexadecimal string with an even number (in the range of 8 to 28) of characters. The value contains only combinations of digits 0 to 9, uppercase letters A to F, and lowercase letters a to f.
Views

System view
Default Level

3: Management level
Usage Guidelines

A DUID identifies a DHCPv6 device. Each DHCPv6 server or client has a unique DUID. Servers use DUIDs to identify clients and clients use DUIDs to identify servers. When this command is run, a new DUID is stored in the :/dhcp/dhcp-duid.txt file of the storage device. You can run the display dhcpv6 duid command to check the DUID of the device.
Example

# Configure the device to generate a DUID based on the link-layer address.

<HUAWEI> system-view
[HUAWEI] dhcpv6 duid ll
Warning: The DHCP unique identifier should be globally-unique and stable. Are you sure to change it? [Y/N]y 

dhcpv6 interface-id format
Function

The dhcpv6 interface-id format command configures the Interface-ID format in DHCPv6 packets.

The undo dhcpv6 interface-id format command restores the default Interface-ID format in DHCPv6 packets.

By default, the Interface-ID format in DHCPv6 packets is default.
Format

dhcpv6 interface-id format { default | user-defined text }

undo dhcpv6 interface-id format
Parameters
Parameter 	Description 	Value

default
	

Specifies the default Interface-ID format.

The default Interface-ID format is %04svlan.%04cvlan.%mac:%portname. The values of the S-VLAN and C-VLAN are integers containing four characters. If the length is fewer than four characters, the value is prefixed with 0s. For example, if the outer VLAN value in the DHCPv6 packets received by the device is 11, the inner VLAN value is 22, the inbound interface is VLANIF100, and the device MAC address is 00e0-fc12-3456, the Interface-ID generated during the system parsing process is 0011.0022.00e0fc123456:vlanif100.
	

-

user-defined text
	
Specifies a user-defined format as the Interface-ID format. A user-defined format can be:

    Format defined by keywords: The Interface-ID is defined based on the keywords supported by the user-defined format. For example, if the name of the device to which the users are connected and the outer VLAN to which the users belong need to be recorded, the user-defined format can be %sysname %svlan. If the device name is HUAWEI and the S-VLAN is 100, the user location information recorded by the Interface-ID is HUAWEI 100.

    For description of the keywords supported by the user-defined format, see Table 6-76.

    Format defined by common character strings: The Interface-ID is directly defined as a character string. For example, if all users on an interface are located in the office building named N8, the Interface-ID can be directly defined as N8.

    Mixed format: The Interface-ID is defined by both the keywords and common character strings. For example, the Interface-ID can be defined as %sysname N8.

	

The value is a string of case-sensitive characters without spaces. The character string contains 1 to 251 characters, excluding the quotation marks.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The Interface-ID records user access information such as the inbound interfaces of the DHCPv6 packets sent from the clients to the device. The device functions as a DHCPv6 relay or lightweight DHCPv6 relay agent (LDRA). When receiving the request packets sent from the DHCPv6 clients and forwarding the packets to the DHCPv6 server, the device can insert the Interface-ID to the packets to identify the DHCPv6 client location information. The location information can be used by the DHCPv6 server to assign IPv6 addresses and network parameters. You can run the dhcpv6 interface-id format command to configure the format of the Interface-ID inserted into DHCPv6 packets.
Table 6-76 Description of the keywords supported by the user-defined format

Keyword
	

Description

duid
	

Specifies the client ID, including information such as the client MAC address.

sysname
	

Specifies the device name of the client.

portname
	

Specifies the name of the inbound interface that receives the DHCPv6 packets sent from the client to the device.

porttype
	

Specifies the type of the inbound interface that receives the DHCPv6 packets sent from the client to the device. The interface type is specified when the NAS interface is configured in certain scenarios.

iftype
	

Specifies the type of the inbound interface that receives the DHCPv6 packets sent from the client to the device. The interface type is usually GE.

mac
	

Specifies the device MAC address.

slot
	

Specifies the slot number of the DHCPv6 packet sent from the client to the device.

subslot
	

Specifies the sub-slot number of the DHCPv6 packet sent from the client to the device.

port
	

Specifies the port number of the DHCPv6 packet sent from the client to the device.

svlan
	

Specifies the outer VLAN of the DHCPv6 packet sent by the client.

cvlan
	

Specifies the inner VLAN of the DHCPv6 packet sent by the client.

length
	

Specifies the total length of the keywords following the length keyword. The length of the length keyword is excluded.

Prerequisites

DHCP has been enabled globally using the dhcp enable command.

Precautions

    The user-defined format content must be specified between the double quotation marks (""). For example, to configure the user-defined format content as mac, run the dhcpv6 interface-id format user-defined "%mac" command.

    Separators that cannot be digits must be added between the keywords in the user-defined format. Otherwise, the keywords cannot be parsed.

    The symbol % must be prefixed to the keywords in the user-defined format to differentiate them from common character strings. If a digit exists before the symbol % and keyword, the digit refers to the number of characters in the keyword.

    The self-defined content is encapsulated in ASCII format. In addition to the preceding precautions, note the following rules:
        The symbol \ is an escape character. The symbols %, \, and [] following the escape character indicate themselves. For example, \\ represents the character \.
        An ASCII character string can contain Arabic numerals, uppercase letters, lowercase letters, and the following symbols: ! @ # $ % ^ & * ( ) _ + | - = \ [ ] { } ; : ' " / . , < > `.
        By default, the length of each keyword in an ASCII character string is the actual length of the keyword.

Example

# Configure a user-defined format as the format of the Interface-ID in DHCPv6 packets and the device MAC address as the encapsulated content.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 interface-id format user-defined "%mac"

dhcpv6 interface-id insert enable
Function

The dhcpv6 interface-id insert enable command enables the function of adding the Interface-ID option in DHCPv6 packets.

The undo dhcpv6 interface-id insert enable command disables the function of adding the Interface-ID option in DHCPv6 packets.

By default, the function of adding the Interface-ID option in DHCPv6 packets is enabled.

This command is supported only on the following models: S5720I-SI, S5720-LI, S2730S-S, S5735-L-I, S5735-L1, S300, S5735-L, S5735S-L1, S5720S-LI, S500, S5735-S, S5735-S-I, S5735S-H, S5736-S, S5731-H, S5731S-H, S5731-S, S5731S-S, S6735-SS5732-H, S6730-H, S6730S-H, S6730-S, S6730S-S, S6720S-S.
Format

dhcpv6 interface-id insert enable

undo dhcpv6 interface-id insert enable
Parameters

None
Views

Ethernet interface view, GE interface view, XGE interface view, 25GE interface view, MultiGE interface view, 40GE interface view, 100GE interface view, Eth-Trunk interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The Interface-ID option records user access information such as the inbound interface of the DHCPv6 Request packets sent from the clients to the device. The user access information can be used by the DHCPv6 server to assign IPv6 addresses and network parameters. When the device functions as a DHCPv6 relay agent or lightweight DHCPv6 relay agent (LDRA), and the device receives the Request packets sent from the DHCPv6 clients and forwards the packets to the DHCPv6 server, the device adds the Interface-ID option in the packets to identify location information of the DHCPv6 clients by default. If the DHCPv6 server interconnected to the device does not support the Interface-ID option, you can run the undo dhcpv6 interface-id insert enable command to configure the device not to add the Interface-ID option in DHCPv6 packets to flexibly control option information obtained by the DHCPv6 server.

Prerequisites

DHCP has been enabled globally using the dhcp enable command.
Example

# Enable the function of adding the Interface-ID option in DHCPv6 packets on the interface GE0/0/1.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 interface-id insert enable

dhcpv6 packet-rate

Function

The dhcpv6 packet-rate command enables rate limit of DHCPv6 messages and sets the rate threshold for DHCPv6 messages.

The undo dhcpv6 packet-rate command disables rate limit of DHCPv6 messages and deletes the rate threshold for DHCPv6 messages.

By default, rate limit of DHCPv6 messages is disabled.
Format

dhcpv6 packet-rate packet-rate

undo dhcpv6 packet-rate
Parameters

Parameter
	

Description
	

Value

packet-rate
	

Specifies the rate threshold for DHCPv6 messages.
	

The value is an integer that ranges from 0 to 400, in pps.

If the value is 0, rate limit of DHCPv6 messages is disabled.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

To prevent clients from sending a large number of messages to attack the device, the device limits the rate of DHCPv6 messages. After the DHCPv6 packet rate limit is enabled and the rate threshold is configured using the dhcpv6 packet-rate command, the DHCPv6 packets are discarded when the packet rate exceeds the rate threshold.

Prerequisites

DHCP functions have been enabled globally using the dhcp enable command.

Precautions

When the value of packet-rate is greater than 200, you need to run the car packet-type dhcpv6-reply cir cir-value command to increase the maximum rate of DHCPv6 Reply messages.
Example

# Enable rate limit of DHCPv6 messages and set the rate threshold for DHCPv6 messages to 200 pps.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 packet-rate 200

dhcpv6 packet-rate drop-alarm enable

Function

The dhcpv6 packet-rate drop-alarm enable command enables the alarm function for discarding DHCPv6 messages when the rate of DHCPv6 messages exceeds the limit.

The undo dhcpv6 packet-rate drop-alarm enable command disables the alarm function for discarding DHCPv6 messages when the rate of DHCPv6 messages exceeds the limit.

By default, the alarm function for discarding DHCPv6 messages is disabled when the rate of DHCPv6 messages exceeds the limit.
Format

dhcpv6 packet-rate drop-alarm enable

undo dhcpv6 packet-rate drop-alarm enable
Parameters

None
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

After the alarm function of DHCPv6 messages discarded is enabled using the dhcpv6 packet-rate drop-alarm enable command, the device records alarm information when the number of DHCPv6 packets that are discarded exceeds the alarm threshold. The alarm threshold can be set using the dhcpv6 packet-rate drop-alarm threshold command.

Prerequisites

    DHCP functions have been enabled globally using the dhcp enable command.

    The DHCPv6 packet rate limit has been enabled using the dhcpv6 packet-rate command.

Example

# Enable the alarm function for discarding DHCPv6 messages when the rate of DHCPv6 messages exceeds rate limit.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 packet-rate 200
[HUAWEI] dhcpv6 packet-rate drop-alarm enable

dhcpv6 packet-rate drop-alarm threshold

Function

The dhcpv6 packet-rate drop-alarm threshold command sets the alarm threshold for the number of DHCPv6 messages discarded when the rate of DHCPv6 messages exceeds the rate limit.

The undo dhcpv6 packet-rate drop-alarm threshold command restores the default alarm threshold of the number of DHCPv6 messages discarded.

By default, the alarm threshold is 100 packets when the alarm function of DHCPv6 messages discarded is enabled.
Format

dhcpv6 packet-rate drop-alarm threshold threshold

undo dhcpv6 packet-rate drop-alarm threshold
Parameters

Parameter
	

Description
	

Value

threshold
	

Specifies the alarm threshold for the number of DHCPv6 messages discarded when the rate of DHCPv6 messages exceeds the rate limit.
	

The value is an integer that ranges from 1 to 1000.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

After the alarm function of DHCPv6 messages discarded is enabled using the dhcpv6 packet-rate drop-alarm enable command, the device records alarm information when the number of DHCPv6 packets that are discarded exceeds the alarm threshold.

Prerequisites

    The DHCP function has been enabled globally using the dhcp enable command.

    The DHCPv6 packet rate limit has been enabled using the dhcpv6 packet-rate packet-rate command.

    The alarm function for discarding DHCPv6 messages when the rate of DHCPv6 messages exceeds the limit has been enabled using the dhcpv6 packet-rate drop-alarm enable command.

Example

# Configure the device to generate an alarm when the number of DHCPv6 messages discarded exceeds 150 packets.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 packet-rate 200
[HUAWEI] dhcpv6 packet-rate drop-alarm enable
[HUAWEI] dhcpv6 packet-rate drop-alarm threshold 150

dhcpv6 pool
Function

The dhcpv6 pool command creates an IPv6/IPv6 PD address pool or displays the IPv6/IPv6 PD address pool view.

The undo dhcpv6 pool command deletes the created IPv6/IPv6 PD address pool.

By default, no IPv6/IPv6 PD address pool is created.
Format

dhcpv6 pool pool-name

undo dhcpv6 pool pool-name
Parameters

Parameter
	

Description
	

Value

pool-name
	

Specifies the name of an IPv6/IPv6 PD address pool.
	

The value is a string of 1 to 31 case-sensitive characters without spaces. The value contains digits, letters, underscores (_), and dots (.).
Views

System view
Default Level

2: Configuration level
Usage Guidelines

The dhcpv6 pool command is used on DHCPv6/DHCPv6 PD servers. When configuring the DHCPv6/DHCPv6 PD server, run the dhcpv6 pool command to create an IPv6/IPv6 PD address pool for the DHCPv6/DHCPv6 PD server to assign IPv6 addresses or prefixes to DHCPv6/DHCPv6 PD clients.
Example

# Create an IPv6 address pool DHCPv6POOL.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool DHCPv6POOL

dhcpv6 relay advertise prefix-delegation route
Function

The dhcpv6 relay advertise prefix-delegation route command enables a DHCPv6 relay agent to forward routing information of DHCPv6 prefix delegation (DHCPv6 PD) terminals.

The undo dhcpv6 relay advertise prefix-delegation route command disables a DHCPv6 relay agent from forwarding routing information of DHCPv6 PD terminals.

By default, a DHCPv6 relay agent does not forward routing information of DHCPv6 PD terminals.
Format

dhcpv6 relay advertise prefix-delegation route

undo dhcpv6 relay advertise prefix-delegation route
Parameters

None
Views

VLANIF interface view, VBDIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dhcpv6 relay advertise prefix-delegation route command is used on DHCPv6 relay agents. DHCPv6 PD terminals cannot advertise IPv6 routes. This command enables a DHCPv6 relay agent to add routes of DHCPv6 PD terminals to the routing table when DHCPv6 PD terminals apply for IP addresses from the DHCPv6 server through the DHCPv6 relay agent. The DHCPv6 relay agent then forwards the routing information to the DHCPv6 server.

Prerequisites

The DHCPv6 relay function has been enabled on the interface using the dhcpv6 relay { destination ipv6-address | interface interface-type interface-number } or dhcpv6 relay server-select group-name command.

Precautions

This command takes effect only for the first-hop DHCPv6 relay agent connected to DHCPv6 PD terminals.
Example

# Enable VLANIF10 to forward routing information of DHCPv6 PD terminals.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface vlanif 10
[HUAWEI-Vlanif10] ipv6 enable
[HUAWEI-Vlanif10] dhcpv6 relay destination FC00::1:3
[HUAWEI-Vlanif10] dhcpv6 relay advertise prefix-delegation route

dhcpv6 relay prefix-delegation route
Function

The dhcpv6 relay prefix-delegation route command saves routing information forwarded by a relay agent into a specified file.

The undo dhcpv6 relay prefix-delegation route command cancels the configuration.

By default, routing information forwarded by a relay agent into a specified file is not saved.
Format

dhcpv6 relay prefix-delegation route autosave file-name

undo dhcpv6 relay prefix-delegation route autosave
Parameters

Parameter
	

Description
	

Value

autosave
	

Backs up routing information learned from DHCPv6 PD terminals to the flash memory.
	

-

file-name
	

Specifies the path and file name of the file where routing information of DHCPv6 PD terminals is to be saved, for example, flash:/*.pdr.
	

The value is a string of 1 to 51 case-insensitive characters and is a combination of digits, letters, and characters. It cannot contain spaces.
NOTE:

The file name cannot contain any less than sign (<), greater than sign (>), question mark (?), asterisk (*), comma (,), back quote (`), slash (/), backslash (\), single quotation mark ('), colon (:), or double quotation mark ("), and the left square bracket ([) and right square bracket (]) cannot exist in pairs.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dhcpv6 relay prefix-delegation route command is used on DHCPv6 relay agents. This command saves routing information forwarded by a relay agent into a specified file.

After this command is run, the system immediately saves routing information, and then saves routing information again every two hours. The interval at which the system saves routing information cannot be set.

Prerequisites

The DHCP function has been enabled using the dhcp enable command in the system view.
Example

# Save routing information forwarded by a relay agent into a specified file.

<HUAWEI> system-view
[HUAWEI] dhcpv6 relay prefix-delegation route autosave flash:/dhcpv6-pd.pdr
Info: The operation may take a few seconds, Please wait for a moment.done.

dhcpv6 relay destination

Function

The dhcpv6 relay destination command enables the DHCPv6 relay function on interfaces and configures the IPv6 address of the DHCPv6 server or next-hop relay agent.

The undo dhcpv6 relay destination command disables the DHCPv6 relay function on an interface.

By default, the DHCPv6 relay function is disabled on an interface.
Format

dhcpv6 relay { destination ipv6-address | interface interface-type interface-number }

undo dhcpv6 relay { destination ipv6-address | interface interface-type interface-number }
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the destination address of relay messages, which can be the IPv6 address of the DHCPv6 server or next hop relay agent.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.

interface interface-type interface-number
	

Specifies the type and number of the outbound interface of relay messages. The specified interface can only be a Layer 2 interface.
	

-
Views

VLANIF interface view, VBDIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When a client applies to a DHCPv6 server on a different network segment for an IPv6 address, you need to deploy a relay agent between the client and the DHCPv6 server. In this manner, the relay agent transmits DHCPv6 messages exchanged between the client and the DHCPv6 server.

You can run the dhcpv6 relay destination ipv6-address command to enable the DHCPv6 relay function on an interface.

When the client and the server are in the same VLAN, you can run the dhcpv6 relay interface interface-type interface-number command to specify the outbound interface of relay messages.

Prerequisites

The DHCP function has been enabled using the dhcp enable command in the system view.
Precautions

    When you run the dhcpv6 relay interface interface-type interface-number command in the VLANIF interface view to specify the outbound interface of relay messages, the specified interface can only be a Layer 2 interface. If the specified outbound interface is not in the VLAN corresponding to the VLANIF interface, add the interface to the VLAN.
    When both the dhcpv6 relay destination ipv6-address and dhcpv6 relay interface interface-type interface-number commands are configured, relay messages are preferentially sent to the configured IPv6 address based on routes.

Example

# Enable the DHCPv6 relay function on VLANIF100 and set the destination address of relay messages to fc00:1::1.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] dhcpv6 relay destination fc00:1::1 

# Enable the DHCPv6 relay function on GE0/0/1 and set the destination address of relay messages to fc00:1::1.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 relay destination fc00:1::1 

dhcpv6 relay server-select
Function

The dhcpv6 relay server-select command configures a DHCPv6 server group for a DHCPv6 relay agent.

The undo dhcpv6 relay server-select command deletes a DHCPv6 server group for a DHCPv6 relay agent.

By default, no DHCPv6 server group is configured.
Format

dhcpv6 relay server-select group-name

undo dhcpv6 relay server-select
Parameters

Parameter
	

Description
	

Value

group-name
	

Specifies the name of a DHCPv6 server group.
	

The value is a string of 1 to 32 case-sensitive characters without spaces.
Views

VLANIF interface view, VBDIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Use Scenario

The dhcpv6 relay server-select command is used on DHCPv6 relay agents. When a DHCPv6 client sends DHCPv6 Request packets to a DHCPv6 server through a DHCPv6 relay agent, you can run the dhcp relay server-select command to specify a DHCPv6 server group for the DHCPv6 relay agent and configure the IPv6 address of the DHCPv6 server.

Prerequisites

    The DHCP function has been enabled using the dhcp enable command in the system view.

    A DHCPv6 server group has been created using the dhcpv6 server group command.

    The IPv6 function has been enabled using the ipv6 enable command in the interface view.

Precautions

    Each DHCPv6 server group can be bound to multiple interfaces, but each interface can only be bound to one DHCPv6 server group.
    IP addresses of servers in a DHCPv6 server group cannot be on the same network segment with IP addresses of interfaces on the DHCPv6 relay agent.
    If you run the dhcpv6 relay server-select command multiple times in the same interface view, only the latest configuration takes effect.

Example

# Configure the DHCPv6 server group named group 1 for the DHCPv6 relay agent on VLANIF100.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 server group group1
[HUAWEI-dhcpv6-server-group-group1] dhcpv6-server fc00:1::1
[HUAWEI-dhcpv6-server-group-group1] quit
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] dhcpv6 relay server-select group1

# Configure the DHCPv6 server group named group 1 for the DHCPv6 relay agent on GE0/0/1.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 server group group1
[HUAWEI-dhcpv6-server-group-group1] dhcpv6-server fc00:1::1
[HUAWEI-dhcpv6-server-group-group1] quit
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 relay server-select group1

dhcpv6 relay source-interface
Function

The dhcpv6 relay source-interface command configures the IPv6 address of an interface as the source IPv6 address of packets.

The undo dhcpv6 relay source-interface command restores the default setting.

By default, the IPv6 address of an interface is not configured as the source IPv6 address of packets.
Format

dhcpv6 relay source-interface interface-type interface-number

undo dhcpv6 relay source-interface
Parameters

Parameter
	

Description
	

Value

interface-type interface-number
	
Specifies the interface type and number.

    interface-type: specifies the interface type. Currently, only loopback interfaces are supported.
    interface-number: specifies the interface number.

	

-
Views

System view, VBDIF interface view, VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, 25GE interface view, MultiGE interface view, MultiGE sub-interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When forwarding packets from a DHCPv6 client, a DHCPv6 relay agent uses the IPv6 address of the packet inbound interface as the source IPv6 address of the packets. Therefore, you need to configure an IPv6 address for each interface on the DHCPv6 relay agent. As a result, the configuration is complex and IPv6 addresses may be wasted. You can run the dhcpv6 relay source-interface interface-type interface-number command on the DHCPv6 relay agent to specify the IPv6 address of the loopback interface as the source IPv6 address of the DHCPv6 relayed packets, simplifying the configuration and saving IPv6 addresses.

In addition, VBDIF interfaces functioning as gateways on distributed gateway devices use the same IPv6 address. If Layer 3 VXLAN gateways are distributed gateways and the IPv6 address is used to communicate with the server, the response packets from the server are forwarded to the incorrect distributed gateways (devices that do not send DHCPv6 request packets). To resolve this issue, you need to run the dhcpv6 relay source-interface interface-type interface-number command on each distributed gateway to specify the IPv6 address of the loopback interface as the source IPv6 address of the DHCPv6 relayed packets for ensuring that response packets from the server can be forwarded to the correct distributed gateways.

Prerequisites

Before you run this command in the system view, the first four conditions must be met. Before you run this command in the interface view, all the following conditions must be met.

    The device has been enabled to forward IPv6 unicast packets using the ipv6 command.

    A loopback interface has been created using the interface loopback loopback-number command.

    An IPv6 address has been configured for the loopback interface using the ipv6 address command.

    DHCP has been enabled globally using the dhcp enable command.

    In the interface view:

        The IPv6 function has been enabled on the interface using the ipv6 enable command.

        The DHCPv6 relay function has been enabled on the interface using the dhcpv6 relay { destination ipv6-address | interface interface-type interface-number } or dhcpv6 relay server-select group-name command.

Precautions

If an IPv6 address is configured for the inbound interface that receives packets from DHCPv6 clients, the IPv6 address is used as the source IPv6 address of packets.

This command takes effect on all interfaces of the device if it is configured in the system view, and takes effect only on an interface if it is configured in the interface view. If this command is configured in both the interface view and system view, the configuration in the interface view takes effect.

If the DHCPv6 relay agent connects to the DHCPv6 server over a VPN network, you need to run the ip binding vpn-instance command to bind the loopback interface specified in the dhcpv6 relay source-interface command to the corresponding VPN instance.
Example

# In the system view, configure the IPv6 address of a loopback interface as the source IPv6 address of packets.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] interface loopback 5
[HUAWEI-LoopBack5] ipv6 enable
[HUAWEI-LoopBack5] ipv6 address fc01:1::1/128
[HUAWEI-LoopBack5] quit
[HUAWEI] dhcp enable
[HUAWEI] dhcpv6 relay source-interface loopback 5

# On VLANIF100, configure the IPv6 address of a loopback interface as the source IPv6 address of packets.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] interface loopback 5
[HUAWEI-LoopBack5] ipv6 enable
[HUAWEI-LoopBack5] ipv6 address fc01:1::1/128
[HUAWEI-LoopBack5] quit
[HUAWEI] dhcp enable
[HUAWEI] interface Vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] dhcpv6 relay destination fc00:1::1
[HUAWEI-Vlanif100] dhcpv6 relay source-interface loopback 5

# On GE0/0/1, configure the IPv6 address of a loopback interface as the source IPv6 address of packets.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] interface loopback 5
[HUAWEI-LoopBack5] ipv6 enable
[HUAWEI-LoopBack5] ipv6 address fc01:1::1/128
[HUAWEI-LoopBack5] quit
[HUAWEI] dhcp enable
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 relay destination fc00:1::1
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 relay source-interface loopback 5

dhcpv6 relay option79 insert enable

Function

The dhcpv6 relay option79 insert enable command inserts the Option79 field into DHCPv6 messages.

The undo dhcpv6 relay option79 insert enable command restores the default setting.

By default, the Option79 field is not inserted into DHCPv6 messages.
Format

dhcpv6 relay option79 insert enable

undo dhcpv6 relay option79 insert enable
Parameters

None
Views

System view, VBDIF interface view, VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Application Scenario

The MAC address is used to identify the DHCPv4 client on the IPv4 network and the DUID is used to identify the DHCPv6 client on the IPv6 network. In an IPv4 and IPv6 dual-stack service deployment scenario, the administrator wants to establish connections between clients' MAC addresses and IPv4 or IPv6 addresses obtained by the clients and perform unified management over dual-stack clients based on the MAC address. However, the MAC address of the DHCPv6 client cannot be identified using the DUID currently.

As defined in RFC, a DHCPv6 relay agent can fill the link address and link type of a client into the Option79 field. When a device functions as a DHCPv6 relay agent, you can run the dhcpv6 relay option79 insert enable command to insert the Option79 field into DHCPv6 messages for enabling the DHCPv6 server to obtain the clients' MAC addresses. When this command is run and the DHCPv6 relay agent receives a Request message from a client, it inserts the Option79 field into the Request message and forwards the message to the DHCPv6 server. The DHCPv6 server then obtains the MAC address of the client by parsing the Option79 field.

Prerequisites

    Before the dhcpv6 relay option79 insert enable command is configured, DHCP has been globally enabled using the dhcp enable command in the system view and IPv6 has been globally enabled using the ipv6 command.
    Before the dhcpv6 relay option79 insert enable command is configured in the interface view, the DHCPv6 relay function has been enabled in the interface view.

Precautions

    Only the first-hop DHCPv6 relay agent supports this function.
    This function takes effect for all interfaces if it is configured in the system view, and takes effect for a specified interface if it is configured in the view of the interface. If this command is configured in both the interface view and system view, the configuration in the interface view takes effect.

Example

# Insert the Option79 option into DHCPv6 messages in the system view.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] dhcpv6 relay option79 insert enable

# Insert the Option79 field into DHCPv6 messages in the interface view.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] dhcpv6 relay destination fc00:1::1
[HUAWEI-Vlanif100] dhcpv6 relay option79 insert enable

dhcpv6 remote-id format

Function

The dhcpv6 remote-id format command sets the format of the Remote-ID in DHCPv6 messages.

The undo dhcpv6 remote-id format command restores the default format of the Remote-ID in DHCPv6 messages.

By default, the default format of the Remote-ID in DHCPv6 messages is used.
Format

dhcpv6 remote-id format { default | user-defined text }

undo dhcpv6 remote-id format
Parameters

Parameter
	

Description
	

Value

default
	

Indicates to adopt the default format of the remote ID. The default format of the remote ID is %duid %portname:%04svlan.%04cvlan, where the values of the outer VLAN ID and inner VLAN ID are integers and composed of four characters. If the length is shorter than four characters, 0s are prefixed to the value. For example, if the outer VLAN value in the DHCPv6 packets received by the device is 11, the inner VLAN value is 22, the inbound interface is GE0/0/1, and the client DUID is 0003000180FB063545B3, the Remote-ID option generated during the system parsing process is 0003000180FB063545B3 GigabitEthernet 0/0/1:0011.0022.
	

-

user-defined text
	
Specifies a user-defined format as the Remote-ID format. A user-defined format can be:

    Format defined by keywords: The Remote-ID is defined based on the keywords supported by the user-defined format. For example, if the name of the device to which the users are connected and the outer VLAN to which the users belong need to be recorded, the user-defined format can be %sysname %svlan. If the device name is HUAWEI and the S-VLAN is 100, the user location information recorded by the Remote-ID is HUAWEI 100.

    For description of the keywords supported by the user-defined format, see Table 6-77.

    Format defined by common character strings: The Remote-ID is directly defined as a character string. For example, if all users on an interface are located in the office building named N8, the Remote-ID can be directly defined as N8.

    Mixed format: The Remote-ID is defined by both the keywords and common character strings. For example, the Remote-ID can be defined as %sysname N8.

	

The value is a string of 3 to 247 case-sensitive characters with spaces.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Use Scenario

The Remote-ID records user access information such as the DUID of the DHCPv6 packets sent from the clients to the device. The device functions as a DHCPv6 relay or lightweight DHCPv6 relay agent (LDRA). When receiving the request packets sent from the DHCPv6 clients and forwarding the packets to the DHCPv6 server, the device can insert the Remote-ID to the packets to identify the DHCPv6 client location information. The location information can be used by the DHCPv6 server to assign IPv6 addresses and network parameters. You can run the dhcpv6 remote-id format command to configure the format of the Remote-ID inserted into DHCPv6 packets.
Table 6-77 Description of the keywords supported by the user-defined format

Keyword
	

Description

duid
	

Specifies the client ID, including information such as the client MAC address.

sysname
	

Specifies the device name of the client.

portname
	

Specifies the name of the inbound interface that receives the DHCPv6 packets sent from the client to the device.

porttype
	

Specifies the type of the inbound interface that receives the DHCPv6 packets sent from the client to the device. The interface type is specified when the NAS interface is configured in certain scenarios.

iftype
	

Specifies the type of the inbound interface that receives the DHCPv6 packets sent from the client to the device. The interface type is usually GE.

mac
	

Specifies the device MAC address.

slot
	

Specifies the slot number of the DHCPv6 packet sent from the client to the device.

subslot
	

Specifies the sub-slot number of the DHCPv6 packet sent from the client to the device.

port
	

Specifies the port number of the DHCPv6 packet sent from the client to the device.

svlan
	

Specifies the outer VLAN of the DHCPv6 packet sent by the client.

cvlan
	

Specifies the inner VLAN of the DHCPv6 packet sent by the client.

length
	

Specifies the total length of the keywords following the length keyword. The length of the length keyword is excluded.

Prerequisites

The DHCP function has been enabled using the dhcp enable command in the system view.

Follow-up Procedure

When the device functions as a DHCPv6 relay, you must run the dhcpv6 remote-id insert enable or dhcpv6 remote-id rebuild enable command to enable the function of inserting the Remote-ID into DHCPv6 relay packets after running the dhcpv6 remote-id format command to configure the Remote-ID format in DHCPv6 packets.

When the device functions as an LDRA, the Remote-ID is inserted into DHCPv6 relay packets by default and the function does not need to be enabled.

Precautions

    The user-defined format content must be specified between the double quotation marks (""). For example, to configure the user-defined format content as mac, run the dhcpv6 interface-id format user-defined "%mac" command.

    Separators that cannot be digits must be added between the keywords in the user-defined format. Otherwise, the keywords cannot be parsed.

    The symbol % must be prefixed to the keywords in the user-defined format to differentiate them from common character strings. If a digit exists before the symbol % and keyword, the digit refers to the number of characters in the keyword.

    The self-defined content is encapsulated in ASCII format. In addition to the preceding precautions, note the following rules:
        The symbol \ is an escape character. The symbols %, \, and [] following the escape character indicate themselves. For example, \\ represents the character \.
        An ASCII character string can contain Arabic numerals, uppercase letters, lowercase letters, and the following symbols: ! @ # $ % ^ & * ( ) _ + | - = \ [ ] { } ; : ' " / . , < > `.
        By default, the length of each keyword in an ASCII character string is the actual length of the keyword.

Example

# Set the customized format for the remote ID carried in DHCPv6 messages and encapsulate the MAC address of the device into the remote ID.

<HUAWEI> system-view
[HUAWEI] dhcpv6 remote-id format user-defined "%mac"

dhcpv6 remote-id insert enable

Function

Using the dhcpv6 remote-id insert enable command, you can enable the function of appending the remote ID to DHCPv6 relay messages.

Using the undo dhcpv6 remote-id insert enable command, you can disable the function of appending the remote ID to DHCPv6 relay messages.

By default, the function of appending the remote ID to DHCPv6 relay messages is disabled.
Format

dhcpv6 remote-id insert enable

undo dhcpv6 remote-id insert enable
Parameters

None
Views

Ethernet interface view, GE interface view, XGE interface view, 25GE interface view, MultiGE interface view, 40GE interface view, 100GE interface view, Eth-Trunk interface view
Default Level

2: Configuration level
Usage Guidelines

Use Scenario

The remote ID carries information about a client and identifies a client. The DHCPv6 server can make decisions about address allocation, parameter setting, and prefix agent according to the remote ID. The remote ID is defined by the vendor. Usually, the remote ID carries the phone number of the caller in dialing, user name, IP address of the peer in a point-to-point connection, and access interface.

Prerequisite

DHCP has been enabled globally using the dhcp enable command.
Example

# Enable the function of appending the remote ID to DHCPv6 relay messages on GE0/0/1.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] dhcp enable
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 remote-id insert enable

dhcpv6 remote-id rebuild enable

Function

Using the dhcpv6 remote-id rebuild enable command, you can enable the function of appending the remote ID to DHCPv6 relay messages.

Using the undo dhcpv6 remote-id rebuild enable command, you can disable the function of appending the remote ID to DHCPv6 relay messages.

By default, the function of appending the remote ID to DHCPv6 relay messages is disabled.
Format

dhcpv6 remote-id rebuild enable

undo dhcpv6 remote-id rebuild enable
Parameters

None
Views

Ethernet interface view, GE interface view, XGE interface view, 25GE interface view, MultiGE interface view, 40GE interface view, 100GE interface view, Eth-Trunk interface view
Default Level

2: Configuration level
Usage Guidelines

The remote ID carries information about a client and identifies a client. The DHCPv6 server can make decisions about address allocation, parameter setting, prefix agent according to the remote ID. The format of the remote ID is defined by the vendor. Usually, the remote ID carries the phone number and user name in a dial-up connection, or the peer IP address and access interface in a point-to-point connection.

Before running the dhcpv6 remote-id rebuild enable command, you must run the dhcp enable command to enable DHCP globally.
Example

# Enable the function of appending the remote ID to DHCPv6 relay messages on GE0/0/1.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] interface gigabitethernet0/0/1
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 remote-id rebuild enable

dhcpv6 server (system view)
Function

The dhcpv6 server command enables the DHCPv6 server or DHCPv6 PD server function in the system view.

The undo dhcpv6 server command disables the DHCPv6 server or DHCPv6 PD server function in the system view.

By default, the DHCPv6 server or DHCPv6 PD server function is disabled in the system view.
Format

dhcpv6 server { allow-hint | preference preference-value | rapid-commit | unicast } *

undo dhcpv6 server { allow-hint | preference | rapid-commit | unicast } *
Parameters

Parameter
	

Description
	

Value

allow-hint
	

Specifies the DHCPv6 server to allocate addresses, prefixes, and prefix lengths based on the DHCPv6 client requests.

If the allow-hint parameter is specified, the server preferentially allocates addresses, prefixes, and prefix lengths based on the client requests. If the address, prefix, and prefix length requested by a client are not within the address pool or have been allocated to another client, the server ignores the client request and allocates another available address, prefix, and prefix length to the client.
	

-

preference preference-value
	

Specifies the server priority in the Advertise packet sent by the device. The DHCPv6 client selects the server with the highest priority based on the server priority in the Advertise packet to assign IPv6 addresses or prefixes.
	

The value is an integer that ranges from 0 to 255.

By default, the value is 0. A larger value indicates a higher server priority.

rapid-commit
	

Indicates that the device supports fast address or prefix assignment, that is, two-message exchange.
	

-

unicast
	

Specifies unicast communication between the client and server during the address lease renewal process.
	

-
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When the device functions as a DHCPv6 or DHCPv6 PD server, the DHCPv6 or DHCPv6 PD server function can be enabled in the system view or interface view. If the DHCPv6 or DHCPv6 PD server function is enabled in the interface view, the configuration information only takes effect on the interfaces and only one IPv6 address pool can be specified on an interface.

The DHCPv6 or DHCPv6 PD server and DHCPv6 clients are in different link scopes and a DHCPv6 relay exists. If the DHCPv6 or DHCPv6 PD server function is enabled in the interface view, configuration parameters such as IPv6 addresses or prefixes are assigned only to the clients in one network segment connected to the DHCPv6 relay, because only one IPv6 address pool can be specified on an interface. If configuration parameters such as IPv6 addresses or prefixes need to be assigned to the DHCPv6 clients in multiple network segments through the DHCPv6 relay, enable the DHCPv6 or DHCPv6 PD server function in the system view.

The configuration method of enabling the DHCPv6 or DHCPv6 PD server function in the interface view is affected by the physical interface status. If the interface status is Down, the DHCPv6 or DHCPv6 PD server cannot successfully assign network configuration parameters to clients through the DHCPv6 relay. When the DHCPv6 or DHCPv6 PD server function is enabled in the system view and there are multiple reachable routes between the DHCPv6 relay and DHCPv6 or DHCPv6 PD server, configuration parameters such as IPv6 addresses can be assigned to clients through the DHCPv6 relay as long as one route between the DHCPv6 relay and DHCPv6 or DHCPv6 PD server is reachable. This improves reliability of the configuration information obtained by the clients. In addition, no configuration is required on the interface, which reduces the administrator's maintenance workload.
When functioning as a DHCPv6 or DHCPv6 PD server, the device may be configured with multiple IPv6 address pools. After receiving the DHCPv6 request packets, the DHCPv6 or DHCPv6 PD server chooses the IPv6 address pool based on the following rules:

    When the device functions as the DHCPv6 server:
        If a relay exists, the server chooses the address pool that belongs to the same link scope with the configured network prefix (using the link-address command or address prefix) based on the first link-address field that is not 0. The link-address field identifies the link scope of the DHCPv6 clients.

        When the DHCPv6 server is enabled in the system view, the DHCPv6 server cannot assign network parameters (such as IPv6 addresses, DNS, NIS, and SNTP servers) to clients if no relay exists. To enable the DHCPv6 server to assign network parameters, enable the DHCPv6 server function in the interface view.

    When the device functions as the DHCPv6 PD server:
        If a relay exists, choose the address pool in the same link scope with the configured network prefix (using the link-address command) based on the first link-address field that is not 0. The link-address field identifies the link scope of the DHCPv6 clients.
        If no relay exists, the DHCPv6 PD server function cannot be enabled in the system view and can be enabled in the interface view, using the dhcpv6 server command.

Prerequisites

    The DHCP function has been enabled globally using the dhcp enable command.

    The IPv6 function has been enabled globally using the ipv6 command.

Example

# Enable the DHCPv6 server function in the system view, and configure the server priority to 255.

<HUAWEI> system-view 
[HUAWEI] dhcp enable 
[HUAWEI] ipv6 
[HUAWEI] dhcpv6 server preference 255

dhcpv6 server (interface view)
Function

The dhcpv6 server command enables the DHCPv6 server function on an interface.

The undo dhcpv6 server command disables the DHCPv6 server function on an interface.

By default, the DHCPv6 server function on an interface is disabled.
Format

dhcpv6 server pool-name [ allow-hint | preference preference-value | rapid-commit | unicast ] *

undo dhcpv6 server
Parameters

Parameter
	

Description
	

Value

pool-name
	

Specifies the name of the DHCPv6 address pool configured on an interface.
	

The value is a string of 1 to 31 case-sensitive characters without spaces. The value can contain digits, letters, underscores (_), and periods (.).

allow-hint
	

Specifies the DHCPv6 server to allocate addresses, prefixes, and prefix lengths based on the DHCPv6 client requests.

If the allow-hint parameter is specified, the server preferentially allocates addresses, prefixes, and prefix lengths based on the client requests. If the address, prefix, and prefix length requested by a client are not within the address pool or have been allocated to another client, the server ignores the client request and allocates another available address, prefix, and prefix length to the client.
	

-

preference preference-value
	

Specifies the priority of the DHCPv6 server carried in the Advertise message sent by the DHCPv6 server. The DHCPv6 client chooses to obtain an IPv6 address or prefix from the DHCPv6 server with the highest priority based on the server priority carried in the Advertise message.
	

The value is an integer that ranges from 0 to 255.

The default value is 0. A larger value indicates a higher priority of the DHCPv6 server.

rapid-commit
	

Configures the DHCPv6 server to support fast address prefix allocation.
	

-

unicast
	

Specifies the unicast communication between the DHCPv6 client and DHCPv6 server during IPv6 address lease.
	

-
Views

VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dhcpv6 server command is used on DHCP servers. If an IPv6 address pool is referenced by an interface, the interface assigns addresses or address prefixes in the address pool to clients after receiving the DHCPv6 Request messages.

Prerequisites

    DHCP functions have been enabled globally using the dhcp enable command.

    IPv6 functions have been enabled globally using the ipv6 command.

    IPv6 functions have been enabled using the ipv6 enable command in the interface view.

Precautions

    The DHCPv6 client function, DHCPv6 relay function, and DHCPv6 server function cannot be enabled on the same interface simultaneously.
    Only one ipv6 address pool can be referenced by an interface.
    If the ipv6 address pool referenced by the interface does not exist, the DHCPv6 server function does not take effect.

Example

# Associate DHCPv6 address pool Pool1 with VLANIF100 and set the priority of pool1 to 255.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] dhcpv6 server pool1 preference 255

# Associate DHCPv6 address pool pool1 with GE0/0/1 and set the priority of Pool1 to 255.

<HUAWEI> system-view
[HUAWEI] dhcp enable
[HUAWEI] ipv6
[HUAWEI] interface gigabitethernet 0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] dhcpv6 server pool1 preference 255

dhcpv6-server (DHCPv6 server group view)
Function

The dhcpv6-server command adds a DHCPv6 server or a next-hop relay agent to a DHCPv6 server group.

The undo dhcpv6-server command deletes a DHCPv6 server or a next-hop relay agent that is configured in a DHCPv6 server group.

By default, no DHCPv6 server or next-hop relay agent is configured in a DHCPv6 server group.
Format

dhcpv6-server ipv6-address [ interface interface-type interface-number ]

undo dhcpv6-server ipv6-address [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the IPv6 address of a DHCPv6 server or a next-hop relay agent.
	

The 128-bit IPv6 address is divided into eight groups. Each group contains four hexadecimal digits. The format is X:X:X:X:X:X:X:X.

interface interface-type interface-number
	

Specifies the type and number of an outbound interface for DHCPv6 packets.

    interface-type specifies the type of an interface.
    interface-number specifies the number of an interface.

	

-
Views

DHCPv6 server group view
Default Level

2: Configuration level
Usage Guidelines

Use Scenario

The dhcpv6-server command is used on DHCPv6 relay agents. To ensure that the DHCPv6 relay agent can send DHCPv6 packets to multiple DHCPv6 servers, you can configure multiple DHCPv6 servers in a DHCPv6 server group. Multiple DHCPv6 servers can allocate IPv6 addresses and other network configuration information to DHCPv6 clients through the DHCPv6 relay agent.

A DHCPv6 client and a DHCPv6 server can have multiple DHCPv6 relay agents connected in between. A device functions as a DHCPv6 relay agent. If the device is connected to a DHCPv6 server, you need to specify the IPv6 address for the DHCPv6 server. If the device is connected to a next-hop relay agent, you need to specify the IPv6 address for the next-hop relay agent and specify the IPv6 address of the remote DHCPv6 server or the next-hop relay agent on the next-hop relay agent.

Prerequisites

    The DHCP function has been enabled using the dhcp enable command in the system view.
    A DHCPv6 server group has been created using the dhcpv6 server group command.

Precautions

If a DHCPv6 relay agent is connected to multiple DHCPv6 servers or next-hop relay agents, repeat this step. A maximum of 20 DHCPv6 servers or next-hop relay agents can be connected to the device.
Example

# Add the DHCPv6 server at fc00:1::1 to the DHCPv6 server group named dhcp-srv1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 server group dhcp-srv1
[HUAWEI-dhcpv6-server-group-dhcp-srv1] dhcpv6-server fc00:1::1

dhcpv6 server database

Function

The dhcpv6 server database command enables the device to save DHCPv6 data to storage devices.

The undo dhcpv6 server database command disables the device from saving DHCPv6 data to storage devices.

By default, the device is disabled from saving DHCPv6 data to storage devices.
Format

dhcpv6 server database url [ write-delay interval ]

undo dhcpv6 server database url
Parameters

Parameter
	

Description
	

Value

url
	

Specifies the path and name of the file that data is saved to.
	

The value is a string of 1 to 63 case-insensitive characters without spaces.

write-delay interval
	

Specifies the interval at which DHCPv6 data is saved.
	

The value is an integer ranging from 300 to 86400, in seconds. The default value is 86400 seconds.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When the device functions as a DHCPv6 or DHCPv6 PD server, run the dhcpv6 server database command to enable the device to save DHCPv6 data to storage devices. This avoids data loss caused by device faults. DHCPv6 data includes the last data recording time, address pool name, client DUID, IAID, address and prefix bound to the client DUID and IAID, conflicted address, and conflict detection time.

The device automatically saves current DHCPv6 data at the specified interval, and previous data files are overwritten. The interval can be set using the write-delay interval parameter.

Precautions

If the DHCPv6 client requests for lease renewal when the device (functioning as the DHCPv6 server) restarts, the device cannot receive the renewal request and the client fails to renew the lease.
Example

# Configure the device to save DHCP data to the path flash:/dhcpv6.tbl and set the interval for saving data to 36000s.

<HUAWEI> system-view
[HUAWEI] dhcpv6 server database flash:/dhcpv6.tbl write-delay 36000

dhcpv6 server group

Function

The dhcpv6 server group command creates a DHCPv6 server group and enters the DHCPv6 server group view, or enters the view of a DHCPv6 server group that has been created.

The undo dhcpv6 server group command deletes a created DHCPv6 server group.

By default, no DHCPv6 server group is created.
Format

dhcpv6 server group group-name

undo dhcpv6 server group group-name
Parameters

Parameter
	

Description
	

Value

group-name
	

Specifies the name of a DHCPv6 server group.
	

The value is a string of 1 to 32 case-sensitive characters without spaces. It can contain digits, letters, and special characters such as underscores (_), hyphens (-), and periods (.). It cannot be set to - or --.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Use Scenario

The dhcpv6 server group command is used on DHCPv6 relay agents. Generally, a DHCPv6 relay agent serves multiple DHCPv6 servers. You can run the dhcpv6 server group command to create a DHCPv6 server group to manage all the DHCPv6 servers that share the DHCPv6 relay agent. The DHCPv6 server group allocates IPv6 addresses and other network configuration information to users connected to the DHCPv6 relay agent.
Follow-up Procedure

    After a DHCPv6 server group is configured, run the dhcpv6-server command to add DHCPv6 servers to the DHCPv6 server group.

    When configuring IP address for DHCPv6 servers, run the dhcpv6 relay server-select command on an interface to select the DHCPv6 server group of the DHCPv6 relay agent.

Precautions

A maximum of 32 DHCPv6 server groups can be configured on the device. A maximum of 20 DHCPv6 servers can be added to a DHCPv6 server group.
Example

# Create a DHCPv6 server group named DHCPv6-srv1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 server group DHCPv6-srv1
[HUAWEI-dhcpv6-server-group-DHCPv6-srv1]

display dhcpv6 client

Function

The display dhcpv6 client command displays DHCPv6 client information.
Format

display dhcpv6 client [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Displays information about the DHCPv6 client with the specified interface type and number.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

You can run the display dhcpv6 client command on the DHCPv6 client to check the address that is applied.
Example
# Display the DHCPv6 client information.

<HUAWEI> display dhcpv6 client
Vlanif10 is in stateful DHCPv6 client mode.                         
Stateful DHCPv6 client is in BOUND state.                                                                 
Preferred server DUID   : 000300060819A6CDA894                                  
  Reachable via address : FE80::A19:A6FF:FECD:A897                              
IA NA IA ID 0x00000051 T1 43200 T2 69120                                        
  Obtained     : 2018-04-18 15:08:49                                                                                                
  Renews       : 2018-04-18 15:09:19                                                                                                
  Rebinds      : 2018-04-18 15:09:37                                                                                                
  Address      : FC00:3::2                                                        
    Lifetime valid 120 seconds, preferred 60 seconds                                                                                
    Expires at 2018-04-18 15:10:49(99 seconds left)                                                                                 
DNS server     : FC00:4::1 

Table 6-78 Description of the display dhcpv6 client command output

Item
	

Description

Vlanif10 is in stateful DHCPv6 client mode.
	

The VLANIF10 interface is in stateful DHCPv6 client mode.

Stateful DHCPv6 client is in BOUND state.
	

The DHCPv6 client is in BOUND state.

Preferred server DUID
	

DUID of a DHCPv6 server.

Reachable via address
	

Source IPv6 address from which a DHCPv6 client receives packets.

Obtained
	

Time at which the DHCPv6 client obtains an IPv6 address.

Renews
	

Time (T1) at which the DHCPv6 client updates the lease extension time.

Rebinds
	

Time (T2) at which the DHCPv6 client rebinds the lease extension time.

Address
	

IPv6 address that the DHCPv6 client obtains.

Lifetime valid 120 seconds, preferred 60 seconds
	

The valid lifetime is 120 seconds and preferred lifetime is 60 seconds.

Expires at 2018-04-18 15:10:49(99 seconds left)
	

The address used by the DHCPv6 client will expire at 2018-04-18 15:10:49, and there are 99 seconds left.

DNS server
	

IPv6 address of the DNS server that the DHCPv6 client obtains.
display dhcpv6 client prefix
Function

The display dhcpv6 client prefix command displays the IPv6 address prefix obtained by the device.
Format

display dhcpv6 client prefix [ name prefix-name ]
Parameters

Parameter
	

Description
	

Value

name prefix-name
	

Specifies the IPv6 address prefix name.
	

The value must be an existing IPv6 address prefix name.
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

Run the display dhcpv6 client prefix command to view IPv6 address prefixes on the device that functions as the DHCPv6 client.
Example
# Display information about IPv6 prefix named aaa obtained by the device.

<HUAWEI> display dhcpv6 client prefix name aaa
Prefix name       : aaa                                                      
  Prefix          : FC00:3::/64                                                   
    Life time(sec): valid 172800 preferred 86400 

Table 6-79 Description of the display dhcpv6 client prefix command output

Item
	

Description

Prefix name
	

IPv6 address prefix name.

Prefix
	

IPv6 address prefix.

Life time(sec)
	

    valid: Period during which an IPv6 address prefix is valid.

    preferred: Period during which an IPv6 address prefix is valid since its lease is renewed.

display dhcpv6 client statistics
Function

The display dhcpv6 client statistics command displays DHCPv6 message statistics on the DHCPv6 client.
Format

display dhcpv6 client statistics [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Displays DHCPv6 message statistics on a specified interface.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

When the device functions as a DHCPv6 client, you can run this command to view DHCPv6 message statistics.
Example
# Display DHCPv6 message statistics on the DHCPv6 client.

<HUAWEI> display dhcpv6 client statistics 
 Message statistics of interface Vlanif10:                          
   Message                  Received                                            
   Advertise                1                                                   
   Reply                    1                                                   
   Reconfigure              0                                                   
   Invalid                  0 
   Dropped untrusted reply  0                                                   
                                                                                
   Message                  Sent                                                
   Solicit                  1                                                   
   Request                  1                                                   
   Confirm                  0                                                   
   Renew                    0                                                   
   Rebind                   0                                                   
   Release                  0                                                   
   Decline                  0                                                   
   Information-request      0   

Table 6-80 Description of the display dhcpv6 client statistics command output

Item
	

Description

Message
	

Message type.

Received
	

Number of received messages.

Advertise
	

Number of Advertise messages received by the DHCPv6 client.

Reply
	

Number of Reply messages received by the DHCPv6 client.

Reconfigure
	

Number of Reconfigure messages received by the DHCPv6 client.

Invalid
	

Number of unknown-type messages received by the DHCPv6 client.

Dropped untrusted reply
	

When the dhcp snooping check local-reply enable command is configured on a device that functions as a DHCP client, the dhcp snooping trusted command must be configured on the interface connected to the DHCP server. Otherwise, the DHCP client discards response messages from the DHCP server.

Sent
	

Number of sent messages.

Solicit
	

Number of Solicit messages sent by the DHCPv6 client.

Request
	

Number of Request messages sent by the DHCPv6 client.

Confirm
	

Number of Confirm messages sent by the DHCPv6 client.

Renew
	

Number of Renew messages sent by the DHCPv6 client.

Rebind
	

Number of Rebind messages sent by the DHCPv6 client.

Release
	

Number of Release messages sent by the DHCPv6 client.

Decline
	

Number of Decline messages sent by the DHCPv6 client.

Information-request
	

Number of Information-request messages sent by the DHCPv6 client.
display dhcpv6 duid

Function

The display dhcpv6 duid command displays the DHCP unique identifier of a DHCPv6 device.
Format

display dhcpv6 duid
Parameters

None
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

A DUID identifies a DHCPv6 device. Each DHCPv6 server or client has a DUID. The display dhcpv6 duid command displays the DUID of a device.
Example

# Display the DUID of a DHCPv6 device.

<HUAWEI> display dhcpv6 duid
The device's DHCPv6 unique identifier: 0001000117C667C280FB063545B3  

display dhcpv6 relay configuration

Function

The display dhcpv6 relay configuration command displays configuration information about a DHCPv6 relay agent.
Format

display dhcpv6 relay configuration [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Displays configuration information about the DHCPv6 relay agent with the specified interface type and number.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

You can run this command on a DHCPv6 relay agent to check configuration information about a DHCPv6 relay agent including the source interface information and whether the Option79 field is inserted into DHCP messages.
Example
# Display configuration information about a DHCPv6 relay agent.

<HUAWEI> display dhcpv6 relay configuration
DHCPv6 relay running information: global                                                                                            
Source interface:       -                                                                                                           
Option79 insert:        enable                                                                                                      
DHCPv6 relay running information: Vlanif10                                                                                          
Source interface:       -                                                                                                           
Option79 insert:        enable

Table 6-81 Description of the display dhcpv6 relay configuration command output

Item
	

Description

DHCPv6 relay running information
	

Configuration information about a DHCPv6 relay agent, including configuration information in the global view and interface view.

Source interface
	

Specifies the interface IPv6 address as the source IPv6 address for sending messages.

To configure this item, run the dhcpv6 relay source-interface command.

Option79 insert
	
Whether to insert the Option79 field into DHCPv6 messages. The value can be:

    enable: The Option79 field is inserted into DHCPv6 messages.
    disable: The Option79 field is not inserted into DHCPv6 messages.

To configure this item, run the dhcpv6 relay option79 insert enable command.
display dhcpv6 relay prefix-delegation
Function

Using the display dhcpv6 relay prefix-delegation command, you can view DHCPv6 PD routing information forwarded by the DHCPv6 Relay.
Format

display dhcpv6 relay prefix-delegation { client [ interface interface-type interface-number ] | route [ interface interface-type interface-number ] }
Parameters

Parameter
	

Description
	

Value

client
	

Displays information about DHCPv6 PD clients.
	

-

interface interface-type interface-number
	

Specifies the type and the number of an interface.
	

-

route
	

Displays routing information learned from DHCPv6 PD clients.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

The display dhcpv6 relay prefix-delegation command is used on DHCPv6 relay agents. This command displays routing information that DHCPv6 relay agents learn from DHCPv6 PD terminals, including the destination IPv6 address, next hop address, outbound interface, and protocol type of each route. You can also use this command to view DHCPv6 PD routing information forwarded by the DHCPv6 Relay.
Example

# Display DHCPv6 PD routing information forwarded by the DHCPv6 Relay.

<HUAWEI> display dhcpv6 relay prefix-delegation route
--------------------------------------------------------------------------------
 Destination   : FC00:1::/96
 Next-hop      : FC00:2::1
 Interface     : Vlanif62
 Protocol type : Unr
 Destination   : FC00:2::/96
 Next-hop      : FC00:2::2
 Interface     : Vlanif62
 Protocol type : Unr
--------------------------------------------------------------------------------
 Total count : 1  Print count : 1

Table 6-82 Description of the display dhcpv6 relay prefix-delegation route command output

Item
	

Description

Destination
	

Destination network segment of a route.

Next-hop
	

Next hop address of a route.

Interface
	

Outbound interface of a route.

Protocol type
	

Protocol type used by a route.

Total count
	

Number of routes displayed.

Print count
	

Number of routes printed. A maximum of 512 routes can be printed.

# Display information about DHCPv6 PD terminals.

<HUAWEI> display dhcpv6 relay prefix-delegation client
--------------------------------------------------------------------------------
 DUID_EN       : 000612E978E600E04C774E5A 
 Interface     : Vlanif62        
 IPv6 address  : FC00:1::4E5A 
     IA PD     : IA ID 1, T1 600, T2 900,     
         IA Prefix: FC00:3::/96
            preferred lifetime 900 , valid lifetime 1200
            expired at 2010.02.21 15:01:54
         IA Prefix: FC00:4::/96
            preferred lifetime 900 , valid lifetime 1200
            expired at 2010.02.21 15:01:54
--------------------------------------------------------------------------------
 Total count : 1  Print count : 1

Table 6-83 Description of the display dhcpv6 relay prefix-delegation client command output

Item
	

Description

DUID_EN
	

DHCPv6 unique identifier (DUID) of a client, which is defined by the vendor.

Interface
	

Interface to which a client is connected.

IPv6 address
	

IPv6 address of a client.

IA PD
	

IPv6 prefix contained in the packet sent from a client.

Total count
	

Number of client records displayed.

Print count
	

Number of client records printed. A maximum of 512 records can be printed.
display dhcpv6 relay statistics

Function

Using the display dhcpv6 relay statistics command, you can view the statistics about DHCPv6 messages passing through the DHCPv6 relay agent.
Format

display dhcpv6 relay statistics [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Specifies the type and number of an interface.

If no interface is specified, the statistics about all the DHCPv6 messages are displayed. If the interface is specified, the statistics about DHCPv6 messages on the specified interface are displayed.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

If a device is enabled with the DHCPv6 relay function, the system takes the statistics about DHCPv6 messages passing through the DHCP relay agent. After this command is run, you can view the statistics about DHCPv6 messages passing through the DHCP relay agent.
Example

# Display the statistics about DHCPv6 messages on VLANIF 10.

<HUAWEI> display dhcpv6 relay statistics interface vlanif 10
 Interface Vlanif10 :                                                           
 MessageType              Receive          Send             Error               
 Solicit                  0                0                0                   
 Advertise                0                0                0                   
 Request                  0                0                0                   
 Confirm                  0                0                0                   
 Renew                    0                0                0                   
 Rebind                   0                0                0                   
 Reply                    0                0                0                   
 Release                  0                0                0                   
 Decline                  0                0                0                   
 Reconfigure              0                0                0                   
 Information-request      0                0                0                   
 Relay-forward            0                0                0                   
 Relay-reply              0                0                0                   
 UnknownType              0                0                0                   

Table 6-84 Description of the display dhcpv6 relay statistics command output

Item
	

Description

Interface
	

Interface enabled with related DHCPv6 functions.

MessageType
	

Type of DHCPv6 messages.

Receive
	

Number of received DHCPv6 messages.

Send
	

Number of sent DHCPv6 messages.

Error
	

Number of DHCPv6 messages that fail to be parsed.
display dhcpv6 pool
Function

The display dhcpv6 pool command displays the IPv6 address pool configurations.
Format

display dhcpv6 pool [ pool-name [ allocated { address | prefix } | binding [ duid ] | conflict address | ipv6-address | ipv6-prefix/prefix-length ] ]
Parameters

Parameter
	

Description
	

Value

pool pool-name
	

Specifies the IPv6 address pool name.
	

The value is a string of 1 to 31 characters without spaces. The value contains digits, letters, underscores (_), and dots (.).

allocated { address | prefix }
	

Specifies IPv6 addresses or IPv6 address prefixes that have been assigned.
	

-

binding [ duid ]
	

Specifies addresses that are bound to DUIDs.
	

The value is a string of 2 to 256 characters in hexadecimal notation. The length of the string is an even.

conflict address
	

Specifies the conflicted IPv6 addresses in the IPv6 address pool.
	

-

ipv6-address
	

Specifies IPv6 addresses in the IPv6 address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.

ipv6-prefix/prefix-length
	

Specifies IPv6 prefixes in the IPv6 address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X::X:X/M. The IPv6 address prefix length ranges from 1 to 128.
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

The display dhcpv6 pool command is used on DHCPv6 servers. The display dhcpv6 pool command displays information about IPv6 address pool configurations and dynamic address allocation.
Example

# Display information about the IPv6 address pool pool1.

<HUAWEI> display dhcpv6 pool pool1
DHCPv6 pool: pool1                                                              
  Address prefix: FC00:1::/64                                                   
    Lifetime valid 4294967295 seconds, preferred 4294967295 seconds             
    0 in use, 0 conflicts                                                       
  Prefix delegation: FC00:3::/60 64                                             
    Lifetime valid 172800 seconds, preferred 86400 seconds                      
    0 in use                                                                    
  Information refresh time: 10000                                               
  DNS server address: FC00:4::1                                                 
  SIP server address: FC00:3::1                                                 
  NIS server address: FC00:1::2                                                 
  NISP server address: FC00:1::2                                                
  SNTP server address: FC00:1::1                                                
  Domain name: example.com                                                       
  SIP server domain name: sip.com                                               
  NIS server domain name: nis.com                                               
  NISP server domain name: nisp.com                                             
  Vendor-specific option:                                                       
    Enterprise ID: 2011                                                         
      Suboption 10 address FC00:1::5 
  conflict-address expire-time: 61                                              
  renew-time-percent : 55                                                       
  rebind-time-percent : 85                                                      
  Active normal clients: 0                                                      
  Active pd clients: 0    Logging : Enable

Table 6-85 Description of the display dhcpv6 pool command output

Item
	

Description

DHCPv6 pool
	

Name of the IPv6 address pool.

Address prefix
	

Prefix bound to the IPv6 address pool.

You can set the prefix using the address prefix command.

Prefix delegation
	

Agent prefix bound to the IPv6 address pool.

You can set the agent prefix using the prefix-delegation command.

Information refresh time
	

Time for updating configuration parameters assigned to clients through stateless DHCPv6 address autoconfiguration.

You can set the time using the information-refresh command.

DNS server address
	

DNS server address configured for the IPv6 address pool.

You can configure the DNS server address using the dns-server command.

SIP server address
	

SIP server address configured for the IPv6 address pool.

You can configure the SIP server address using the sip-server command.

NIS server address
	

NIS server address configured for the IPv6 address pool.

You can configure the NIS server address using the nis-server command.

NISP server address
	

NISP server address configured for the IPv6 address pool.

You can configure the NISP server address using the nisp-server command.

SNTP server address
	

SNTP server address configured for the IPv6 address pool.

You can configure the SNTP server address using the sntp-server command.

Domain name
	

Domain name suffix allocated by the DHCPv6 server to the client.

You can configure the domain name suffix using the dns-domain-name command.

SIP server domain name
	

SIP domain name suffix allocated by the DHCPv6 server to the client.

You can configure the SIP domain name suffix using the sip-domain-name command.

NIS server domain name
	

NIS domain name suffix allocated by the DHCPv6 server to the client.

You can configure the NIS domain name suffix using the nis-domain-name command.

NISP server domain name
	

NISP domain name suffix allocated by the DHCPv6 server to the client.

You can configure the NISP domain name suffix using the nisp-domain-name command.

Vendor-specific option
	

Vendor-defined options.

You can configure the vendor-defined options using the vendor-specific and suboption commands.

conflict-address expire-time
	

Aging time of conflicted addresses.

You can set the aging time using the conflict-address expire-time command.

renew-time-percent
	

The percentage of the lease renewal time in the preferred lifetime.

You can set the percentage of the lease renewal time in the preferred lifetime using the renew-time-percent rebind-time-percent command.

rebind-time-percent
	

The percentage of the lease rebinding time in the preferred lifetime.

You can set the percentage of the lease rebinding time in the preferred lifetime using the renew-time-percent rebind-time-percent command.

Active normal clients
	

Number of DHCP clients.

Active pd clients
	

Number of DHCPv6 PD clients.

Logging
	
Whether the function of recording a log when the DHCPv6 or DHCPv6 PD server allocates an IPv6 address or prefix is enabled. The value can be:

    Enable: The function is enabled.
    Disable: The function is disabled.

To configure this item, run the logging command.
display dhcpv6 relay

Function

The display dhcpv6 relay command displays the configuration of the interface enabled with the DHCPv6 relay function.
Format

display dhcpv6 relay [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	
Displays the configuration of the specified interface.

    interface-type specifies the interface type.
    interface-number specifies the interface number.

	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

If no interface is specified, the configuration of all the interfaces enabled with the DHCPv6 relay function is displayed.
Example

# Display the configurations of all interfaces enabled with the DHCPv6 relay function.

<HUAWEI> display dhcpv6 relay 
Interface               Mode          Destination
-------------------------------------------------------------------------
GigabitEthernet0/0/1    Relay        FC00:4::3
Vlanif10                Relay        FC00:1::1:1
--------------------------------------------------------------------------------
 Print count : 2                    Total count : 2     

Table 6-86 Description of the display dhcpv6 relay command output

Item
	

Description

Interface
	

Interface enabled with DHCPv6 relay functions.

Mode
	

DHCPv6 function mode.

Destination
	

Destination address of DHCPv6 relay messages.

Address pointing to the DHCPv6 server, address of the next-hop DHCPv6 relay, or DHCPv6 server group.

To configure the address, run the dhcpv6 relay destination or dhcpv6 relay server-select command.

Print count
	

The number of interfaces enabled with DHCPv6 relay functions that are displayed.

Total count
	

The total number of interfaces enabled with DHCPv6 relay functions.
display dhcpv6 server
Function

The display dhcpv6 server command displays information about the DHCPv6 server function.
Format

display dhcpv6 server [ database | [ statistics ] [ interface interface-type interface-number ] ]
Parameters

Parameter
	

Description
	

Value

database
	

Displays database configurations.
	

-

statistics
	

Displays message statistics on the DHCPv6 server.
	

-

interface interface-type interface-number
	

Displays information about the DHCP server with a specified interface type and number.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

The display dhcpv6 server command is used on DHCPv6 servers. The display dhcpv6 server command displays information about the DHCPv6 server function.
Example

# Display information about the DHCPv6 server function.

<HUAWEI> display dhcpv6 server
 Interface                                DHCPv6 pool
 Vlanif10                                 pool1 

Table 6-87 Description of the display dhcpv6 server command output

Item
	

Description

Interface
	

Interface enabled with the DHCPv6 server function.

DHCPv6 pool
	

Name of the IPv6 pool that is configured on the interface.

You can configure the IPv6 pool name using the dhcpv6 server command.
display dhcpv6 server group

Function

The display dhcpv6 server group command displays the configuration of a DHCPv6 server group.
Format

display dhcpv6 server group [ group-name ]
Parameters

Parameter
	

Description
	

Value

group-name
	

Displays the configuration of a specified DHCPv6 server group.

If this parameter is not specified, the configuration of all DHCPv6 server groups is displayed.
	

The value is a string of 1 to 32 case-sensitive characters without spaces.
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

Use Scenario

The display dhcpv6 server group command is used on DHCPv6 relay agents. You can run the display dhcpv6 server group command to view the configuration of DHCPv6 server groups created on a DHCPv6 relay agent.

Prerequisites

DHCPv6 server groups have been configured on the DHCPv6 relay agent using the dhcpv6 server group command.
Example

# View the configuration of the DHCPv6 server group named group1 on the DHCPv6 relay agent.

<HUAWEI> display dhcpv6 server group group1
  DHCPv6 Group-name   : group1                                                      
    (0)   server-ip   : FC00:1::1   

# View the configuration of all the DHCPv6 server groups on the DHCPv6 relay agent.

<HUAWEI> display dhcpv6 server group
dhcpv6 server group
--------------------------------------------------------------------------------
  DHCPv6 Group-name   : g1
    (0)   server-ip   : FC00:2::1 
    (1)   server-ip   : FC00:2::2 
    (2)   server-ip   : FC00:2::3 
    (3)   server-ip   : FC00:2::4 
    (4)   server-ip   : FC00:2::5 
    (5)   server-ip   : FC00:4::1 
  DHCPv6 Group-name   : g2
    (0)   server-ip   : FC00:3::111 
    (1)   server-ip   : FC00:3::122 
    (2)   server-ip   : FC00:3::123 
    (3)   server-ip   : FC00:3::124 
    (4)   server-ip   : FC00:3::125 
    (5)   server-ip   : FC00:3::126 
    (6)   server-ip   : FC00:3::127 
  DHCPv6 Group-name   : g3
    (0)   server-ip   : FC00:3::1 
    (1)   server-ip   : FC00:3::2 
    (2)   server-ip   : FC00:3::3 
    (3)   server-ip   : FC00:3::4 
    (4)   server-ip   : FC00:3::5 
    (5)   server-ip   : FC00:3::6 
    (6)   server-ip   : FC00:3::7 
--------------------------------------------------------------------------------
 Total count : 3

Table 6-88 Description of the display dhcpv6 server group command output

Item
	

Description

DHCPv6 Group-name
	

Name of a DHCPv6 server group.

To set this parameter, run the dhcpv6 server group command.

server-ip
	

IPv6 address of a DHCPv6 server in a DHCPv6 server group.

To set this parameter, run the dhcpv6-server (DHCPv6 server group view) command.
display dhcpv6 statistics
Function

The display dhcpv6 statistics command displays DHCPv6 packet statistics.
Format

display dhcpv6 statistics [ verbose ]
Parameters

Parameter
	

Description
	

Value

verbose
	

Displays statistics about socket packet sending failures.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

The device may become faulty when running the DHCPv6 service. Some fault location methods are required for administrators or device maintenance personnel to locate faults quickly. The most convenient and effective method is to provide statistics about packets and packet loss reasons. Run the display dhcpv6 statistics command to view DHCPv6 packet statistics.
Example

# Display DHCPv6 packet statistics.

<HUAWEI> display dhcpv6 statistics
Input: total 10 packets, discarded 0 packets                                     
  Solicit                 :         10,  Advertise               :          0   
  Request                 :          0,  Confirm                 :          0   
  Renew                   :          0,  Rebind                  :          0   
  Reply                   :          0,  Release                 :          0   
  Decline                 :          0,  Reconfigure             :          0   
  Information-request     :          0,  Relay-forward           :          0   
  Relay-reply             :          0,  Leasequery              :          0   
  Leasequery-reply        :          0,                                         
                                                                                
  Max-user limit          :        831,  Add bindtable failed    :          100
Output: total 0 packets, discarded 0 packets                                    

Table 6-89 Description of the display dhcpv6 statistics command output

Item
	

Description

Input: total x packets, discarded y packets
	

Statistics about DHCPv6 packets received by the device. The number of received DHCPv6 packets is x and the number of discarded DHCPv6 packets is y.

Solicit
	

Number of SOLICIT packets received by the device.

Advertise
	

Number of ADVERTISE packets received by the device.

Request
	

Number of REQUEST packets received by the device.

Confirm
	

Number of CONFIRM packets received by the device.

Renew
	

Number of RENEW packets received by the device.

Rebind
	

Number of REBIND packets received by the device.

Reply
	

Number of REPLY packets received by the device.

Release
	

Number of RELEASE packets received by the device.

Decline
	

Number of DECLINE packets received by the device.

Reconfigure
	

Number of RECONFIGURE packets received by the device.

Information-request
	

Number of INFORMATION-REQUEST packets received by the device.

Relay-forward
	

Number of RELAY-FORW packets received by the device.

Relay-reply
	

Number of RELAY-REPL packets received by the device.

Leasequery
	

Number of LEASEQUERY packets received by the device.

Leasequery-reply
	

Number of LEASEQUERY-REPLY packets received by the device.

Max-user limit or Add bindtable failed
	
Information displayed if the DHCPv6 service is abnormal. The displayed information includes:

    Max-user limit: Total number of DHCPv6 messages discarded because the maximum number of users (configured by running the dhcp snooping max-user-number command) is exceeded.
    Add bindtable failed: Total number of DHCPv6 packets discarded because dynamic binding entries are added. New dynamic binding entries may be added if the user-side interface is Down, or IPSG is configured but ACL resources are insufficient.
    High cpu occupancy: Total number of DHCPv6 packets discarded because the CPU usage is excessively high.
    Port blocked: Total number of DHCPv6 packets discarded because the inbound interface is blocked.
    Rx buffers full: Total number of DHCPv6 packets discarded because the remaining queue length is shorter than the reserved threshold.
    L2fdb lookup failed: Total number of DHCPv6 Reply packets discarded because the DHCP snooping module fails to find user-side interfaces.
    Bad vlan id: Total number of DHCPv6 packets discarded because the interfaces receiving the DHCPv6 packets are not added to the VLANs corresponding to the VLAN tags carried in the packets or the DHCPv6 packets received on interfaces carry VLAN tags not in the range from 1 to 4094.
    Memory exhausted: Total number of DHCPv6 packets discarded because the memory is exhausted.
    L3if protocol down: Total number of DHCPv6 packets discarded because the Layer 3 protocol of the source interface goes Down.
    Rate limit: Total number of DHCPv6 packets discarded because rates of the messages exceed the limit, when the dhcpv6 packet-rate or dhcp snooping check dhcpv6-rate enable command is configured.
    Bad packet length: Total number of DHCPv6 packets discarded because the packet length is not in the range of 50 to 2048 bytes.
    Bad ip header checksum: Total number of DHCPv6 packets discarded because the checksum of the IP header is incorrect.
    Bad request: Total number of invalid DHCPv6 request packets that are discarded, when the dhcp snooping check dhcp-request enable or dhcp snooping check dhcpv6-request mac command is configured to check the validity of DHCPv6 request packets.
    Bad reply: Total number of DHCPv6 response packets discarded by untrusted interfaces configured with the dhcp snooping enable command.
    Client transferred: Total number of DHCPv6 packets discarded because the undo dhcp snooping user-transfer enable command is configured to disable interface flapping.
    Other error: Total number of DHCPv6 packets discarded due to other reasons.

Output: total x packets, discarded y packets
	

Statistics about DHCPv6 packets sent by the device. The number of sent DHCPv6 packets is x and the number of discarded DHCPv6 packets is y.
dns-domain-name

Function

The dns-domain-name command configures the DNS domain name suffix assigned by the DHCPv6 server to a DHCPv6 client.

The undo dns-domain-name command deletes the assigned domain name suffix.

By default, no DNS domain name suffix is configured for the DHCPv6 client.
Format

dns-domain-name dns-domain-name

undo dns-domain-name dns-domain-name
Parameters

Parameter
	

Description
	

Value

dns-domain-name
	

Specifies the DNS domain name suffix assigned to a DHCPv6 client.
	

The value is a string of 1 to 63 case-insensitive characters without spaces. It can be the combination of letters, digits, underscores (_), hyphens (-), or dots (.) and cannot be set to only hyphens (-) or hyphens (--).
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The dns-domain-name command is used on DHCPv6 servers. The DHCPv6 server specifies a domain name suffix when allocating IPv6 addresses for clients. You can use the dns-domain-name command on the DHCPv6 server to specify a domain name for each global address pool. When allocating IPv6 addresses to clients, the DHCPv6 server also sends the domain name suffix to the clients.

Precautions

A maximum of four different DNS domain names can be configured for an IPv6 address pool.
Example

# Configure the domain name suffix assigned to the DHCPv6 client as example.com for the address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] dns-domain-name example.com

dns-server (IPv6 address pool view)
Function

The dns-server command configures a DNS server address for the DHCPv6 address pool.

The undo dns-server command deletes the configured DNS server address.

By default, no DNS server address is configured for the IPv6 address pool.
Format

dns-server ipv6-address

undo dns-server ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

DNS server IPv6 address configured for the DHCPv6 address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

This command applies to DHCPv6 servers. Before a host accesses the Internet, a DNS server needs to resolve the accessed domain name to an IP address. The DHCPv6 server needs to specify the IPv6 address of the DNS server for the global address pool so that the DHCPv6 client can be connected to the Internet. The DHCPv6 server specifies the IPv6 address of the DNS server when allocating IPv6 addresses to the clients.

Precautions

    To specify multiple DNS servers, run the dns-server command to configure multiple DNS server addresses.
    A maximum of two DNS server addresses can be configured for each IPv6 address pool. The first assigned DNS server address is used as a primary address. The priority of the first configured DNS server is higher than that of the other DNS server.
    The IPv6 address of a DNS server cannot be configured as a link-local address.

Example

# Specify a DNS server with the IPv6 address fc00:1::1 for domain name resolution when IP addresses in the address pool global1 are assigned to clients.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] dns-server fc00:1::1

excluded-address

Function

The excluded-address command specifies the range of the IPv6 addresses that cannot be automatically assigned to clients from the IPv6 address pool.

The undo excluded-address command deletes the specified range of the IPv6 addresses that cannot be automatically assigned to clients from the address pool.

By default, all IPv6 addresses in the address pool can be automatically assigned to clients.
Format

excluded-address start-ipv6-address [ to end-ipv6-address ]

undo excluded-address start-ipv6-address [ to end-ipv6-address ]
Parameters

Parameter
	

Description
	

Value

start-ipv6-address
	

Specifies the start IPv6 address that cannot be automatically assigned.
	

The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

to end-ipv6-address
	

Specifies the end IPv6 address that cannot be automatically assigned.
	

The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

end-ipv6-address and start-ipv6-address must be on the same network segment and end-ipv6-address must be greater than start-ipv6-address. If end-ipv6-address is not specified, only the start-ipv6-address cannot be automatically assigned.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The excluded-address command is used on DHCPv6 servers. In an address pool, some IPv6 addresses need to be reserved for other services, and some IPv6 addresses are statically assigned to certain hosts (such as the DNS server and Web server) and cannot be automatically assigned to clients. You can run the excluded-address command to specify the range of the IPv6 addresses that cannot be automatically assigned to clients from the IPv6 address pool.

Prerequisites

    An address pool has been created by using the dhcpv6 pool command.
    Bind an IPv6 address prefix to an address pool by using the address prefix

Precautions

    The excluded IPv6 address or IPv6 address segment must be in the local address pool.
    The excluded IPv6 address or IPv6 address segment cannot be automatically assigned to clients from a local address pool.
    If you run the excluded-address command multiple times, you can specify multiple IPv6 addresses or IPv6 address segments that cannot be automatically assigned to clients.

Example

# Specify IPv6 addresses fc00:1::1 to fc00:1::10 not to be automatically allocated from the address pool global1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] address prefix fc00:1::/64
[HUAWEI-dhcpv6-pool-global1] excluded-address fc00:1::1 to fc00:1::10

information-refresh

Function

The information-refresh command configures the time for updating configuration parameters assigned to clients through stateless DHCPv6 address autoconfiguration.

The undo information-refresh command restores the default time for updating IPv6 address pool configurations.

By default, the time for updating IPv6 address pool configurations is 86400s (24 hours).
Format

information-refresh time

undo information-refresh
Parameters

Parameter
	

Description
	

Value

time
	

Specifies the time for updating configuration parameters assigned to clients through stateless DHCPv6 address autoconfiguration.
	

The value is an integer that ranges from 600 to 4294967295, in seconds.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

The information-refresh command is used on DHCPv6 servers. When the DHCPv6 server assigns configuration parameters such as the DNS, NIS, and SNTP server addresses to the DHCPv6 clients through stateless autoconfiguration, you can use the information-refresh command to configure the time for updating these configuration parameters.

If a Huawei device functions as a DHCPv6 client and the time configured using the information-refresh command on the DHCPv6 server is larger than three days (259200 seconds), the time for updating DHCPv6 client configuration information is three days. If the time configured using the information-refresh command on the DHCPv6 server is less than or equal to three days, the time for updating DHCPv6 client configuration information is the actually configured value.
Example

# Set the time for updating configuration parameters assigned to clients to 10000s in the address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] information-refresh 10000

ipv6 address auto dhcp
Function

The ipv6 address auto dhcp command enables an interface to obtain IPv6 addresses and other configuration parameters using stateful DHCPv6 address autoconfiguration.

The undo ipv6 address auto dhcp command disables an interface from obtaining IPv6 addresses and other configuration parameters using stateful DHCPv6 address autoconfiguration.

By default, the interface is disabled from obtaining IPv6 addresses and other configuration parameters using stateful DHCPv6 address autoconfiguration.
Format

ipv6 address auto dhcp [ hint ipv6-address ] [ rapid-commit ] [ unicast-option ]

undo ipv6 address auto dhcp
Parameters
Parameter 	Description 	Value

hint ipv6-address
	

Specifies the IPv6 address applied by a DHCPv6 client.
	

The total length is 128 bit, which is divided into eight groups. The 16 bits of each group are represented by four hexadecimal characters. The format is X:X:X:X:X:X:X:X.

rapid-commit
	

Specifies that a DHCPv6 client applies for an IPv6 address using two-message exchange.
	

-

unicast-option
	

Specifies that a DHCPv6 client applies for an IPv6 address using a unicast option.
	

-
Views

VLANIF interface view, Eth-Trunk interface view, GE interface view, XGE interface view, MultiGE interface view, MultiGE sub-interface view, 25GE interface view, 40GE interface view, 100GE interface view, Eth-Trunk sub-interface view, GE sub-interface view, XGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

After you run the ipv6 address auto dhcp [ rapid-commit ] command on the device that functions as a DHCPv6 client, the client uses stateful DHCPv6 address autoconfiguration to obtain IPv6 addresses and other configuration parameters, such as addresses of the DNS and SNTP servers, from the DHCPv6 server.

Prerequisites

    IPv6 functions have been enabled globally using the ipv6 command in the system view.
    IPv6 functions have been enabled on interfaces using the ipv6 enable command in the interface view.
    The IPv6 link-local address has been configured using the ipv6 address auto link-local or ipv6 address ipv6-address link-local command in the interface view.
    The interface has been configured to automatically learn the IPv6 default route using the ipv6 address auto global default command in the interface view.

Precautions

The DHCPv6 server assigns an IPv6 address and other configuration parameters to a DHCPv6 client using two-message exchange only when two-message exchange is configured on both the server and client. If two-message exchange is not configured on the server or client, the server assigns an IPv6 address and other configuration parameters to the client using four-message exchange. Two-message exchange applies to the scenarios with one DHCPv6 server, while four-message exchange applies to the scenarios with multiple DHCPv6 servers.
Example

# Configure the interface VLANIF100 to obtain IPv6 addresses and other configuration parameters from the DHCPv6 server using DHCPv6 stateful address autoconfiguration.

<HUAWEI> system-view
[HUAWEI] ipv6
[HUAWEI] interface vlanif 100
[HUAWEI-Vlanif100] ipv6 enable
[HUAWEI-Vlanif100] ipv6 address auto link-local
[HUAWEI-Vlanif100] ipv6 address auto dhcp

# Configure the interface GE0/0/1 to obtain IPv6 addresses and other configuration parameters from the DHCPv6 server using DHCPv6 stateful address autoconfiguration.

<HUAWEI> system-view
[HUAWEI] ipv6 
[HUAWEI] interface gigabitethernet0/0/1
[HUAWEI-GigabitEthernet0/0/1] undo portswitch
[HUAWEI-GigabitEthernet0/0/1] ipv6 enable
[HUAWEI-GigabitEthernet0/0/1] ipv6 address auto link-local
[HUAWEI-GigabitEthernet0/0/1] ipv6 address auto dhcp

link-address
Function

The link-address command configures the network prefix in the IPv6 address pool view.

The undo link-address command deletes the network prefix configured in the IPv6 address pool view.

By default, no network prefix is configured in the IPv6 address pool view.
Format

link-address ipv6-prefix/ipv6-prefix-length

undo link-address ipv6-prefix/ipv6-prefix-length
Parameters

Parameter
	

Description
	

Value

ipv6-prefix/ipv6-prefix-length
	

Specifies the network prefix and prefix length.
	

ipv6-prefix: The 128-bit IPv6 address is divided into eight groups. Each group contains four hexadecimal digits. The format is X:X:X:X:X:X:X:X.

ipv6-prefix-length: The value is an integer that ranges from 16 to 128.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The DHCPv6 client needs to apply for network configuration information (for example, the IP address of the DNS server) except for the IPv6 address from the DHCPv6 server. If the address prefix is not configured in the IPv6 address pool, you can run the link-address command to configure the network prefix in the IPv6 address pool view.
When functioning as a DHCPv6 or DHCPv6 PD server, the device may be configured with multiple IPv6 address pools. After receiving the DHCPv6 request packets, the DHCPv6 or DHCPv6 PD server chooses the IPv6 address pool based on the following rules:

    When the device functions as the DHCPv6 server:
        If a relay exists, the server chooses the address pool that belongs to the same link scope with the configured network prefix (using the link-address or address prefix command) based on the first link-address field that is not 0. The link-address field identifies the link scope of the DHCPv6 clients.

        When the DHCPv6 server is enabled in the system view, the DHCPv6 server cannot assign network parameters (such as IPv6 addresses, DNS, NIS, and SNTP servers) to clients if no relay exists. To enable the DHCPv6 server to assign network parameters, enable the DHCPv6 server function in the interface view.

    When the device functions as the DHCPv6 PD server:
        If a relay exists, choose the address pool in the same link scope with the configured network prefix (using the link-address command) based on the first link-address field that is not 0. The link-address field identifies the link scope of the DHCPv6 clients.
        If no relay exists, the DHCPv6 PD server function cannot be enabled in the system view and can be enabled in the interface view, using the dhcpv6 server command.

Prerequisites

Idle addresses or prefixes are assigned to DHCPv6 clients from the IPv6 address pool. Reserved addresses, conflicted addresses, and used addresses cannot be assigned to DHCPv6 clients. Reserved addresses include unspecified addresses, multicast addresses, loopback addresses, link-local addresses, NSAP addresses, and anycast addresses (defined in RFC 2526).
Example

# Bind the IPv6 address prefix fc00:1::/64 to the DHCPv6 server address pool named pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] link-address fc00:1::/64 

lock (IPv6 address pool view)
Function

The lock command locks the IPv6 address pool.

The undo lock command unlocks the address pool.

By default, the IPv6 address pool is unlocked.
Format

lock

undo lock
Parameters

None
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The lock command is used on DHCPv6 servers. When a DHCPv6 server needs to be migrated, you simply need to migrate address pools on the DHCPv6 server to another DHCPv6 server on the live network. To retain the addresses that have been assigned to clients from a global address pool, run the lock command to lock the global address pool. When new users get online, they apply for IPv6 addresses from a new address pool.

Precautions

After the lock command is executed, the IPv6 address pool is locked. The locked IPv6 address pool does not assign addresses or extend address lease but only release addresses.
Example

# Lock the address pool global1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] lock

logging (IPv6 address pool view)
Function

The logging command enables the function of recording a log when the DHCPv6 or DHCPv6 PD server allocates an IPv6 address or prefix in the IPv6 address pool view.

The undo logging command disables the function of recording a log when the DHCPv6 or DHCPv6 PD server allocates an IPv6 address or prefix in the IPv6 address pool view.

By default, this function is disabled.
Format

logging [ allocation-address-success | allocation-prefix-success | detect-address-conflict | release-address-success | release-prefix-success | renew-address-success | renew-prefix-success ] *

undo logging [ allocation-address-success | allocation-prefix-success | detect-address-conflict | release-address-success | release-prefix-success | renew-address-success | renew-prefix-success ] *
Parameters

If the following parameters are not specified, the function of recording related logs is enabled or disabled.
Parameter 	Description 	Value

allocation-address-success
	

Displays a log when an IPv6 address is successfully allocated.
	

-

allocation-prefix-success
	

Displays a log when an IPv6 prefix is successfully allocated.
	

-

detect-address-conflict
	

Displays a log when an IPv6 address conflict is detected.
	

-

release-address-success
	

Displays a log when an IPv6 address is released.
	

-

release-prefix-success
	

Displays a log when an IPv6 prefix is released.
	

-

renew-address-success
	

Displays a log when an IPv6 address is renewed.
	

-

renew-prefix-success
	

Displays a log when an IPv6 prefix is renewed.
	

-
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

This command is applied to the DHCPv6 or DHCPv6 PD server. After the logging command is configured, the server records a log if an IPv6 address or prefix is allocated, renewed, or released, or an IPv6 address or prefix conflict is detected, facilitating routine maintenance and fault locating.

You can run the display dhcpv6 pool command to check the status of the log recording function on the server.

Prerequisites

An IPv6 address pool has been created using the dhcpv6 pool command.

Precautions

    After the log recording function is enabled, the server may frequently record logs if a large number of clients request for IPv6 addresses or prefixes, deteriorating device performance.
    IP address allocation logs are recorded in the AM module. To view log information, the information center must be enabled. In addition, default settings for log output vary depending on various factors including the log level and output direction. For details, see Information Center Configuration in the CLI-based Configuration - Device Management Configuration Guide.

    For example, the level of logs indicating that an IP address is successfully allocated, an IP address is successfully renewed, and an IP address is successfully released is informational, and these logs are not recorded in the log buffer by default. You can run the info-center source AM channel 4 log level informational command to change the level of the logs to be recorded in the log buffer. You can then run the display logbuffer command to check the preceding logs.

Example

# Enable the function of recording a log when the server allocates an IPv6 address or prefix in the IPv6 address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] logging

nis-domain-name

Function

The nis-domain-name command configures the NIS domain name suffix assigned by the DHCPv6 server to a DHCPv6 client.

The undo nis-domain-name command deletes the NIS domain name suffix assigned to the DHCPv6 client.

By default, no NIS domain name suffix is configured for the DHCPv6 client.
Format

nis-domain-name nis-domain-name

undo nis-domain-name nis-domain-name
Parameters

Parameter
	

Description
	

Value

nis-domain-name
	

Specifies the NIS domain name suffix assigned to a DHCPv6 client.
	

The value is a string of 1 to 63 case-insensitive characters without spaces. It can be the combination of letters, digits, underscores (_), hyphens (-), or dots (.) and cannot be set to a single hyphen (-) or consecutive hyphens (--).
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The nis-domain-name command is used on DHCPv6 servers. The DHCPv6 server specifies an NIS domain name suffix when allocating IPv6 addresses for clients. You can use the nis-domain-name command on the DHCPv6 server to specify a NIS domain name suffix for each global address pool. When allocating IPv6 addresses to clients, the DHCPv6 server also sends the NIS domain name suffix to the clients.

Precautions

A maximum of four different NIS domain names can be configured for an IPv6 address pool.
Example

# Configure the NIS domain name assigned to the DHCPv6 client as nis.com for the address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] nis-domain-name nis.com

nisp-domain-name

Function

The nisp-domain-name command configures the NISP domain name suffix assigned by the DHCPv6 server to a DHCPv6 client.

The undo nisp-domain-name command deletes the assigned NISP domain name suffix.

By default, no NISP domain name suffix is configured for the DHCPv6 client.
Format

nisp-domain-name nisp-domain-name

undo nisp-domain-name nisp-domain-name
Parameters

Parameter
	

Description
	

Value

nisp-domain-name
	

Specifies the NISP domain name suffix assigned to a DHCPv6 client.
	

The value is a string of 1 to 63 case-insensitive characters without spaces. It can be the combination of letters, digits, underscores (_), hyphens (-), or dots (.) and cannot be set to only hyphens (-) or hyphens (--).
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The nisp-domain-name command is used on DHCPv6 servers. The DHCPv6 server specifies an NISP domain name suffix when allocating IPv6 addresses for clients. You can use the nisp-domain-name command on the DHCPv6 server to specify a NISP domain name for each global address pool. When allocating IPv6 addresses to clients, the DHCPv6 server also sends the domain name suffix to the clients.

Precautions

A maximum of four different NISP domain name suffixes can be configured for an IPv6 address pool.
Example

# Configure the NISP domain name assigned to the DHCPv6 client as nisp.com for the address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] nisp-domain-name nisp.com

nisp-server
Function

The nisp-server command configures the NISP server address assigned to the DHCPv6 client for the IPv6 address pool.

The undo nisp-server command deletes the configured NISP server address assigned to the DHCPv6 client from the IPv6 address pool.

By default, no NISP server address is configured for the IPv6 address pool.
Format

nisp-server ipv6-address

undo nisp-server ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Indicates the NISP server IPv6 address.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The nisp-server command is used on DHCPv6 servers. The DHCPv6 server needs to specify the IPv6 address of the NISP server for the address pool so that the DHCPv6 client can be connected to the Internet. The DHCPv6 server specifies the IPv6 address of the NISP server when allocating IPv6 addresses to the clients.

Precautions

    A maximum of two NISP server addresses can be configured for each IPv6 address pool. The first assigned address functions as the primary address, and the other address functions as a secondary address.
    When multiple NISP servers are specified, you need to run the nisp-server repeatedly to configure multiple addresses.

Example

# Specify fc00:1::2 as the IPv6 address of the NISP server when the IPv6 addresses in the address pool global1 are assigned to clients.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] nisp-server fc00:1::2

nis-server
Function

The nis-server command configures the NIS server address assigned to the DHCPv6 client for the IPv6 address pool.

The undo nis-server command deletes the configured NIS server address assigned to the DHCPv6 client from the IPv6 address pool.

By default, no NIS server address is configured for the IPv6 address pool.
Format

nis-server ipv6-address

undo nis-server ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Indicates the NIS server IPv6 address.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The nis-server command is used on DHCPv6 servers. The DHCPv6 server needs to specify the IPv6 address of the NIS server for the address pool so that the DHCPv6 client can be connected to the Internet. The DHCPv6 server specifies the IPv6 address of the NIS server when allocating IPv6 addresses to the clients.

Precautions

    A maximum of two NIS server addresses can be configured for each IPv6 address pool. The first assigned address functions as the primary address, and the other address functions as a secondary address.
    When multiple NIS servers are specified, you need to run the nis-server repeatedly to configure multiple addresses.

Example

# Specify fc00:1::2 as the IPv6 address of the NIS server when IPv6 addresses in the address pool global1 are assigned to clients.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] nis-server fc00:1::2

prefix-delegation

Function

The prefix-delegation command configures an agent prefix in the address pool view.

The undo prefix-delegation command deletes the agent prefix in the address pool view.

By default, no IPv6 address agent prefix is configured in the address pool view.
Format

prefix-delegation ipv6-prefix/ipv6-prefix-length assign-prefix-length [ life-time { valid-lifetime | infinite } { preferred-lifetime | infinite } ]

prefix-delegation ipv6-prefix/ipv6-prefix-length assign-prefix-length [ life-time preferred-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ] valid-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ] ]

prefix-delegation ipv6-prefix/ipv6-prefix-length lock

undo prefix-delegation ipv6-prefix/ipv6-prefix-length [ lock ]
Parameters

Parameter
	

Description
	

Value

ipv6-prefix/ipv6-prefix-length
	

Specifies the address prefix and the prefix length bound to an IPv6 address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X::X:X/M.

The IPv6 address prefix length ranges from 1 to 128.

assign-prefix-length
	

Specifies the default prefix length.
NOTE:

If the DHCPv6 server has been configured to allocate prefix lengths based on the DHCPv6 client requests, and the client-requested prefix length is within the range from ipv6-prefix-length to assign-prefix-length, the server allocates the prefix length based on the client request.

If the client-requested prefix length is not within the preceding range or the server is not configured to allocate prefix lengths based on the DHCPv6 client requests, the server allocates the default prefix length.

You can run the dhcpv6 server allow-hint or dhcpv6 server pool-name allow-hint command to configure the server to allocate prefix lengths based on the DHCPv6 client requests.
	

The value is an integer that ranges from 1 to 128. The assign-prefix-length must be greater than or equal to ipv6-prefix-length. The difference between the assign-prefix-length and ipv6-prefix-length must be less than or equal to 16.

life-time
	

Specifies the lifetime of the address prefix bound to an IPv6 address pool.
	

-

valid-lifetime
	

Specifies the valid lifetime.
	

The value ranges from 60 to 172799999, in seconds. The default value is 172800, that is two days.

preferred-lifetime
	

Specifies the preferred lifetime.

The preferred lifetime cannot exceed the valid lifetime.
	

The value ranges from 60 to 172799999, in seconds. The default value is 86400, that is one day.

infinite
	

Sets the lifetime to infinite.

When the preferred lifetime is set to infinite, the valid lifetime must be set to infinite.
	

-

preferred-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ]
	

Specifies the preferred lifetime of the IPv6 prefix. The time must be no less than 1 minute.
	

    days: indicates days. The value is an integer that ranges from 0 to 1999.
    hours: indicates hours. The value is an integer that ranges from 0 to 23.
    minutes: indicates minutes. The value is an integer that ranges from 0 to 59.
    seconds: indicates seconds. The value is an integer that ranges from 0 to 59.

valid-lifetime days days [ hours hours [ minutes minutes [ seconds seconds ] ] ]
	

Specifies the valid lifetime of the IPv6 prefix. The time must be no less than 1 minute and cannot be less than the preferred lifetime.
	

    days: indicates days. The value is an integer that ranges from 0 to 1999.
    hours: indicates hours. The value is an integer that ranges from 0 to 23.
    minutes: indicates minutes. The value is an integer that ranges from 0 to 59.
    seconds: indicates seconds. The value is an integer that ranges from 0 to 59.

lock
	

Locks the address prefix.
	

-
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When the device functions as a DHCPv6 PD server, run the prefix-delegation command to configure an agent prefix in the address pool view. The DHCPv6 PD client divides the obtained prefix into prefixes of subnet segments and sends an RA message on the network segment that hosts directly connect to or exchange information with hosts using the DHCPv6 protocol. The RA message contains the prefixes of subnet segments. This enables hosts to automatically configure addresses.

Precautions

    Idle addresses or prefixes are assigned to DHCPv6 clients from the IPv6 address pool. Reserved addresses, conflicted addresses, and used addresses cannot be assigned to DHCPv6 clients. Reserved addresses include unspecified addresses, multicast addresses, loopback addresses, link-local addresses, NSAP addresses, and anycast addresses (defined in RFC 2526).
    The agent prefix cannot be overlapped.
    The agent prefix cannot be overlapped with the address prefix.
    The agent prefix cannot be overlapped with the prefix statically specified by a certain user.
    When the prefix pool is deleted, all prefix leases are deleted.
    Only one agent prefix can be configured for an address pool.

Example

# Configure the agent prefix of the DHCPv6 server as fc00:1::/30 for the address pool pool1, set the prefix length to 42 and the lifetime to infinite.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1 
[HUAWEI-dhcpv6-pool-pool1] prefix-delegation fc00:1::/30 42 life-time infinite infinite

renew-time-percent rebind-time-percent
Function

The renew-time-percent rebind-time-percent command configures the percentage of the lease renewal time and the percentage of the rebinding time in the preferred lifetime of an IPv6 address pool.

The undo renew-time-percent rebind-time-percent command restores the default percentage of the lease renewal time and the default percentage of the rebinding time in the preferred lifetime of an IPv6 address pool.

By default, the percentage of the lease renewal time in the preferred lifetime of an IPv6 address pool is 50%, and the percentage of the rebinding time is 80%.
Format

renew-time-percent renew-time-percent rebind-time-percent rebind-time-percent

undo renew-time-percent rebind-time-percent
Parameters

Parameter
	

Description
	

Value

renew-time-percent
	

Specifies the percentage of the lease renewal time in the preferred lifetime of an IPv6 address pool.
	

The value is an integer that ranges from 10 to 89. The default value is 50.

rebind-time-percent
	

Specifies the percentage of the rebinding time in the preferred lifetime of an IPv6 address pool.

The value of rebind-time-percent must be greater than that of renew-time-percent, and the difference between the values must be greater than or equal to 10.
	

The value is an integer that ranges from 20 to 99. The default value is 80.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

You can run this command to change the lease renewal time and rebinding time in an IPv6 address pool.

When planning the lease renewal time and rebinding time, you can run the address prefix and renew-time-percent rebind-time-percent commands to configure the preferred lifetime and the percentage of the lease renewal time and the percentage of the rebinding time in the preferred lifetime respectively. If the lease renewal time and rebinding time are too short, the lease and renewal time (T1 and T2) of IPv6 addresses allocated to DHCPv6 clients by the DHCPv6 server are too short. As a result, DHCPv6 clients send lease renewal packets frequently. It is recommended that you set the lease renewal time and rebinding time based on the actual usage scenario.
Example

# Configure the percentage of the lease renewal time and the percentage of the rebinding time in the preferred lifetime of the IPv6 address pool test.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool test
[HUAWEI-dhcpv6-pool-test] renew-time-percent 55 rebind-time-percent 85

reset dhcpv6 client statistics
Function

The reset dhcpv6 client statistics command clears DHCPv6 message statistics on the DHCPv6 client.
Format

reset dhcpv6 client statistics [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Clears DHCPv6 message statistics on a specified interface.

If no interface is specified, all message statistics on the DHCPv6 client are cleared.
	

-
Views

User view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

This command applies to the DHCPv6 client. Collecting statistics about the DHCPv6 messages sent and received within a specified period helps you locate DHCPv6 faults. Before collecting new statistics, run the reset dhcpv6 client statistics [ interface interface-type interface-number ] command to clear the existing message statistics. After clearing existing statistics, run the display dhcpv6 client statistics [ interface interface-type interface-number ] command to view latest message statistics.
Example

# Clear message statistics on the DHCPv6 client.

<HUAWEI> reset dhcpv6 client statistics

reset dhcpv6 pool
Function

The reset dhcpv6 pool command clears the IPv6 address pool configured on the device.
Format

reset dhcpv6 pool pool-name [ allocated { address | prefix } | binding [ duid ] | conflict address | ipv6-address [ to ipv6-address ] | ipv6-prefix/prefix-length ]
Parameters

Parameter
	

Description
	

Value

pool pool-name
	

Specifies the IPv6 address pool name.
	

The value is a string of 1 to 31 characters without spaces. The value contains digits, letters, underscores (_), and dots (.).

allocated { address | prefix }
	

Deletes IPv6 addresses or IPv6 address prefixes that have been assigned.
	

-

binding [ duid ]
	

Deletes addresses that are bound to DUIDs.
	

The value is a string of 2 to 256 characters in hexadecimal notation. The length of the string is an even.

conflict address
	

Resets the conflicted IPv6 addresses in the IPv6 address pool.
	

-

ipv6-address [ to ipv6-address ]
	

Resets IPv6 addresses in the IPv6 address pool. If only one IPv6 address is entered, only the entered IPv6 address is reset.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.

ipv6-prefix/prefix-length
	

Resets IPv6 prefixes in the IPv6 address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X::X:X/M.

The IPv6 address prefix length ranges from 16 to 128
Views

User view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

The reset dhcpv6 pool command resets the address pool status. If an IPv6 address conflict occurs because two clients use the same IPv6 address, you need to set the IPv6 address pool to idle.

Precautions

If a user's IPv6 address is within the IPv6 address range specified when this command is run, the user cannot continue to use the IPv6 address after this command is run, and needs to send an IPv6 address application request again.

The address pool status cannot be restored after this command is run. Therefore, exercise caution when deciding to run this command.
Example

# Set the status of all the conflicted IPv6 addresses in the IPv6 address pool mypool to idle.

<HUAWEI> reset dhcpv6 pool mypool conflict address   

reset dhcpv6 relay prefix-delegation route
Function

The reset dhcpv6 relay prefix-delegation route command deletes routing information learned from DHCPv6 PD terminals on a DHCPv6 relay agent.
Format

reset dhcpv6 relay prefix-delegation route [ vpn6-instance vpn-instance-name ] ipv6-address mask-length
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the destination IPv6 address of the routes to be deleted.
	

The 128-bit IPv6 address is divided into eight groups. Each group contains four hexadecimal digits. The format is X:X:X:X:X:X:X:X.

mask-length
	

Specifies the mask length of the IPv6 address.
	

The value is an integer ranging from 0 to 128

vpn6-instance vpn-instance-name
	

Specifies the VPN instance name.
	

The value must be an existing VPN instance name.
Views

User view
Default Level

3: Management level
Usage Guidelines

The reset dhcpv6 relay prefix-delegation route command is used on DHCPv6 relay agents. Before collecting routing information about a specified IPv6 address, run the reset dhcpv6 relay prefix-delegation route command to delete the existing routing information.
Example

# Delete routing information with destination IPv6 address fc00:1::1 learned from DHCPv6 PD terminals.

<HUAWEI> reset dhcpv6 relay prefix-delegation route fc00:1::1 64

reset dhcpv6 relay statistics

Function

The reset dhcpv6 relay statistics command clears DHCPv6 message statistics on the DHCPv6 relay agent.
Format

reset dhcpv6 relay statistics [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Specifies the type and number of an interface.

If no interface is specified, all the DHCPv6 message statistics are cleared. If an interface is specified, DHCPv6 message statistics on the specified interface are cleared.
	

-
Views

User view
Default Level

3: Management level
Usage Guidelines

If a device is enabled with the DHCPv6 relay function, the system takes the statistics about DHCPv6 messages passing through the DHCP relay agent. You can use the reset dhcpv6 relay statistics command to clear current message statistics on the DHCPv6 relay agent.
Example

# Clear the DHCPv6 message statistics on VLANIF 10.

<HUAWEI> reset dhcpv6 relay statistics interface vlanif 10

reset dhcpv6 server statistics

Function

The reset dhcpv6 server statistics command clears DHCPv6 message statistics on the DHCPv6 server.
Format

reset dhcpv6 server statistics [ interface interface-type interface-number ]
Parameters

Parameter
	

Description
	

Value

interface interface-type interface-number
	

Specifies the type and number of an interface.
	

-
Views

User view
Default Level

3: Management level
Usage Guidelines

If a device is enabled with the DHCPv6 server function, the system takes the statistics about DHCPv6 messages passing through the DHCPv6 server. You can use the reset dhcpv6 server statistics command to clear current message statistics on the DHCPv6 server.

If no interface is specified, all the DHCPv6 message statistics are cleared. If an interface is specified, DHCPv6 message statistics on the specified interface are cleared.
Example

# Clear DHCPv6 message statistics.

<HUAWEI> reset dhcpv6 server statistics 

reset dhcpv6 statistics
Function

The reset dhcpv6 statistics command clears DHCPv6 packet statistics.
Format

reset dhcpv6 statistics
Parameters

None
Views

User view
Default Level

3: Management level
Usage Guidelines

Collecting statistics about the DHCPv6 messages sent and received within a specified period helps you locate DHCPv6 faults. Before collecting new statistics, run the reset dhcpv6 statistics command to clear the existing message statistics. After clearing existing statistics, run the display dhcpv6 statistics command to view latest message statistics.
Example

# Clear DHCPv6 packet statistics.

<HUAWEI> reset dhcpv6 statistics

sip-domain-name

Function

The sip-domain-name command configures the SIP domain name suffix assigned by the DHCPv6 server to a DHCPv6 client.

The undo sip-domain-name command deletes the assigned SIP domain name suffix.

By default, no SIP domain name suffix is configured for the DHCPv6 client.
Format

sip-domain-name sip-domain-name

undo sip-domain-name sip-domain-name
Parameters

Parameter
	

Description
	

Value

sip-domain-name
	

Specifies the SIP domain name suffix assigned to a DHCPv6 client.
	

The value is a string of 1 to 63 case-insensitive characters without spaces. It can be the combination of letters, digits, underscores (_), hyphens (-), or dots (.) and cannot be set to a single hyphen (-) or consecutive hyphens (--).
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The sip-domain-name command is used on DHCPv6 servers. The DHCPv6 server specifies an SIP domain name when allocating IPv6 addresses for clients. You can use the sip-domain-name command on the DHCPv6 server to specify a SIP domain name for each global address pool. When allocating IPv6 addresses to clients, the DHCPv6 server also sends the domain name suffixes to the clients.

Precautions

A maximum of four SIP domain name suffixes can be configured for an IPv6 address pool.
Example

# Configure the SIP domain name assigned to the DHCPv6 client as sip.com for the address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] sip-domain-name sip.com

sip-server (IPv6 address pool view)
Function

The sip-server command configures the SIP server address assigned to the DHCPv6 client for the IPv6 address pool.

The undo sip-server command deletes the configured SIP server address assigned to the DHCPv6 client from the IPv6 address pool.

By default, no SIP server address is configured for the IPv6 address pool.
Format

sip-server ipv6-address

undo sip-server ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

SIP server IPv6 address.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The sip-server command is used on DHCPv6 servers. The DHCPv6 server needs to specify the IPv6 address of the SIP server for the address pool so that the DHCPv6 client can be connected to the Internet. The DHCPv6 server specifies the IPv6 address of the SIP server when allocating IPv6 addresses to the clients.

Precautions

    A maximum of two SIP server addresses can be configured for each address pool. The first assigned address functions as the primary address, and the other address functions as a secondary address.
    When multiple SIP servers are specified, you need to run the sip-server repeatedly to configure multiple addresses.

Example

# Specify fc00:3::1 as the IPv6 address of the SIP server when the assigned IPv6 address belongs to the address pool global1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] sip-server fc00:3::1

sntp-server
Function

The sntp-server command configures the SNTP server IPv6 address assigned to the DHCPv6 client for the IPv6 address pool.

The undo sntp-server command deletes the configured SNTP server IPv6 address assigned to the DHCPv6 client from the IPv6 address pool.

By default, no SNTP server IPv6 address is configured for the IPv6 address pool.
Format

sntp-server ipv6-address

undo sntp-server ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the IPv6 address of an SNTP server.
	

The value is a 32-digit hexadecimal number, in the format X:X:X:X:X:X:X:X.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The sntp-server command is used on DHCPv6 servers. The DHCPv6 server needs to specify the IPv6 address of the SNTP server for the IPv6 address pool so that the DHCPv6 client can be connected to the Internet. The DHCPv6 server specifies the IPv6 address of the SNTP server when allocating IPv6 addresses to the clients. After the clients receive the IPv6 address of the SNTP server, the clients synchronize the system time with the specified SNTP server.

Precautions

    A maximum of two SNTP server addresses can be configured for each IPv6 address pool. The first assigned address functions as the primary address, and the other address functions as a secondary address.
    When multiple SNTP servers are specified, you need to run the sntp-server command repeatedly to configure multiple addresses.

Example

# Specify fc00:1::1 as the IPv6 address of the SNTP server when IPv6 addresses in the address pool global1 are assigned.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool global1
[HUAWEI-dhcpv6-pool-global1] sntp-server fc00:1::1

static-bind address
Function

The static-bind address command statically binds an IPv6 address to the client DUID in the DHCPv6 address pool view.

The undo static-bind address command deletes the statically bound entries between the IPv6 address and the client DUID in the DHCPv6 address pool view.

By default, no IPv6 address is bound to the client DUID in the address pool view.
Format

static-bind address ipv6-address duid client-duid [ iaid iaid ] [ life-time { valid-lifetime | infinite } { preferred-lifetime | infinite } ]

undo static-bind address ipv6-address
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the IPv6 address statically bound to an address pool.
	

The 128-bit IPv6 address is divided into eight groups. Each group contains four hexadecimal digits. The format is X:X:X:X:X:X:X:X.

duid client-duid
	

Configures the DUID of the DHCPv6 client that is statically bound to the IPv6 address.
	

The value is a string of 2 to 256 characters in hexadecimal notation. The length of the string is an even.

iaid iaid
	

Specifies IA identifier value.
	

The value is an integer that ranges from 1 to 4294967295.

life-time
	

Specifies the lifetime of the bound entries.
	

-

valid-lifetime
	

Specifies the valid lifetime of the bound entries.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 172800, that is two days.

preferred-lifetime
	

Specifies the preferred lifetime of the bound entries.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 86400, that is one day.

infinite
	

Sets the lifetime of the bound entries to infinite.
	

-
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The static-bind address command is used on DHCPv6 servers. If some special clients need to be statically assigned with fixed IPv6 addresses, bind the DUIDs of these clients to the IPv6 addresses. When receiving a request from a special client for requesting an IPv6 address, a DHCPv6 server assigns the fixed IPv6 address bound to the client DUID to this client.

Prerequisites

    An address pool has been created by using the dhcpv6 pool command.
    Bind an IPv6 address prefix to an address pool by using the address prefix

Example

# Bind the IPv6 address fc00:1::2 with the client with DUID abcdef in address pool pool1 and set the lifetime to infinite.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] address prefix fc00:1::/64
[HUAWEI-dhcpv6-pool-pool1] static-bind address fc00:1::2 duid abcdef life-time infinite infinite

static-bind prefix
Function

The static-bind prefix command statically binds an IPv6 address prefix to the DHCPv6 PD client in the DHCPv6 address pool view.

The undo static-bind prefix command unbinds the IPv6 address prefixes from the DHCPv6 PD clients in the DHCPv6 address pool view.

By default, no IPv6 address prefix is bound to the DHCPv6 PD client in the address pool view.
Format

static-bind prefix ipv6-prefix/ipv6-prefix-length duid client-duid [ iaid iaid-value ] [ life-time { valid-lifetime | infinite } { preferred-lifetime | infinite } ]

undo static-bind prefix ipv6-prefix/ipv6-prefix-length
Parameters

Parameter
	

Description
	

Value

ipv6-prefix/ipv6-prefix-length
	

Specifies the IPv6 address prefix that is statically bound to an address pool.
	

The value is a 32-digit hexadecimal number, in the format X:X::X:X/M.

duid client-duid
	

Specifies the DUID of the DHCPv6 PD client that is statically bound to the IPv6 address prefix.
	

The value is a string of 2 to 256 characters in hexadecimal notation. The length of the string is an even.

iaid iaid-value
	

Specifies the IAID of the DHCPv6 PD client that is statically bound to the IPv6 address prefix.
	

The value is an integer that ranges from 1 to 4294967295.

life-time
	

Specifies the lifetime of the bound entries.
	

-

valid-lifetime
	

Specifies the valid lifetime.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 172800, that is two days.

preferred-lifetime
	

Specifies the preferred lifetime.

The preferred lifetime cannot exceed the valid lifetime.
	

The value is an integer that ranges from 60 to 172799999, in seconds. The default value is 86400, that is one day.

infinite
	

Sets the lifetime to infinite.

When the preferred lifetime is set to infinite, the valid lifetime must be set to infinite.
	

-
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The static-bind prefix command is used on DHCPv6 PD servers. If some special DHCPv6 PD clients need to be statically assigned with fixed IPv6 address prefixes, bind the DUIDs and IAIDs of these clients to the IPv6 address prefixes. When receiving a request for applying for an IP address prefix from a special DHCPv6 PD client, a DHCPv6 PD server assigns the fixed IPv6 address prefix bound to the DUIDs and IAIDs to this client.

Prerequisites

An address pool has been created by using the dhcpv6 pool command.

Precautions

    When assigning addresses for DHCPv6 PD clients, bind the address prefix to the DUID of the client. The IAID of the client cannot be specified.
    The statically bound prefix cannot be overlapped with the prefix that is configured using the prefix-delegation command.

Example

# Bind the IPv6 address prefix fc00:1::/64 to the DHCPv6 PD client with DUID abcdef and IAID 12 in address pool pool1 and set the lifetime of the binding entries to infinite.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] static-bind prefix fc00:1::/64 duid abcdef iaid 12 life-time infinite infinite 

suboption

Function

The suboption command configures vendor-defined DHCPv6 sub-options.

The undo suboption command deletes vendor-defined DHCPv6 sub-options.

By default, no vendor-defined DHCPv6 sub-option is configured.
Format

suboption suboption-code { address ipv6-address &<1-4> | ascii ascii-string | hex hex-string }

undo suboption suboption-code
Parameters

Parameter
	

Description
	

Value

suboption-code
	

Specifies the code of the vendor-defined DHCPv6 sub-options.
	

The value is an integer that ranges from 1 to 65535.

address ipv6-address
	

Specifies the vendor-defined option code as the IPv6 address type.
	

The value consists of 128 octets, which are classified into 8 groups. Each group contains 4 hexadecimal numbers in the format X:X:X:X:X:X:X:X.

ascii ascii-string
	

Specifies the vendor-defined option code as an ASCII character string.
	

The value is a string of 1 to 255 characters.

hex hex-string
	

Specifies the vendor-defined option code as a hexadecimal string.
	

The value is a hexadecimal numeral string with an even number of characters (such as aa or aaaa). The even number ranges from 2 to 128.
Views

Vendor-defined mode view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The suboption command is used on DHCPv6 servers. Run the vendor-specific command to enter the vendor-defined mode. In this mode, configure the vendor-defined DHCPv6 options. The DHCPv6 device can carry vendor-defined options such as the TFTP server name and address, and the configuration file of the device.

The suboption command configures vendor-defined DHCPv6 sub-options.

Precautions

A maximum of 16 vendor-defined sub-options can be configured in the vendor-defined mode view.
Example

# Set Huawei-defined sub-option 10 to fc00:1::5 in the IPv6 address pool pool1 view.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] vendor-specific 2011
[HUAWEI-dhcpv6-pool-pool1-vs-2011] suboption 10 address fc00:1::5

vendor-specific

Function

The vendor-specific command configures vendor-defined options for the IPv6 address pool and enter the vendor-defined mode view.

The undo vendor-specific command deletes vendor-defined options configured for the IPv6 address pool.

By default, no vendor-defined option is configured.
Format

vendor-specific vendor-id

undo vendor-specific vendor-id
Parameters

Parameter
	

Description
	

Value

vendor-id
	

Indicates the ID of the vendor, which is assigned by the IANA. 2011 is the identifier for Huawei.
	

The value is an integer that ranges from 1 to 4294967295.
Views

IPv6 address pool view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The vendor-specific command is used on DHCP servers. You can use the vendor-specific command to enter the vendor-defined mode. In this mode, you can configure the vendor-defined DHCPv6 options. The DHCPv6 device can carry vendor-defined options such as the TFTP server name and address, and the configuration file of the device.

Precautions

A maximum of eight vendor-defined modes are configured for one IPv6 address pool.
Example

# Configure Huawei-defined options for the IPv6 address pool pool1.

<HUAWEI> system-view
[HUAWEI] dhcpv6 pool pool1
[HUAWEI-dhcpv6-pool-pool1] vendor-specific 2011

