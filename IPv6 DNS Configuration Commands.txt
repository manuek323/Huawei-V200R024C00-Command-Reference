IPv6 DNS Configuration Commands

    Command Support
    display dns ipv6 dynamic-host
    display ipv6 host
    dns server ipv6
    dns server ipv6 source-ip
    ipv6 host
    reset dns ipv6 dynamic-host

Command Support

Commands provided in this section and all the parameters in the commands are supported by all switch models (except the S5751-L, S5731-L, and S5731S-L), unless otherwise specified. For details, see specific commands.
display dns ipv6 dynamic-host
Function

The display dns ipv6 dynamic-host command displays IPv6 dynamic DNS entries.
Format

display dns ipv6 dynamic-host [ vpn-instance vpn-instance-name | all ]
Parameters
Parameter 	Description 	Value

vpn-instance vpn-instance-name
	

Displays IPv6 dynamic DNS entries of a specified VPN instance.
	

The value must be an existing VPN instance name.

all
	

Displays all IPv6 dynamic DNS entries, including both public and private DNS entries.
NOTE:

If neither vpn-instance vpn-instance-name nor all is specified, only public IPv6 dynamic DNS entries are displayed.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

You can run the display dns ipv6 dynamic-host command to view IPv6 dynamic DNS entries and check whether domain names match the mapping entries.
Example

# Display IPv6 dynamic DNS entries.

<HUAWEI> display dns ipv6 dynamic-host
No  Domain-name       Ipv6Address     TTL
1   example           FC00:1::1       6

# Display IPv6 dynamic DNS entries of the VPN instance vpn1.

<HUAWEI> display dns ipv6 dynamic-host vpn-instance vpn1
No      Domain-name                                 Ipv6Address          TTL           VPN-Instance
1       example                                     2001:db8::2          6             vpn1

Table 6-90 Description of the display dns ipv6 dynamic-host command output

Item
	

Description

No
	

Sequence number of a dynamic IPv6 DNS entry.

Domain-name
	

Domain name.

Ipv6Address
	

IPv6 address mapping the domain name.

TTL
	

TTL value of the dynamic domain names in the cache (in seconds).

VPN-Instance
	

VPN instance name.
display ipv6 host
Function

The display ipv6 host command displays the IPv6 static DNS entries.
Format

display ipv6 host [ vpn-instance vpn-instance-name | all ]
Parameters
Parameter 	Description 	Value

vpn-instance vpn-instance-name
	

Displays IPv6 static DNS entries of a specified VPN instance.
	

The value must be an existing VPN instance name.

all
	

Displays all IPv6 static DNS entries, including both public and private static DNS entries.
NOTE:

If neither vpn-instance vpn-instance-name nor all is specified, only public IPv6 static DNS entries are displayed.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

After running the ipv6 host command to configure IPv6 static DNS entries, you can run this command to check whether mappings between host names and IPv6 addresses are correct.
Example

# Display IPv6 static DNS entries.

<HUAWEI> display ipv6 host
Host                 Age       Flags           IPv6Address(es)
www.example.com      0         static          FC00:1::8   
www.sohu.com         0         static          FC00:1::9   

# Display IPv6 static DNS entries of the VPN instance vpn1.

<HUAWEI> display ipv6 host vpn-instance vpn1
Host           Age        Flags       IPv6Address(es)         VPN-Instance
RTB            0          static      2001:db8::1             vpn1

Table 6-91 Description of the display ipv6 host command output

Item
	

Description

Host
	

Host name.

The value is set using the ipv6 host command.

Age
	

Aging time. The value 0 indicates that the entry is not aged out.

Flags
	

Identifiers. The value static indicates a static domain name.

IPv6Address(es)
	

IPv6 address mapping the domain name.

The value is set using the ipv6 host command.

VPN-Instance
	

VPN instance name.

The value is set using the ipv6 host command.
dns server ipv6
Function

The dns server ipv6 command configures the IPv6 address of a DNS server.

The undo dns server ipv6 command deletes the IPv6 address of a DNS server.

By default, no IPv6 addresses of DNS servers are configured.
Format

dns server ipv6 ipv6-address [ interface-type interface-number ] [ vpn-instance vpn-instance-name ]

undo dns server ipv6 ipv6-address [ interface-type interface-number ] [ vpn-instance vpn-instance-name ]
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the IPv6 address for a DNS server.
	

The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

interface-type interface-number
	

Specifies the type and number of an outbound interface that communicates with the DNS server.
	

-

vpn-instance vpn-instance-name
	

Specifies the name of a VPN instance.
	

The value must be an existing VPN instance name.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The DNS client must work with the DNS server to implement dynamic domain name resolution. You can run the dns server ipv6 command to specify the IPv6 address of the DNS server. The DNS client sends requests to the specified DNS server for domain name resolution.

During dynamic domain name resolution, the switch sends a domain name resolution request to the DNS servers according to the order in which they were configured. If the domain name resolution request on the first DNS server times out, the device sends the request to the next DNS server.

Precautions

The IPv6 address of the DNS server must be a global unicast address or link-local address.

    If a link-local address is configured as the IPv6 address of the DNS server, specify the outbound interface for communicating with the DNS server.
    If a global unicast address is configured as the IPv6 address of the DNS server, do not specify the outbound interface for communicating with the DNS server.

A maximum of six DNS server IP (IPv4 and IPv6) addresses can be configured on the switch.

If vpn-instance vpn-instance-name is specified, the system sends domain name resolution requests only to the DNS servers bound to the specified VPN instance.
Example

# Configure the IPv6 address of the DNS server to fc00:1::1.

<HUAWEI> system-view
[HUAWEI] dns server ipv6 fc00:1::1

dns server ipv6 source-ip
Function

The dns server ipv6 source-ip command configures the source IPv6 address for the local end functioning as the DNS client to communicate with the DNS server.

The undo dns server ipv6 source-ip command deletes the source IPv6 address used for the local end functioning as the DNS client to communicate with the DNS server.

By default, no source IPv6 address is configured for the local end functioning as the DNS client to communicate with the DNS server.
Format

dns server ipv6 source-ip ipv6-address [ vpn-instance vpn-instance-name ]

undo dns server ipv6 source-ip [ vpn-instance vpn-instance-name ]
Parameters

Parameter
	

Description
	

Value

ipv6-address
	

Specifies the source IPv6 address for the local end functioning as the DNS client to communicate with the DNS server.
	

The value has 128 bits. It is represented as eight groups of four hexadecimal digits with the groups being separated by colons, in the format of X:X:X:X:X:X:X:X.

vpn-instance vpn-instance-name
	

Specifies the name of a VPN instance.
	

The value must be an existing VPN instance name.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

After the source IPv6 address is specified, the DNS client uses the specified IPv6 address to communicate with the DNS server. This ensures communication security. If no source IPv6 address is specified, the DNS client needs to select a source IPv6 address according to the destination address each time it sends an IPv6 DNS request.

Precautions

If only one route from the DNS server to the client with an IPv6 address is reachable, you need to specify the source IPv6 address in the DNS query message when the DNS client sends a DNS query to the server.

If vpn-instance vpn-instance-name is specified, the specified source IPv6 address is used only when the device communicates with the DNS server bound to the specified VPN instance.
Example

# Configure the source IPv6 address that the DNS client uses to communicate with the DNS server to fc00:1::1.

<HUAWEI> system-view
[HUAWEI] dns server ipv6 source-ip fc00:1::1

ipv6 host
Function

The ipv6 host command configures an IPv6 static DNS entry.

The undo ipv6 host command deletes an IPv6 static DNS entry.

By default, no IPv6 static DNS entry is configured.
Format

ipv6 host host-name ipv6-address [ vpn-instance vpn-instance-name ]

undo ipv6 host host-name [ ipv6-address [ vpn-instance vpn-instance-name ] ]
Parameters

Parameter
	

Description
	

Value

host-name
	

Specifies the host name.
	

The value is a string of 1 to 255 case-sensitive characters without any space. The value must contain at least one letter, and can consist of letters, digits, hyphens (-), dots (.), and underscores (_).

ipv6-address
	

Specifies the IPv6 address mapping the host name.
	

The value consists of 128 octets, which are classified into 8 groups. Each group contains 4 hexadecimal numbers in the format X:X:X:X:X:X:X:X.

vpn-instance vpn-instance-name
	

Specifies the name of a VPN instance.
	

The value must be an existing VPN instance name.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

When requesting the IPv6 address mapping a domain name, the DNS client searches for the specified domain name in the static DNS table to obtain the corresponding IPv6 address. The ipv6 host command configures an IPv6 static DNS entry.

Precautions

Each domain name supports a maximum of eight IPv6 addresses.
Example

# Configures an IPv6 static DNS entry mapping the host named www.example.com.

<HUAWEI> system-view
[HUAWEI] ipv6 host www.example.com fc00:1::8

reset dns ipv6 dynamic-host
Function

The reset dns ipv6 dynamic-host command clears IPv6 dynamic DNS entries.
Format

reset dns ipv6 dynamic-host [ vpn-instance vpn-instance-name | all ]
Parameters
Parameter 	Description 	Value
vpn-instance vpn-instance-name 	

Clears IPv6 dynamic DNS entries of a specified VPN instance.
	

The value must be an existing VPN instance name.
all 	

Clears all IPv6 dynamic DNS entries, including both public and private DNS entries.
NOTE:

If neither vpn-instance vpn-instance-name nor all is specified, only public IPv6 dynamic DNS entries are cleared.
	-
Views

User view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

After confirming the action of deleting IPv6 dynamic DNS entries, you can run the reset dns ipv6 dynamic-host command to delete them.

Precautions

IPv6 dynamic DNS entries cannot be restored after being deleted. Confirm the action before you run the command.
Example

# Clear all IPv6 dynamic DNS entries.

<HUAWEI> reset dns ipv6 dynamic-host all

