EasyDeploy Commands

    Command Support
    activate-file
    backup configuration interval
    batch-cmd begin
    clear topology-error-info
    client
    client aging-time
    client auto-clear enable
    client auto-join enable
    client replace
    cluster
    cluster enable
    cluster-multimac
    configuration-file
    custom-file
    display easy-operation batch-cmd result
    display easy-operation client
    display easy-operation client replace
    display easy-operation configuration
    display easy-operation device-information
    display easy-operation download-status
    display easy-operation group
    display easy-operation power
    display easy-operation topology
    display ndp
    display ntdp
    display ntdp device-list
    display cluster-topology-info
    easy-operation
    easy-operation client ftp-server
    easy-operation client ftp-server-url
    easy-operation client netfile
    easy-operation client sftp-server
    easy-operation client sftp-server-url
    easy-operation client snmp securityname
    easy-operation client tftp-server
    easy-operation client tftp-server-url
    easy-operation client vlan
    easy-operation client ztp-with-cfg enable
    easy-operation commander enable
    easy-operation commander ip-address
    easy-operation dtls disable
    easy-operation dtls psk
    easy-operation shared-key
    execute to
    group build-in
    group custom
    license
    match
    mngvlanid
    ndp enable (interface view)
    ndp enable (system view)
    ndp timer aging
    ndp timer hello
    ndp trunk-member enable
    ntdp enable (interface view)
    ntdp enable (system view)
    ntdp explore
    ntdp hop
    ntdp timer
    ntdp timer hop-delay
    ntdp timer port-delay
    patch
    reset easy-operation client-database
    reset easy-operation client-offline
    reset ndp statistics
    system-software
    tftp-server/sftp-server/ftp-server
    topology enable
    topology save
    undo group
    upgrade group
    web-file
    module

Command Support

Commands provided in this section and all the parameters in the commands are supported by all switch models (except the S5751-L, S5731-L, and S5731S-L), unless otherwise specified. For details, see specific commands.

Switches' support for the commander and client roles in EasyDeploy application is as follows:

Role
	

Product Model
	

Version
	

Maximum Number of Managed Clients

Commander
	

S12700
	

V200R005C00 and later
	

255

S12700E
	

V200R019C00 and later
	

255

S7700
	

V200R003C00 and later
	

255

S9700
	

V200R003C00 to V200R013C00
	

255

S5700-HI
	

V200R003C00 to V200R005C00
	

128

S5710-HI
	

V200R003C00 to V200R005C00
	

128

S6700-EI
	

V200R003C00 to V200R005C00
	

128

S5700-EI
	

V200R003C00 to V200R005C00
	

64

S5710-EI
	

V200R003C00 to V200R005C00
	

64

S5720-HI
	

V200R006C00 to V200R019C10
	

128

S5720-EI
	

V200R007C00 to V200R019C10
	

128

S5730-HI
	

V200R012C00 to V200R019C10
	

128

S5731-H
	

V200R013C02 and later
	

128

S5731-S
	

V200R019C00 and later
	

128

S5731S-S
	

V200R019C00 and later
	

128

S5731S-H
	

V200R019C00 and later
	

128

S5732-H
	

V200R019C00 and later
	

128

S6720-EI
	

V200R008C00 to V200R023C00
	

128

S6720S-EI
	

V200R009C00 to V200R023C00
	

128

S6720-HI
	

V200R012C00 to V200R019C10
	

128

S6730-H
	

V200R013C02 and later
	

128

S6730S-H
	

V200R019C10 and later
	

128

S6730-S
	

V200R019C00 and later
	

128

S6730S-S
	

V200R019C00 and later
	

128

S6735-S
	

V200R021C00SPC600 and later
	

128

Client
	

    All fixed switch models except S1720GFR, S1720X, S1720GW-E, S1720GWR-E, S1720X-E, S1730S-S1, and S1720X-Eexcept S5751-L, S5731-L, and S5731S-L
    All modular switch models

	

V200R003C00 and later
	

-
activate-file
Function

The activate-file command sets the file activation mode and time on the Commander.

The undo activate-file command restores the default file activation mode and time.

By default, if downloaded files include the system software (*.cc), devices immediately activate all files by resetting. In addition, if the downloaded files in the batch upgrade scenario include the configuration file, the devices also activate files immediately by resetting.
Format

activate-file { reload | { in time | delay delay-time } } *

undo activate-file [ reload | in [ time ] | delay [ delay-time ] ]
Parameters
Parameter 	Description 	Value

reload
	

Indicates that the device activates files by resetting.
	

-

in time
	

Indicates the time when the device activates files.
	

The format is HH:MM, in which HH indicates hour ranging from 0 to 23 and MM indicates minute ranging from 0 to 59.

delay delay-time
	

Indicates the delay after which the device activates files.
	

The value is an integer that ranges from 0 to 86400, in seconds. The default is 0.
Views

Easy-Operation view, Easy-Operation group view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

If clients use the default method to activate files, network services will be affected. This issue is especially prominent in the batch upgrade scenario where each upgraded device may carry a lot of services. Resetting these devices will interrupt services. Therefore, the devices should activate files when service volume is small.

Precautions

    If the reload parameter is specified, the client activates files by resetting regardless of whether downloaded files include the system software.
    The undo activate-file command restores the default file activation mode and time. If the reload, in, and delay parameters are specified in the undo activate-file command, the default configurations are restored.
    The file activation mode can be set in the Easy-Operation view or group view. If the client matches a group, the configuration in the group view takes effect for the client.

Example

# Set the file activation mode to reset.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] activate-file reload

# Set the file activation delay to one hour.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] activate-file delay 3600

# Set the file activation mode to reset and time to 1:00 am.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] activate-file in 1:00 reload

# Set the file activation mode to reset and time to 1:00 am for group F1.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] group custom ip-address F1
[HUAWEI-easyoperation-group-custom-F1] activate-file in 1:00 reload

backup configuration interval
Function

The backup configuration interval command enables automatic configuration file backup on the Commander and sets the backup interval and method.

The undo backup configuration command disables automatic configuration file backup.

By default, the configuration file is not automatically backed up.
Format

backup configuration interval interval [ duplicate ]

undo backup configuration [ interval [ interval ] ] [ duplicate ]
Parameters
Parameter 	Description 	Value

interval
	

Indicates the backup interval.
	

The value is an integer that ranges from 0 to 720, in hours.

The default value is 0, indicating that clients do not automatically back up configuration files.

duplicate
	

Indicates that the backup file is saved as a new file, and the original configuration file is not overwritten.

If this parameter is not specified, the original configuration file is overwritten by the backup file.
	

-
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

After a faulty client is replaced by a new client, the new client needs to obtain the latest configuration file of the faulty client to minimize impact on service. Therefore, all clients should periodically back up their configuration files to the file server.

This function must be configured before any fault occurs. It is recommended that you configure this function when deploying the network.

Prerequisites

The file server information has been configured on the Commander using the tftp-server/sftp-server/ftp-server command.

Precautions

    After this function is configured, all clients managed by the Commander will automatically back up configuration files.
    To disable this function, run the undo backup configuration [ interval [ interval ] ] or undo backup configuration interval duplicate command, or set the file backup interval to 0.
    If you do not want to keep the original configuration files, run the undo backup configuration duplicate command to make the backup files overwrite the original files.

    The naming convention of the configuration files is as follows:

        If the backup files are saved as new files, name the new files in format vrpcfg-MAC address-year-month-day-hour-minute-second.XXX. XXX is the file name extension, which must be the same as the configuration file name extension being used on the client. For example, if the startup configuration file on a client is vrpcfg.zip, the backup file is named in format vrpcfg-MAC address-year-month-day-hour-minute-second.zip.

        If the backup files overwrite the original files, name the backup files in format vrpcfg-MAC address.XXX. XXX is the file name extension, which must be the same as the configuration file name extension being used on the client.

Example

# Set the file backup interval to 12 hours and overwrite the original files with backup files.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] backup configuration interval 12

# Disable automatic configuration file backup.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] backup configuration interval 0
Warning: This command will cancel the function of backing up configuration. Cont
inue?[Y/N]:y
[HUAWEI-easyoperation]

batch-cmd begin
Function

The batch-cmd begin command starts online command script editing.
Format

batch-cmd begin
Parameters

None
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines
Usage Scenario

In a batch device deployment scenario, you can run this command to start online command script editing. After editing the commands, press Ctrl+C to exit the editing mode. If you run this command again, the edited commands will be cleared.
Precautions

    Only one network administrator is allowed to edit commands online at one time.
    If no operation is performed in command editing mode within 30 seconds, you automatically exit from the editing mode to the Easy-Operation view.

Example

# Start online command script editing.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] batch-cmd begin
Info: Begin to edit batch commands. Press CTRL+C to abort this session.
system-view
vlan batch 10 20
ndp enable
ntdp enable                                                                
              
[HUAWEI-easyoperation]

clear topology-error-info
Function

The clear topology-error-info command clears faulty link information from the topology.
Format

clear topology-error-info
Parameters

None
Views

Cluster view
Default Level

2: Configuration level
Usage Guidelines

The clear topology-error-info command can be run only on the Commander switch.

After a faulty client recovers, run this command to clear faulty link information from the topology. To view the topology information, run the display cluster-topology-info command.
Example

# Clear information about faulty links and sub-links.

<HUAWEI> system-view
[HUAWEI] cluster
[HUAWEI-cluster] display cluster-topology-info
The topology information about the cluster:
<-->:normal device         <++>:candidate device         <??>:lost device
-------------------------------------------------------------------------
Total topology node number is 3.
[HUAWEI: Root-00e0-fcb8-d6b6]
|-(GigabitEthernet0/0/2)<??>(GigabitEthernet0/0/1)[00e0-fc67-7f7d]
|-(GigabitEthernet0/0/3)<-->(GigabitEthernet0/0/3)[00e0-fc03-0003]
[HUAWEI-cluster] clear topology-error-info
[HUAWEI-cluster] display cluster-topology-info
The topology information about the cluster:
<-->:normal device         <++>:candidate device         <??>:lost device
-------------------------------------------------------------------------
Total topology node number is 2.
[HUAWEI: Root-00e0-fcb8-d6b6]
|-(GigabitEthernet0/0/3)<-->(GigabitEthernet0/0/3)[00e0-fc03-0003] 

client
Function

The client command adds information to the client database or modifies information in the client database.

The undo client command deletes information from the client database.

By default, the client database does not contain client information.
Format

client [ client-id ] { { mac-address mac-address | esn esn } | system-software file-name [ version ] | patch file-name | configuration-file file-name | web-file file-name | license file-name | { custom-file file-name } &<1-3> } *

undo client client-id [ mac-address [ mac-address ] | esn [ esn ] | system-software [ file-name [ version ] ] | patch [ file-name ] | configuration-file [ file-name ] | web-file [ file-name ] | license [ file-name ] | custom-file [ file-name ] ]
Parameters
Parameter 	Description 	Value

client-id
	

Specifies the client ID, which identifies a client. If this parameter is not specified when you add client information, the system assigns the minimum ID not in use to the client.
	

The value is an integer. It depends on the maximum number of clients supported by the Commander.

For details, see Maximum Number of Managed Clients on the Commander.

mac-address mac-address
	

Specifies the MAC address of the client.
	

The value is in the H-H-H format, where each H contains four hexadecimal digits.

esn esn
	

Specifies the ESN of the client.
	

The value is a string of 10 to 32 case-insensitive characters without spaces.

system-software file-name
	

Specifies the name of the system software (*.cc) to be loaded to the client.
	

The value is a string of 4 to 48 case-insensitive characters without spaces.

version
	

Specifies the version of a system software package, for example, V200R024C00. If the specified software version is the same as the software version running on the client, a software upgrade will not be performed for the client.
	

The value is a string of 11 to 32 case-insensitive characters without spaces.

patch file-name
	

Specifies the name of the patch file (*.pat) to be loaded to the client.
	

The value is a string of 5 to 48 case-insensitive characters without spaces.

configuration-file file-name
	

Specifies the name of the configuration file (*.zip or *.cfg) to be loaded to the client.
	

The value is a string of 5 to 48 case-insensitive characters without spaces.

web-file file-name
	

Specifies the name of the web page file (*.web.7z or *.web.zip) to be loaded to the client.
	

The value is a string of 8 to 64 case-insensitive characters without spaces.

license file-name
	

Specifies the name of the license file (*.dat) to be loaded to the client.
NOTE:

The license file is not supported in the Easy-Operation view. The file does not take effect even if you configure it.
	

The value is a string of 5 to 64 case-insensitive characters without spaces.

custom-file file-name
	

Specifies the name of the user-defined file to be loaded to the client.

A maximum of three user-defined files can be specified. The file names are separated by spaces.
	

The value is a string of 1 to 64 case-insensitive characters without spaces.
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

If a few zero touch clients need to be deployed on a network, you can run this command multiple times to add client information one by one.

Precautions

    Clients search the matching database by searching for their MAC addresses or ESNs in the database; therefore, the mappings between clients and MAC addresses or ESNs must be configured. When a client finds a matching database, it obtains information mapping its client ID, including system software name and patch file name.
    This command can be executed once or multiple times to configure the mappings between clients and MAC addresses or ESNs and specify information about the files to be downloaded.
    To delete all information about a client, run the undo client client-id command. To delete an item from a client's information, run the undo command with the item specified.

    When parameters are specified in this undo command to delete specified information, this command takes effect only for the manually configured clients.
    Each Commander supports a limited number of clients; therefore, the client information that can be added to the client database is also limited.
    You can specify a path for each file.

Example

# Add client information in which MAC address is 00e0-fc12-3456, configuration file is vrpcfg.zip, and file path is /configfile/.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client mac-address 00e0-fc12-3456 configuration-file configfile/vrpcfg.zip

# Add client information in which client ID is 3, ESN is 210235165110xxxxxxxx, system software name is test.cc, and user-defined file names are header.txt and aaa.bat.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client 3 esn 210235165110xxxxxxxx
[HUAWEI-easyoperation] client 3 system-software test.cc
[HUAWEI-easyoperation] client 3 custom-file header.txt custom-file aaa.bat

# Delete the configuration file of the client with client ID 4.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] undo client 4 configuration-file

# Delete all information about the client with client ID 5.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] undo client 5

client aging-time
Function

The client aging-time command ages the lost state clients in the client database and specifies the aging time.

The undo client aging-time command cancels the configuration.

By default, the lost state clients in the client database are not aged.
Format

client aging-time aging-time

undo client aging-time [ aging-time ]
Parameters
Parameter 	Description 	Value
aging-time 	Specifies the aging time for clients in the lost state. 	The value is an integer that ranges from 72 to 720, in hours.
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines
Usage Scenario

Information about clients configured by the network administrator or automatically learned is saved in the client database. The Commander considers that a client to be in the lost state if the client does not respond after two minutes.

The maximum number of clients managed by the Commander depends on the device specifications. If the number of clients exceeds the upper limit, new client information cannot be configured on the Commander. To prevent clients in the lost state from occupying the database resources for a long time, enable the function of aging lost state clients. When the aging time expires, lost state clients are deleted. If some clients in the lost state occupy the database resources for a long time, run the reset easy-operation client-offline command to delete these clients.
Precautions

    Automatically learned clients are deleted after their aging time expires.
    Manually configured clients are not deleted but their status changes to unknown.

Example

# Enable the function of aging lost state clients and set the aging time to 72 hours.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client aging-time 72

client auto-clear enable
Function

The client auto-clear enable command enables clients to automatically clear storage space. This command is run on the Commander.

The undo client auto-clear enable command disables clients from clearing storage space.

By default, this function is disabled on the Commander.
Format

client auto-clear enable

undo client auto-clear enable
Parameters

None
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

If storage space on a client is insufficient, the client cannot download files. This command enables clients to automatically clear storage space to ensure a sufficient storage space.

Precautions

    Clients clear storage space only when the storage space is insufficient for a system software package. In addition, they only delete non-startup system software packages to create space.

    This function is invalid for certain file server types. If the file server is a TFTP server, this function does not take effect because the TFTP server does not return file size to clients. If an FTP or SFTP server cannot return file size, this function does not take effect, either. An S switch serving as an FTP or a TFTP file server does not support the function of returning file size.

Example

# Enable clients to automatically clear storage space.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client auto-clear enable

client auto-join enable
Function

The client auto-join enable command enables clients to automatically join the management domain of a Commander. This command is run on the Commander.

The undo client auto-join enable command disables clients from joining the management domain of a Commander.

By default, clients do not automatically join the Commander management domain.
Format

client auto-join enable

undo client auto-join enable
Parameters

None
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

After this function is enabled and the Commander IP address is configured on clients, the Commander automatically learns the basic information about clients, saves the information to the client database, and assigns a client ID to each client.

Client information learned by the Commander includes MAC addresses, ESNs, IP addresses, device types, device models, current system software names, configuration files, and patch files on the clients. The Commander monitors and manages basic information and version files of all clients in the management domain.

In batch upgrade scenario, you can determine the devices to be upgraded according to the client information.

To prevent unknown clients from joining the management domain, disable this function.

Precautions

    In the batch upgrade scenario, run the easy-operation commander ip-address command to configure the Commander IP address on the clients.

    In the zero touch device deployment or faulty device replacement scenario, if you require that the clients still be managed by the Commander after completing the EasyDeploy process, add the Commander IP address to the configuration file to be downloaded by the clients.
    To view the client information learned by the Commander, run the display easy-operation client command.
    If the learned client information already exists in the client database (statically configured using client), the client database is updated.
    After information about a client is stored in the client database, the client status becomes LOST if the client goes offline. When the client goes online, the client joins the management domain again and its status becomes Running.

Example

# Enable clients to automatically join the management domain of a Commander.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client auto-join enable
Warning: The commander will create the client information in database automatica
lly when received message from unknown client. Continue? [Y/N]: y
[HUAWEI-easyoperation] 

client replace
Function

The client replace command adds or modifies client replacement information.

The undo client replace command deletes client replacement information.

By default, no client replacement information exists.
Format

client client-id replace { [ mac-address mac-address | esn esn ] | system-software file-name [ version ] | patch file-name | web-file file-name | license file-name | { custom-file file-name } &<1-3> } *

undo client client-id replace [ mac-address [ mac-address ] | esn [ esn ] | system-software [ file-name [ version ] ] | patch [ file-name ] | web-file [ file-name ] | license [ file-name ] | custom-file [ file-name ] ]
Parameters
Parameter 	Description 	Value
client-id 	Indicates the ID of a faulty client. 	The value is an integer. It depends on the maximum number of clients supported by the Commander.

For details, see Maximum Number of Managed Clients on the Commander.
mac-address mac-address 	Indicates the MAC address of the new client. 	The value is in the H-H-H format, where each H contains four hexadecimal digits.
esn esn 	Indicates the ESN of the new client. 	The value is a string of 10 to 32 case-insensitive characters without spaces.
system-software file-name 	Specifies the name of the system software (*.cc) to be loaded to the new client. 	The value is a string of 4 to 48 case-insensitive characters without spaces.
version 	

Specifies the version of a system software package, for example, V200R024C00. If the specified software version is the same as the software version running on the client, a software upgrade will not be performed for the client.
	The value is a string of 11 to 32 case-insensitive characters without spaces.
patch file-name 	Specifies the name of the patch file (*.pat) to be loaded to the new client. 	The value is a string of 5 to 48 case-insensitive characters without spaces.
web-file file-name 	Specifies the name of the web page file (*.web.7z or *.web.zip) to be loaded to the new client. 	The value is a string of 8 to 64 case-insensitive characters without spaces.
license file-name 	Specifies the name of the license file (*.dat) to be loaded to the new client.
NOTE:

The license file is not supported in the Easy-Operation view. The file does not take effect even if you configure it.
	The value is a string of 5 to 64 case-insensitive characters without spaces.
custom-file file-name 	

Specifies the name of the user-defined file to be loaded to the new client.

A maximum of three user-defined files can be specified. The file names are separated by spaces.
	The value is a string of 1 to 64 case-insensitive characters without spaces.
Views

Easy-Operation view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

If a client becomes faulty due to a hardware failure, run this command to add replacement information for the faulty client. After a new client is installed on the network to replace the faulty client, the new client can quickly obtain the configuration file of the faulty client, minimizing impact on services. You can also specify other files that can be loaded on the new client.

Precautions

    A new client finds matching replacement information by searching for its own MAC address or ESN; therefore, the mapping between the new client and MAC address or ESN must be configured. After finding matching information, the new client downloads the configuration file and other specified files of the faulty client from the file server.
    Before replacing the faulty client with a new client, ensure that the EasyDeploy function has been configured on the network and the backup configuration interval command has been run on the Commander to enable automatic configuration file backup. If this command has not been run, the new client cannot obtain the latest configuration file of the faulty client.
    This command can be run once or multiple times to configure the mappings between the new client and MAC address or ESN and specify information about the files to be downloaded.
    To delete all replacement information about a client, run the undo client client-id replace command. To delete an item from a client's replacement information, run the undo command with the item specified.
    This command is not recorded in the configuration file.

Example

# Replace client 3 with a client that has a MAC address xxxx-xxxx-xxxx. The new client only needs to download the configuration file of client 3.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client 3 replace mac-address xxxx-xxxx-xxxx

# Replace client 3 with a client that has a MAC address xxxx-xxxx-xxxx. The new client needs to download the configuration file, system software, and user-defined file of client 3.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] client 3 replace mac-address xxxx-xxxx-xxxx
[HUAWEI-easyoperation] client 3 replace system-software test.cc V200R024C00
[HUAWEI-easyoperation] client 3 replace custom-file header.txt custom-file aaa.bat

cluster
Function

The cluster command displays the cluster view.
Format

cluster
Parameters

None
Views

System view
Default Level

2: Configuration level
Usage Guidelines

After entering the cluster view on the Commander, you can configure a cluster management VLAN and then configure the Commander as the network topology collection device so that the Commander only collects topology information of clients in the VLAN.
Example

# Enter the cluster view.

<HUAWEI> system-view

[HUAWEI] cluster

[HUAWEI-cluster]

cluster enable
Function

The cluster enable command enables the cluster function.

The undo cluster enable command disables the cluster function.

The cluster disable command disables the cluster function.

By default, the cluster function is enabled.
Format

cluster enable

undo cluster enable

cluster disable
Parameters

None
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Before configuring the Commander as the network topology collection device, you need to configure a cluster management VLAN in the cluster view on the Commander so that the Commander only collects topology information of clients in the VLAN. Before configuring a cluster management VLAN on an S series switch, you must run the cluster enable command to enable the cluster function so that you can enter the cluster view.
Example

# Enable the cluster function on a device.

<HUAWEI> system-view

[HUAWEI] cluster enable

cluster-multimac
Function

The cluster-multimac command assigns a multicast address to a cluster.

The undo cluster-multimac command restores the default multicast address of the cluster.

By default, the multicast address of the cluster is 0180-C200-000A.
Format

cluster-multimac mac-address

undo cluster-multimac
Parameters
Parameter 	Description 	Value
mac-address 	Specifies the multicast MAC address of a cluster. 	The value is in the format of H-H-H. Each H stands for a 4-digit hexadecimal number. The value ranges from 0180-C200-0004 to 0180-C200-0007, 0180-C200-0009 to 0180-C200-0010 and 0180-C200-0020 to 0180-C200-002F. The default value is 0180-C200-000A.
Views

Cluster view
Default Level

2: Configuration level
Usage Guidelines

Before setting up a cluster, you need to assign a multicast MAC address to the cluster or use the default multicast MAC address. To enhance the network security or if the default multicast MAC address is being used by other services on the network, you can reassign a multicast MAC address to the cluster within the permitted range. Once the cluster is set up, you cannot change the multicast MAC address of the cluster. All the devices in the cluster must be assigned the same multicast MAC address.
Example

# Assign multicast address 0180-c200-0004 to a cluster.

<HUAWEI> system-view

[HUAWEI] cluster

[HUAWEI-cluster] cluster-multimac 0180-c200-0004

# Restore the default multicast address of the cluster.

<HUAWEI> system-view

[HUAWEI] cluster

[HUAWEI-cluster] undo cluster-multimac

configuration-file
Function

The configuration-file command specifies the configuration file information to be downloaded by clients.

The undo configuration-file command deletes information about the configuration file to be downloaded.
Format

configuration-file file-name

undo configuration-file [ file-name ]
Parameters
Parameter 	Description 	Value

file-name
	

Specifies the name of the configuration file (*.zip or *.cfg) to be loaded to the client. A file path can be specified.
	

The value is a string of 5 to 48 case-insensitive characters without spaces.
Views

Easy-Operation view, Easy-Operation group view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

To deploy a zero touch client or reload a configuration file to clients, use this command to specify the configuration file.

Precautions
Information about the files to be downloaded can be set in the Easy-Operation view or Easy-Operation group view:

    The file information set in the Easy-Operation view is the default file information. If no file information is set in the group database or client database, the group or client uses the default file information.
    The files specified in the Easy-Operation group view can be downloaded by the clients that match the group.

The names of the files to be downloaded cannot be the same as system configuration files. Otherwise, the upgrade fails.
Example

# Configure the default configuration file information.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] configuration-file easy/vrpcfg.zip

# Configure the configuration file information for a MAC address-based group.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] group custom mac-address test
[HUAWEI-easyoperation-group-custom-test] configuration-file vrpcfg.zip

custom-file
Function

The custom-file command specifies a user-defined file to be downloaded by clients.

The undo custom-file command deletes the configured user-defined file information.
Format

{ custom-file file-name } &<1-3>

undo custom-file [ file-name ]
Parameters
Parameter 	Description 	Value
file-name 	

Specifies the name of a user-defined file to be loaded to the client. A file path can be specified.

A maximum of three user-defined files can be specified. The file names are separated by spaces.
	The value is a string of 1 to 64 case-insensitive characters without spaces.
Views

Easy-Operation view, Easy-Operation group view
Default Level

3: Management level
Usage Guidelines

Usage Scenario

When clients need to download user-defined files, such as batch processing file and login header file, use this command.

Precautions
Information about the files to be downloaded can be set in the Easy-Operation view or Easy-Operation group view:

    The file information set in the Easy-Operation view is the default file information. If no file information is set in the group database or client database, the group or client uses the default file information.
    The files specified in the Easy-Operation group view can be downloaded by the clients that match the group.

The names of the files to be downloaded cannot be the same as system user-defined files. Otherwise, the upgrade fails.
Example

# Configure the default user-defined file information.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] custom-file easy/mydoc.bat

# Configure the user-defined file information for a MAC address-based group.

<HUAWEI> system-view
[HUAWEI] easy-operation
[HUAWEI-easyoperation] group custom mac-address test
[HUAWEI-easyoperation-group-custom-test] custom-file mydoc.bat custom-file header.txt

display easy-operation batch-cmd result
Function

The display easy-operation batch-cmd result command displays the batch configuration execution result.
Format

display easy-operation batch-cmd result
Parameters

None
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

To check the batch configuration execution result, run the display easy-operation batch-cmd result command. The result is saved in the memory of clients. If the script contains commands used to clear the client memory, such as the reboot command, the result cannot be checked using the display easy-operation batch-cmd result command after the commands are delivered to clients.
Example

# Display the execution result of batch configuration.

<HUAWEI> display easy-operation batch-cmd result
This operation will take some seconds, please wait......
-------------------------------------------------------------
  ID   Total  Successful     Failed    Time                  
-------------------------------------------------------------
   1      10          10          0    2013-09-12  12:57:02  
   2      10          10          0    2013-09-12  12:57:02  
   3      10          10          0    2013-09-12  12:57:02  
-------------------------------------------------------------

Table 2-3 Description of the display easy-operation batch-cmd result command output
Item 	Description
ID 	Client ID.
Total 	Total number of commands delivered.
Successful 	Number of commands successfully executed.
Failed 	Number of commands failed to be executed.
Time 	Time when command execution was complete on the client.
display easy-operation client
Function

The display easy-operation client command displays client information on the Commander.
Format

display easy-operation client [ client-id | mac-address mac-address | esn esn | verbose ]
Parameters
Parameter 	Description 	Value

client-id
	

Displays detailed information about a client with a specified client ID.
	

The value is an integer. It depends on the maximum number of clients supported by the Commander.

For details, see Maximum Number of Managed Clients on the Commander.

mac-address mac-address
	

Displays detailed information about a client with a specified MAC address.
	

The value is in the H-H-H format, where each H contains four hexadecimal digits.

esn esn
	

Displays detailed information about a client with a specified ESN.
	

The value is a string of 10 to 32 case-insensitive characters without spaces.

verbose
	

Displays detailed information about all clients.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

This command displays client information that the Commander dynamically obtains from a client, including the client's host name, MAC address, ESN, IP address, device type, and information about the files that have been downloaded to the client.

If the client state is UNKNOWN in the command output, the displayed MAC address and ESN are manually configured. If the client state is not UNKNOWN, the displayed MAC address and ESN values are dynamically obtained from the client. To modify the configuration of a client in a state other than UNKNOWN to match a new device, run the undo client client-id command to delete the current client configuration first.

If no optional parameter is specified in the command, the command displays brief client information dynamically obtained from the client database.
Example

# Display brief client information.

<HUAWEI> display easy-operation client
The total number of client is : 4                                               
                                                                                
------------------------------------------------------------------------------- 
 ID   Mac address    ESN                              IP address       State    
------------------------------------------------------------------------------- 
 1    00E0-FC12-ABCD 2102113089P0xxxxxxxx             192.168.150.208  RUNNING     
 2    00E0-FC12-0701 -                                -                INITIAL  
 3    -              210235182810xxxxxxxx             192.168.150.210  INITIAL
 4    00E0-FC12-2123 210235276310xxxxxxxx             192.168.150.122  RUNNING
------------------------------------------------------------------------------- 

# Display detailed information about the client with MAC address 00e0-fc12-3456.

<HUAWEI> display easy-operation client mac-address 00e0-fc12-3456
---------------------------------------------------------------------------     
 Client ID                    : 4                                               
 Host name                    : HUAWEI
 Mac address                  : 00e0-fc12-3456                                  
 ESN                          : 210235276310xxxxxxxx                            
 IP address                   : 192.168.150.122                                 
 Model                        : S5728C-EI             
 Device Type                  : S5700-EI                   
 System-software file         : flash:/s5700-ei-v200r003c00.cc               
 System-software version      : V200R003C00
 Configuration file           : flash:/122.cfg                                  
 Patch file                   : -                                               
 WEB file                     : -                                               
 License file                 : -                                               
 System CPU usage             : 6%                                              
 System Memory usage          : 55% 
 Backup configuration file    : -                                               
 Backup result                : -                                      
 Last operation result        : -                                      
 Last operation time          : 0000-00-00  00:00:00 
 State                        : RUNNING                                         
 Aging time left (hours)      : - 
----------------------------------------------------------------------------     

Table 2-4 Description of the display easy-operation client command output

Item
	

Description

ID/Client ID
	

Client ID.

Host name
	

Client host name.

Mac address
	

Client MAC address.

ESN
	

Client ESN.

IP address
	

Client IP address.

State
	

Client status.

    INITIAL: The client is performing initialization. The client information has been added to the Commander, but the client has not obtained an IP address, so the client cannot communicate with the Commander.
    UPGRADING: The client is upgrading the software.
    RUNNING: The client is running.
    LOST: The Commander does not receive the response from the client in 2 minutes. A stack enters the LOST state when its system MAC address changes.
    CONFIGURING: Batch configuration status.
    UNKNOWN: The client status is unknown. This state rarely appears.

Model
	

Device model of the client.

Device Type
	

Device type of the client.

System-software file
	

Current system software name of the client.

System-software version
	

Current system version of the client.

Configuration file
	

Current configuration file name of the client.

Patch file
	

Current patch file name of the client.

WEB file
	

Current web page file name of the client.

License file
	

Current license file name of the client.

System CPU usage
	

CPU usage of the client.

System Memory usage
	

Memory usage of the client.

Backup configuration file
	

Current backup configuration file name of the client.

Last operation result
	

Last operation result.

Last operation time
	

Last operation time.

Backup result
	

File backup result.

Aging time left
	

Remaining aging time.
display easy-operation client replace
Function

The display easy-operation client replace command displays client replacement information on the Commander.
Format

display easy-operation client replace [ verbose ]

display easy-operation client client-id replace
Parameters
Parameter 	Description 	Value

verbose
	

Displays detailed client replacement information.
	

-

client-id
	

Displays replacement information about a client with a specified client ID.
	

The value is an integer. It depends on the maximum number of clients supported by the Commander.

For details, see Maximum Number of Managed Clients on the Commander.
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

The display easy-operation client command displays brief client replacement information.

The replacement information is configured using the client replace command.
Example

# Display brief client replacement information.

<HUAWEI> display easy-operation client replace
The total number of replacement information is :  1                             
                                                                                
-----------------------------------------------------------                     
  ID      Replaced Mac     Replaced Esn     Status                              
-----------------------------------------------------------                     
  3       00e0-fc12-3456   -                enable                              
-----------------------------------------------------------                     

# Display detailed client replacement information.

<HUAWEI> display easy-operation client replace verbose 
-----------------------------------------------------------                     
 Client ID            : 3                                                       
 Mac address          : 00e0-fc12-3456                                
 ESN                  : -                                                       
 System-software file : -                                                       
 Configuration file   : 1.cfg                                                   
 Patch file           : -                                                       
 WEB file             : -                                                       
 License file         : -                                                       
 Customs file 1       : header.txt                                              
 Customs file 2       : aaa.bat                                                 
 Customs file 3       : 1                                                       
 Status               : disable                                                 
-----------------------------------------------------------                     

# Display replacement information of client 3.

<HUAWEI> display easy-operation client 3 replace
-----------------------------------------------------------                     
 Client ID            : 3                                                       
 Mac address          : 00e0-fc12-3456                                          
 ESN                  : -                                                       
 System-software file : -                                                       
 Configuration file   : 1.cfg                                                   
 Patch file           : -                                                       
 WEB file             : -                                                       
 License file         : -                                                       
 Customs file 1       : header.txt                                              
 Customs file 2       : aaa.bat                                                 
 Customs file 3       : 1                                                       
 Status               : disable                                                 
-----------------------------------------------------------                     

Table 2-5 Description of the display easy-operation client replace command output

Item
	

Description

ID/Client ID
	

Faulty client ID.

Replaced Mac/Mac address
	

New client MAC address.

Replaced Esn/ESN
	

New client ESN.

System-software file
	

System software to be downloaded by the new client.

Configuration file
	

Configuration file to be downloaded by the new client.

Patch file
	

Patch file to be downloaded by the new client.

WEB file
	

Web page file to be downloaded by the new client.

License file
	

License file to be downloaded by the new client.

Customs file 1
	

First user-defined file to be downloaded by the new client.

Customs file 2
	

Second user-defined file to be downloaded by the new client.

Customs file 3
	

Third user-defined file to be downloaded by the new client.

Status
	

Status of the replacement.

    enable: This function is enabled.
    disable: This function is not enabled.

display easy-operation configuration
Function

The display easy-operation configuration command displays the configurations on the Commander.
Format

display easy-operation configuration
Parameters

None
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

This command can be run on the Commander or clients.

    When the command is run on the Commander, the Commander role, Commander IP address and port number, file server information, and default downloaded file information are displayed.
    When the command is run on a client, the client role and Commander IP address and port number are displayed.

Example

# Display EasyDeploy configuration on the Commander.

<HUAWEI> display easy-operation configuration
---------------------------------------------------------------------------     
 Role                            : Commander                                     
 Commander IP address            : 192.168.150.128                               
 Commander UDP port              : 60000                                         
 DTLS status                     : Enable
 IP address of file server       : 192.168.150.200                               
 Type of file server             : SFTP                                           
 Username of file server         : admin                                         
 Default system-software file    : test.cc                                       
 Default system-software version : -                          
 Default configuration file      : -                                           
 Default patch file              : -                                           
 Default WEB file                : -                                              
 Default license file            : test.dat                                       
 Default custom file 1           : mydoc.pat                                     
 Default custom file 2           : header.txt                                    
 Default custom file 3           : -                                                 
 Auto clear up                   : Disable                                       
 Auto join in                    : Disable                                        
 Topology collection             : Enable 
 Activating file time            : In 00:00                                      
 Activating file method          : Default                                       
 Aging time of lost client(hours): - 
 Backup configuration file mode  : Default                                       
 Backup configuration file interval(hours): -                                   
---------------------------------------------------------------------------     

# Display EasyDeploy configuration on a client.

<HUAWEI> display easy-operation configuration
---------------------------------------------------------------------------     
 Role                           : Client                                        
 Commander IP address           : 192.168.150.128(dhcp-alloc)
 Commander UDP port             : 60000                                         
 DTLS status                    : Enable
---------------------------------------------------------------------------     

Table 2-6 Description of the display easy-operation configuration command output

Item
	

Description

Role
	

Device role in the EasyDeploy service, which can be Commander or client.

Commander IP address
	

Commander IP address.

It can be configured using the easy-operation commander ip-address command.

If a client starts with a configuration file and obtains an IP address from a DHCP server, the client can also obtain the Commander IP address from the Option 148 field in the DHCP response message sent from the DHCP server. Therefore, the command output on a client shows whether a Commander IP address is configured using the command (configured) or obtained from the DHCP server (dhcp-alloc). If both two types of Commander IP addresses are available, the client uses the configured one. After the configured Commander IP address is deleted, the client uses the Commander IP address obtains from the DHCP server.

Commander UDP port
	

Port number used for communication between Commander and clients.

It can be configured using the easy-operation commander ip-address command.

DTLS status
	

DTLS status.

IP address of file server
	

File server IP address.

It can be configured using the tftp-server or sftp-server | ftp-server command.

Type of file server
	

File server type.

Username of file server
	

User name for accessing the file server.

Default system-software file
	

Default system software. If no default system software is specified, this field is empty.

It can be configured using the system-software command.

Default system-software version
	

Default system software version. If no default system software is specified, this field is empty.

It can be configured using the system-software command.

Default configuration file
	

Default configuration file. If no default configuration file is specified, this field is empty.

It can be configured using the configuration-file command.

Default patch file
	

Default patch file. If no default patch file is specified, this field is empty.

It can be configured using the patch command.

Default WEB file
	

Default web page file. If no default web page file is specified, this field is empty.

It can be configured using the web-file command.

Default license file
	

Default license file. If no default license file is specified, this field is empty.

It can be configured using the license command.

Default custom file 1
	

First default user-defined file. If no default user-defined file is specified, this field is empty.

It can be configured using the custom-file command.

Default custom file 2
	

Second default user-defined file. If no default user-defined file is specified, this field is empty.

It can be configured using the custom-file command.

Default custom file 3
	

Third default user-defined file. If no default user-defined file is specified, this field is empty.

It can be configured using the custom-file command.

Auto clear up
	

Whether clients are enabled to automatically clear storage space.

This function is configured using the client auto-clear enable command.

Auto join in
	

Whether clients are enabled to automatically join the management domain of the Commander.

This function is configured using the client auto-join enable command.

Topology collection
	

Whether topology information collection is enabled.

This function is configured using the topology enable command.

Activating file time
	

File activation time. If default file activation mode is used, this field displays Immediately.

It can be configured using the activate-file command.

Activating file method
	

File activation mode. If default file activation mode is used, this field displays Default.

It can be configured using the activate-file command.

Aging time of lost client(hours)
	

Aging time of a client in lost state.

It can be configured using the client aging-time command.

Backup configuration file mode
	

Configuration file backup mode. If default mode is used, this field displays Default.

It can be configured using the backup configuration interval command.

Backup configuration file interval(hours)
	

Configuration file backup interval. If configuration file backup is disabled, this field displays a hyphen (-).

It can be configured using the backup configuration interval command.
display easy-operation device-information
Function

The display easy-operation device-information command displays device information.
Format

display easy-operation device-information
Parameters

None
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

To check device information, run the display easy-operation device-information command. The command output includes the MAC address, ESN, model, type, and active/standby state of the device.

This command can be run on the Commander or clients.

If the client is a stack, the displayed MAC address is the MAC address of the stack (MAC address of the master or backup device) and the displayed ESN is the ESN of the master device.
Example

# Display the current device information.

<HUAWEI> display easy-operation device-information
System MAC: xxxx-xxxx-xxxx                                                      
Slot MAC            ESN                  Model               Device-Type Role   
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
0   xxxx-xxxx-xxxx  210235404310xxxxxxxx S5701-28X-LI-AC     S5700-X-LI  Master 
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 

Table 2-7 Description of the display easy-operation device-information command output

Item
	

Description

System MAC
	

System MAC address.

Slot
	

Slot ID.

MAC
	

Device MAC address.

ESN
	

Device ESN.

Model
	

Device model.

Device-Type
	

Device type.

Role
	

Active/standby state.
display easy-operation download-status
Function

The display easy-operation download-status command displays file download status of clients on the Commander.
Format

display easy-operation download-status [ client client-id | verbose ]
Parameters
Parameter 	Description 	Value

client client-id
	

Displays the file download status of a client with a specified client ID.
	

The value is an integer. It depends on the maximum number of clients supported by the Commander. For details, see Maximum Number of Managed Clients on the Commander.

verbose
	

Displays detailed file download information of clients.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

This command displays file download status of clients, including client information (such as the client ID, MAC address, and IP address), scenario (zero touch device deployment, faulty device replacement, or batch upgrade), downloaded files, file download phase, and current status.

A client downloads files in the following sequence: system software, patch file, license file, web page file, configuration file, and user-defined file.

If the client client-id or verbose parameter is not specified, brief file download information of all clients is displayed.
Example

# Display brief file download information of all clients.

<HUAWEI> display easy-operation download-status
---------------------------------------------------------------------------- 
  ID     Mac address    IP address      Method      Phase         Status     
---------------------------------------------------------------------------- 
  1      00e0-fc12-3456 10.10.10.5      Zero-touch  Sys-file      Upgrading  
  2      00e0-fc12-3333 10.10.10.6      Upgrade     Config-file   Failed     
  3      00e0-fc12-1A52 10.10.10.7      Zero-touch  Patch-file    Waiting  
  4      00e0-fc12-4458 10.10.10.8      Zero-touch  Web-file      Upgrading  
----------------------------------------------------------------------------

# Display detailed file download information of client 5.

<HUAWEI> display easy-operation download-status verbose
The total number of client in downloading files is : 1

---------------------------------------------------------------------------
 Client ID                    : 5
 Mac address                  : 00e0-fc12-2323
 ESN                          : 210235362912xxxxxxxx
 Host name                    : RTF_1-54
 IP address                   : 192.168.14.252
 Method                       : Zero-touch
 IP address of file server    : 192.168.1.88
 Type of file server          : SFTP
 Username of file server      : 1
 Configuration file           : -
 System-software file         : -
 Patch file                   : -
 WEB file                     : -
 License file                 : -
 Customs file 1               : -
 Customs file 2               : -
 Customs file 3               : -
 Activating file time         : Immediately
 Activating file method       : Default
 Phase                        : Unknown
 DownloadSize(byte)           : 29916738
 Status                       : Upgrading
 Reason                       : The device will enter getting download-information state.
 Description                  : The device will enter getting download-information state.
---------------------------------------------------------------------------



