Logical Interface Configuration Commands

    Command Support
    display interface loopback
    display interface null
    display interface virtual-ethernet
    interface loopback
    interface null
    interface virtual-ethernet
    portswitch (VE interface view)
    statistic enable (sub-interface view)
    trigger trap

Command Support

Commands provided in this section and all the parameters in the commands are supported by all switch models (except the S5751-L, S5731-L, and S5731S-L), unless otherwise specified. For details, see specific commands.
display interface loopback
Function

Using the display interface loopback command, you can view the status and traffic statistics of a loopback interface.
Format

display interface loopback [ loopback-number | main ]
Parameters
Parameter 	Description 	Value

loopback-number
	

Displays status and traffic statistics about a specified loopback interface.

If loopback-number is not specified, the status and traffic statistics of all loopback interfaces are displayed.
	

-

main
	

Displays status and traffic statistics about a Loopback interface.

A Loopback interface has no sub-interfaces. Status and traffic statistics about a Loopback interface are displayed whether you specify the main parameter or not.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

Usage Scenario

In the scenario where you need to monitor the status of an interface or locate an interface fault, you can use the display interface loopback command to collect the statistics on the interface including the status. Through the displayed information, you can collect the traffic statistics and troubleshoot the interface.

Prerequisite

A loopback interface has been created using the interface loopback command.
Example

# Display the status and traffic statistics of a specified loopback interface.

<HUAWEI> display interface loopback 6

LoopBack6 current state : UP
Line protocol current state : UP (spoofing)
Description:
Route Port,The Maximum Transmit Unit is 1500
Internet Address is 10.3.3.3/32
Current system time: 2012-02-25 09:56:04
    Last 10 seconds input rate 0 bits/sec, 0 packets/sec                                                                            
    Last 10 seconds output rate 0 bits/sec, 0 packets/sec                                                                           
    Realtime 0 seconds input rate 0 bits/sec, 0 packets/sec                                                                         
    Realtime 0 seconds output rate 0 bits/sec, 0 packets/sec                                                                        
    Input: 0 packets,0 bytes                                                                                                        
           0 unicast,0 broadcast,0 multicast                                                                                        
           0 errors,0 unknownprotocol                                                                                               
    Output:0 packets,0 bytes                                                                                                        
           0 unicast,0 broadcast,0 multicast                                                                                        
           0 errors                           
    Input bandwidth utilization  :    0%
    Output bandwidth utilization :    0%

Table 4-34 Description of the display interface loopback command output

Item
	

Description

LoopBack6 current state
	

Physical status of a loopback interface. The physical status of a loopback interface is always Up after the loopback interface is created.

Line protocol current state
	

Link layer protocol status of a loopback interface. The link layer protocol status of a loopback interface is always Up after the loopback interface is created.

Description
	

Indicates the description of the interface, which can be set by using the description command.

Route Port,The Maximum Transmit Unit is 1500
	

Indicates the maximum transmission unit (MTU). The default MTU is 1500 bytes. Packets longer than the MTU are fragmented before being transmitted. If fragmentation is not allowed, the packet is discarded.

Internet Address is
	

Indicates the IP address of the interface.

Current system time
	

Indicates the current system time.

Input bandwidth utilization
	

Indicates the percentage of the rate for receiving packets to the total bandwidth.

Output bandwidth utilization
	

Indicates the percentage of the rate for sending packets to the total bandwidth.
display interface null
Function

Using the display interface null command, you can view the status and traffic statistics of a null interface.
Format

display interface null [ 0 | main ]
Parameters
Parameter 	Description 	Value

0
	

Displays status and traffic statistics about a specified Null interface.
	

The value can be 0 only.

main
	

Displays status and traffic statistics about a Null interface.

A Null interface has no sub-interfaces. Status and traffic statistics about a Null interface are displayed whether you specify the main parameter or not.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

Usage Scenario

The display interface null command displays the status of a null interface. The interface status information includes: the physical status, link layer protocol status, description, MTU, IP address, current system time, last time statistics about the null interface are cleared, incoming and outgoing packet rates in bit/s and pps, total numbers of packets and bytes received and sent by the null interface, and percentages of the rates for receiving and sending packets to the total bandwidth.

Precautions

There is only one null interface, namely, NULL 0.
Example

# Display the status and traffic statistics of Null 0 interface.

<HUAWEI> display interface null 0

NULL0 current state : UP
Line protocol current state : UP (spoofing)
Description:
Route Port,The Maximum Transmit Unit is 1500
Internet protocol processing : disabled
Physical is NULL DEV
Current system time: 2012-02-25 10:25:59
    Last 300 seconds input rate 0 bits/sec, 0 packets/sec
    Last 300 seconds output rate 0 bits/sec, 0 packets/sec
    Realtime 0 seconds input rate 0 bits/sec, 0 packets/sec
    Realtime 0 seconds output rate 0 bits/sec, 0 packets/sec
    Input: 0 packets,0 bytes
           0 unicast,0 broadcast,0 multicast
           0 errors,0 unknownprotocol
    Output:0 packets,0 bytes
           0 unicast,0 broadcast,0 multicast
           0 errors
    Input bandwidth utilization  :    0%
    Output bandwidth utilization :    0% 

Table 4-35 Description of the display interface null command output

Item
	

Description

NULL0 current state
	

Indicates the physical status of the null interface.

The physical status of the null interface is always Up.

Line protocol current state
	

Indicates the link layer protocol status of the interface. The protocol status of the null interface is always Up.

Description
	

Indicates the description of the interface, which can be set by using the description command.

Route Port
	

A Layer 3 interface.

The Maximum Transmit Unit
	

Indicates the MTU of the interface.

Internet protocol processing : disabled
	

Indicates that the Internet protocol processing is not configured.

Physical is NULL DEV
	

Indicates that the interface is null.

Current system time
	

Indicates the current system time.

Last 300 seconds input rate

Last 300 seconds output rate
	

Indicates the rates for sending and receiving the bytes and the packets by the interface in the last five minutes.

Realtime 0 seconds input rate

Realtime 0 seconds output rate
	

Indicates the real-time rates of sending and receiving the bytes and the packets.

It refers to the interval between two display commands that are run on the same interface. The maximum value is the statistical interval displayed in the previous piece of information. This entry is displayed only when information about a logical interface is viewed.

Input
	

Indicates the total number of packets and the total number of bytes received by the interface.

Output
	

Indicates the total number of packets and the total number of bytes sent by the interface.

Input bandwidth utilization
	

Indicates the percentage of the rate for receiving packets to the total bandwidth.

Output bandwidth utilization
	

Indicates the percentage of the rate for sending packets to the total bandwidth.
display interface virtual-ethernet
Function

The display interface virtual-ethernet command displays status and traffic statistics about Virtual Ethernet (VE) interfaces.

Only the S5731-H, S5731-S, S5731S-H, S5731S-S, S5732-H, S6730-H, S6730S-H, S6730-S, and S6730S-S support this command.
Format

display interface virtual-ethernet [ ve-number | main ]
Parameters
Parameter 	Description 	Value

ve-number
	

Displays status and traffic statistics about a specified VE interface.

If no interface number is specified, information about all VE interfaces is displayed.
	

The sequence number ranges from 0 to 511.

main
	

Displays status and traffic statistics about a VE interface.

If you do not specify the main parameter, status and traffic statistics about both a VE interface and VE sub-interfaces are displayed.
	

-
Views

All views
Default Level

1: Monitoring level
Usage Guidelines

In the scenario where you need to monitor the status of an interface or locate an interface fault, you can use the display interface virtual-ethernet command to collect the statistics on the interface including the status. Through the displayed information, you can collect the traffic statistics and troubleshoot the interface.
Example

# Display the status and traffic statistics of VE 0/0/1.

<HUAWEI> display interface virtual-ethernet 0/0/1
Virtual-Ethernet0/0/1 current state : UP                                        
Line protocol current state : UP
Description:                                                                    
Route Port,The Maximum Transmit Unit is 1500                                    
Internet protocol processing : disabled                                         
IP Sending Frames' Format is PKTFMT_ETHNT_2, Hardware address is xxxx-xxxx-xxxx 
Current system time: 2017-01-02 02:20:03                                        
Last 300 seconds input rate 0 bits/sec, 0 packets/sec                           
Last 300 seconds output rate 0 bits/sec, 0 packets/sec                          
Input:  0 packets, 0 bytes                                                      
  Unicast:                          0,  Multicast:                           0  
  Broadcast:                        0                                           
Output:  0 packets, 0 bytes                                                     
  Unicast:                          0,  Multicast:                           0  
  Broadcast:                        0                                           
    Input bandwidth utilization  :    0%                                        
    Output bandwidth utilization :    0%

Table 4-36 Description of the display interface virtual-Ethernet command output

Item
	

Description

Virtual-Ethernet0/0/1 current state
	
Physical status of the VE interface:

    UP: indicates that the interface is Up.

    DOWN: indicates that the interface is Down.

    Administratively DOWN: indicates that the administrator uses the shutdown command on the interface.

Line protocol current state
	
Indicates the link layer protocol status of the interface:

    UP: indicates that the link layer protocol on the interface is Up.

    DOWN: indicates that the link layer protocol on the interface is Down or no IP address is assigned to the interface.

Description
	

Description of an interface. The information allows users to know about functions of the interface and is used to identify the current interface.

You can run the description command to configure or modify the description of an interface.

Route Port
	

Layer 3 interface. If this parameter specifies a Layer 2 interface, the value of this parameter will be displayed as "Switch Port".

You can run the portswitch command to change the mode of an interface from Layer 3 to Layer 2.

The Maximum Transmit Unit is
	

MTU of the interface.

Internet protocol processing : disabled
	

No IP address is configured for the interface. If an IP address is configured for the interface, the interface's IP address and subnet mask are displayed.

IP Sending Frames' Format is
	

Format of frames sent by the IP protocol, including PKTFMT_ETHNT_2, Ethernet_802.3, and Ethernet_SNAP.

Hardware address is
	

MAC address of the interface.

Current system time
	

Current system time.

If the system is configured with a time zone and is in the summer daylight saving time, the time is displayed in the format of YYYY/MM/DD HH:MM:SS UTC±HH:MM DST.

Last 300 seconds input rate
	

Incoming packet rate (bits per second and packets per second) within the last 300 seconds.

Last 300 seconds output rate
	

Outgoing packet rate (bits per second and packets per second) within the last 300 seconds.

Input
	

Total number of received packets.

Output
	

Total number of sent packets.

Unicast
	

Number of unicast packets that are received or sent by the interface.

Broadcast
	

Number of broadcast packets that are received or sent by the interface.

Input bandwidth utilization
	

Inbound bandwidth usage.

Output bandwidth utilization
	

Outbound bandwidth usage.
interface loopback
Function

The interface loopback command creates a loopback interface.

The undo interface loopback command deletes a loopback interface.
Format

interface loopback loopback-number

undo interface loopback loopback-number
Parameters
Parameter 	Description 	Value

loopback-number
	

Specifies the number of a loopback interface.
	

The value is an integer. On the S5735S-H, S5736-S, S5735-S, S5731-H, S5731S-H, S6730-H, and S6720S-S series switches, the value ranges from 0 to 1023. On the SS1720GW-E, S1720GWR-E, S5720-LI, S2730S-S, S5735-L-I, S5735-L1,S300, S5735-L, S5735S-L1, and S5720S-LI series switches, the value ranges from 0 to 15.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

A loopback interface is always Up.

The IP address of a loopback interface is usually specified as the source address of packets.
Example

# Create loopback interface 5.

<HUAWEI> system-view
[HUAWEI] interface loopback 5
[HUAWEI-LoopBack5]

interface null
Function

Using the interface null command, you can enter the null interface view.
Format

interface null 0
Parameters

None
Views

System view
Default Level

2: Configuration level
Usage Guidelines
Usage Scenario

The Null0 interface never forwards or accepts any traffic. All traffic sent to this interface is directly discarded. Unnecessary traffic can be sent to the Null0 interface to avoid using ACLs.
Precautions

There is only one null interface, named null0. This interface is always Up and cannot be shut down or deleted.
Example

# Enter the view of the Null0 interface.

<HUAWEI> system-view

[HUAWEI] interface null 0

[HUAWEI-NULL0]

interface virtual-ethernet
Function

The interface virtual-ethernet command displays the view of an existing virtual Ethernet (VE) interface, or creates a VE interface and displays the VE interface view.

The undo interface virtual-ethernet command deletes a VE interface.

By default, no VE interface is created.

Only the S5731-H, S5731-S, S5731S-H, S5731S-S, S5732-H, S6730-H, S6730S-H, S6730-S, and S6730S-S support this command.
Format

interface virtual-ethernet ve-number[.subnumber ]

undo interface virtual-ethernet ve-number [.subnumber ]
Parameters
Parameter 	Description 	Value

ve-number
	

Specifies the number of a VE interface.
	

The sequence number is an integer that ranges from 0 to 511.

subnumber
	

Specifies the number of a VE sub-interface.
	

The value is an integer that ranges from 1 to 1024.
Views

System view
Default Level

2: Configuration level
Usage Guidelines

A VE interface is a logical interface with Ethernet features on a switch. VE interfaces are mainly used in scenarios where Ethernet over GRE is configured or an L2VPN accesses to an L3VPN. You need to create a VE sub-interface when configuring an L2VPN to access to an L3VPN.
Example

# Create VE interface 0//0/1.

<HUAWEI> system-view
[HUAWEI] interface virtual-ethernet 0/0/1
[HUAWEI-Virtual-Ethernet0/0/1]

# Create VE sub-interface VE0/0/1.1.

<HUAWEI> system-view
[HUAWEI] interface virtual-ethernet 0/0/1
[HUAWEI-Virtual-Ethernet0/0/1] ve-group 1 l3-access
[HUAWEI-Virtual-Ethernet0/0/1] quit
[HUAWEI] interface virtual-ethernet 0/0/1.1
[HUAWEI-Virtual-Ethernet0/0/1.1]

portswitch (VE interface view)
Function

The portswitch command changes the working mode of a virtual Ethernet (VE) interface from Layer 3 mode to Layer 2 mode.

The undo portswitch command changes the working mode of a VE interface from Layer 2 mode to Layer 3 mode.

By default, a VE interface works in Layer 3 mode.

Only the S5731-H, S5731-S, S5731S-H, S5731S-S, S5732-H, S6730-H, S6730S-H, S6730-S, and S6730S-S support this command.
Format

portswitch

undo portswitch
Parameters

None
Views

VE interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

By default, a VE interface on the device works in Layer 3 mode. To enable Layer 2 forwarding on the VE interface, run the portswitch command to change the working mode to Layer 2 mode.

Precautions

    If an interface has the non-attribute configuration, this command cannot be executed. Before running this command, delete the non-attribute configuration on the interface.

    The minimum interval between running the portswitch and undo portswitch commands must be 30s.

Example

# Change VE0/0/1 to Layer 2 mode.

<HUAWEI> system-view
[HUAWEI] interface virtual-ethernet 0/0/1
[HUAWEI-Virtual-Ethernet0/0/1] portswitch

statistic enable (sub-interface view)
Function

The statistic enable command enables traffic statistics collection on a sub-interface.

The undo statistic enable command disables traffic statistics collection on a sub-interface.

By default, traffic statistics collection is disabled on a sub-interface.

This configuration is supported only by the S5731-H, S5731S-H, S5731-S, S5731S-S, S5732-H, S6730-H, S6730S-H, S6730-S and S6730S-S.

For the S5732-H, S6730-H, S6730S-H, S6730-S, and S6730S-S: Configuring traffic statistics collection on sub-interfaces may affect the forwarding performance. For example, some packets may be discarded when all interfaces forward packets at the line rate. Therefore, configure traffic statistics collection on sub-interfaces if necessary.
Format

statistic enable { both | inbound | outbound }

undo statistic enable { both | inbound | outbound }
Parameters

Parameter
	

Description
	

Value

both
	

Enables traffic statistics collection for incoming and outgoing traffic.
	

-

inbound
	

Enables traffic statistics collection for incoming traffic.
	

-

outbound
	

Enables traffic statistics collection for outgoing traffic.
	

-
Views

GE sub-interface view, XGE sub-interface view, MultiGE sub-interface view, 25GE sub-interface view, 40GE sub-interface view, 100GE sub-interface view, Eth-Trunk sub-interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

To check the network status or troubleshoot network faults, enable traffic statistics collection on a sub-interface. The device then collects traffic statistics on the sub-interface.

Precautions

    After you run the undo statistic enable command to disable traffic statistics collection on a sub-interface, traffic statistics collection on the sub-interface is stopped and the collected traffic statistics are cleared.

    Traffic statistics collection on sub-interfaces occupies a device's limited ACL resources. If this function is enabled on too many sub-interfaces, other services may fail to obtain ACL resources.

    Traffic statistics collection on sub-interfaces is unavailable for error packets.

    The device supports traffic statistics collection on a maximum of 4096 sub-interfaces.
    VXLAN Layer 2 sub-interfaces do not support traffic statistics collection.

Example

# Enable traffic statistics collection for incoming and outgoing traffic on the sub-interface GigabitEthernet1/0/1.1.

<HUAWEI> system-view
[HUAWEI] interface gigabitethernet 1/0/1.1
[HUAWEI-GigabitEthernet1/0/1.1] statistic enable both

trigger trap
Function

Using the trigger trap command, you can configure an interface to send traps to the NMS.
Format

trigger trap { linkup | linkdown }
Parameters
Parameter 	Description 	Value
linkup 	Sends the LinkUp trap to the NMS. 	-
linkdown 	Sends the LinkDown trap to the NMS. 	-
Views

Loopback interface view
Default Level

2: Configuration level
Usage Guidelines

Usage Scenario

The traps configured by trigger trap are used to check whether the network between the NMS and device functions properly. If the NMS receives a trap sent from the interface, the network between the NMS and device functions properly; otherwise, a fault may occur on the network.

Prerequisites

Run the snmp-agent trap enable feature-name command to enable the LinkUp and LinkDown traps.

Precautions

The trigger trap command is used on loopback interfaces to check the network between the NMS and device. The interface status does not change according to the meaning of the trap. For example, if the trigger trap linkdown command is used, the loopback interface sends a LinkDown trap to the NMS but does not change its status to Down. If you have used the trigger trap linkdown command, you must run the trigger trap linkup command to clear the LinkDown trap on the NMS.
Example

# Configure a loopback interface to send the LinkUp trap to the NMS.

<HUAWEI> system-view

[HUAWEI] interface loopback 1

[HUAWEI-LoopBack1] trigger trap linkup

