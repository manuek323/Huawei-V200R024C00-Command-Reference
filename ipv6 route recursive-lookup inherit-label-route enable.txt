ipv6 route recursive-lookup inherit-label-route enable
Function

The ipv6 route recursive-lookup inherit-label-route enable command allows a device to recurse IPv6 routes to VPN remote cross routes.

The undo ipv6 route recursive-lookup inherit-label-route enable command disables a device from recursing IPv6 routes to VPN remote cross routes.

By default, IPv6 routes cannot recurse to VPN remote cross routes.

Only the S5731-H, S5731S-H, S5731-S, S5731S-S, S6730-S, S6730S-S, S5732-H, S6735-S, S6730S-H, and S6730-H support this command.

Format

ipv6 route recursive-lookup inherit-label-route enable

undo ipv6 route recursive-lookup inherit-label-route enable
Parameters

None
Views

System view
Default Level

2: Configuration level
Usage Guidelines

Recursion is required if the next hop of a route is unreachable. To allow IPv6 routes to recurse to VPN remote cross routes, run the ipv6 route recursive-lookup inherit-label-route enable command. After the command is run, IPv6 routes inherit the labels and tokens of the VPN remote cross routes, ensuring correct traffic forwarding. This command mainly applies to BGP/MPLS IPv6 VPN scenarios.

In Figure 7-2, PE1 and PE2 are IBGP peers, and CE1 and PE1 are IGP neighbors. PE2 learns the IP address of CE1's loopback interface, and an EBGP peer relationship is established between CE1 and PE2 using loopback interface IP addresses. By default, the BGP routes that PE2 learns from CE1 through the EBGP peer connection cannot recurse to VPN remote cross routes. As a result, traffic fails to be forwarded. To address this problem, run the ipv6 route recursive-lookup inherit-label-route enable command to allow the BGP4+ routes to recurse to VPN remote cross routes. After the BGP4+ routes inherit the labels and tokens of the VPN remote cross routes, traffic can be correctly forwarded.
Figure 7-2 Basic BGP/MPLS IPv6 VPN networking

Example

# Allow a device to recurse IPv6 routes to VPN remote cross routes.

<HUAWEI> system-view

[HUAWEI] ipv6 route recursive-lookup inherit-label-route enable

